{"version":3,"mappings":"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;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;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","names":["routes","getCurrentPath","showView","viewId","view","targetView","event","updateNavbarActiveState","path","link","href","handleRoute","navigateTo","initRouter","e","keydownHandler","showModalHandler","hideModalHandler","initKeyboardNavigation","cleanupKeyboardNavigation","closeActiveModal","trapFocusInModal","restoreFocus","activeModal","bsModal","Modal","modalFocusHandlers","modal","oldHandler","focusableElements","firstFocusable","lastFocusable","tabHandler","previousElement","isDisabled","isHidden","enableKeyboardShortcuts","saveDraftBtn","submitBtn","renderLandingView","container","attachEventListeners","btnStart","button","route","initLandingView","ERROR_MESSAGES","n","VALIDATION_RULES","getVisibleFields","allFields","field","getFeedbackElement","validateRequired","value","showFieldError","validateLength","rules","validateNumericRange","numValue","validateDate","inputDate","today","validatePattern","fieldName","message","validateEmail","validateFieldOnEvent","checkOnlyIfHasState","isRequired","hasValue","clearFieldError","showFieldValid","errorMessage","error","validateField","validateForm","formElement","invalidFields","feedbackDiv","initializeRealTimeValidation","RANDOM_STRING_BASE","RANDOM_STRING_START_INDEX","RANDOM_STRING_END_INDEX","generateUUID","bytes","hex","byte","generateTimestampId","prefix","timestamp","random","generateDraftId","generateHistoryId","getISODateString","formatDate","isoDateString","date","monthNames","day","month","year","formatDateTime","hours","minutes","formatDateDisplay","includeTime","STORAGE_KEYS","isStorageAvailable","test","_save","key","data","jsonString","_load","createNewDraft","formData","draftName","id","now","name","updateExistingDraft","drafts","existingId","draft","saveDraft","updatedDrafts","saveResult","newDraft","getDrafts","result","getDraftById","deleteDraft","filteredDrafts","saveHistory","cvTextContent","customName","history","historyItem","updatedHistory","getHistory","getHistoryById","item","deleteHistory","filteredHistory","clearAllData","TOAST_CONTAINER_ID","TOAST_ID_PREFIX","TOAST_CLASS","TOAST_HEADER_CLASS","TOAST_BODY_CLASS","RANDOM_ID_START","RANDOM_ID_LENGTH","DEFAULT_TITLE","DEFAULT_TYPE","DEFAULT_DURATION","TOAST_CONFIGS","showToast","options","typeParam","config","title","type","duration","onClose","toastId","toastConfig","getToastConfig","toastHTML","toastElement","toastInstance","SPINNER_SIZE_SM","DATA_ATTR_ORIGINAL_CONTENT","DATA_ATTR_ORIGINAL_DISABLED","setButtonLoading","loadingText","resetButtonLoading","renderFormView","tanggalLahirInput","form","btnReset","btnSaveDraft","jenisKelaminSelect","statusPernikahanSelect","handleGenderChange","handleMaritalStatusChange","attachValidationListeners","handleFormSubmit","handleResetForm","handleSaveDraft","gender","wrapperJenggot","wrapperPoligami","fieldJenggot","fieldPoligami","wrapperHijab","wrapperDipoligami","fieldHijab","fieldDipoligami","status","wrapperJumlahAnak","fieldJumlahAnak","collectFormData","btnSave","loadDraftToForm","draftData","validationResult","initFormView","draftToLoad","tempData","MONTH_NAMES","dateString","parts","yearNum","monthNum","dayNum","formatEmpty","getCurrentDate","buildSectionHeader","buildFieldLine","label","buildMultilineField","buildHeader","currentDate","divider","buildPersonalDataSection","tanggalLahirFormatted","lines","buildEducationSection","buildFamilySection","buildReligionSection","buildProfileSection","buildMarriageVisionSection","buildContactSection","buildFooter","generateCV","renderPreviewView","loadFormData","previewHTML","buildPreviewHTML","dataStr","html","display","btnBack","btnGenerate","handleGenerateCV","originalText","cvText","initPreviewView","renderResultView","charCount","handleCopyToClipboard","cvOutput","btnCopy","fallbackErr","handleSaveHistory","sourceDataStr","sourceData","err","handlePrintCV","printWindow","handleNewCV","btnSaveHistory","btnPrint","btnNewCV","btnBackHome","initResultView","renderDraftView","loadDrafts","sortedDrafts","a","b","renderEmptyState","renderDraftList","btnCreateNew","attachDraftListeners","tooltipTriggerEl","handleLoadDraft","draftId","handleDeleteDraft","confirmMessage","loadBtn","deleteBtn","initDraftView","renderHistoryView","loadHistory","sortedHistory","renderHistoryList","attachHistoryListeners","handleViewHistory","historyId","modalContent","handleCopyHistory","textarea","fallbackError","handleDeleteHistory","handleModalCopy","viewBtn","copyBtn","btnModalCopy","initHistoryView","doaHaditsData","getByCategory","category","CARD_CLASS","COPY_BUTTON_CLASS","COPY_SUCCESS_DURATION","CARD_CATEGORY_ATTR","CARD_ID_ATTR","BUTTON_CONTENT_ATTR","createDoaHaditsCard","arabic","translation","source","safeTitle","escapeHtml","safeArabic","safeTranslation","safeSource","fullContent","safeFullContent","renderDoaHaditsCards","containerId","items","cardsHTML","attachCopyListeners","content","originalHTML","decodedContent","decodeHtml","text","div","txt","renderDoaView","loadDoaHaditsContent","attachTabChangeListeners","tab","targetId","contentPane","cardsContainer","__vitePreload","DoaHaditsCard","module","initDoaView","renderSettingsView","initSettingsView","bootstrap","initApp","yearElement","bootstrap.Tooltip"],"ignoreList":[],"sources":["../../src/router/router.js","../../src/utils/keyboardNavigation.js","../../src/views/landingView.js","../../src/services/validationService.js","../../src/utils/idGenerator.js","../../src/utils/dateUtils.js","../../src/services/localStorageService.js","../../src/components/ToastNotification.js","../../src/components/LoadingSpinner.js","../../src/types/enums.js","../../src/views/formView.js","../../src/services/cvGeneratorService.js","../../src/views/previewView.js","../../src/views/resultView.js","../../src/views/draftView.js","../../src/views/historyView.js","../../src/data/doaHaditsData.js","../../src/components/DoaHaditsCard.js","../../src/views/doaView.js","../../src/views/settingsView.js","../../src/main.js"],"sourcesContent":["/**\r\n * @file router.js\r\n * @description Hash-based SPA router for Taaruf CV Kreator\r\n * @version 1.0\r\n * @date 2025-12-08\r\n */\r\n\r\n/**\r\n * Route configuration mapping hash paths to view IDs\r\n * @type {Object<string, string>}\r\n */\r\nconst routes = {\r\n  \"/\": \"view-landing\",\r\n  \"/home\": \"view-landing\",\r\n  \"/form\": \"view-form\",\r\n  \"/preview\": \"view-preview\",\r\n  \"/result\": \"view-result\",\r\n  \"/draft\": \"view-draft\",\r\n  \"/history\": \"view-history\",\r\n  \"/doa\": \"view-doa\",\r\n  \"/settings\": \"view-settings\",\r\n};\r\n\r\n/**\r\n * Get current hash path from URL\r\n * @returns {string} Current hash path (e.g., '/form')\r\n */\r\nfunction getCurrentPath() {\r\n  const hash = window.location.hash.slice(1); // Remove '#' prefix\r\n  return hash || \"/\";\r\n}\r\n\r\n/**\r\n * Show specified view and hide all others\r\n * @param {string} viewId - The DOM ID of the view to show\r\n */\r\nfunction showView(viewId) {\r\n  // Get all view sections\r\n  const views = document.querySelectorAll(\".view-section\");\r\n\r\n  // Hide all views\r\n  views.forEach((view) => {\r\n    view.classList.add(\"d-none\");\r\n  });\r\n\r\n  // Show target view\r\n  const targetView = document.getElementById(viewId);\r\n  if (targetView) {\r\n    targetView.classList.remove(\"d-none\");\r\n\r\n    // Scroll to top when view changes\r\n    window.scrollTo(0, 0);\r\n\r\n    // Trigger custom event for view lifecycle hooks\r\n    const event = new CustomEvent(\"viewChanged\", {\r\n      detail: { viewId, path: getCurrentPath() },\r\n    });\r\n    window.dispatchEvent(event);\r\n  } else {\r\n    console.error(`View with ID \"${viewId}\" not found`);\r\n  }\r\n}\r\n\r\n/**\r\n * Update navbar active state based on current route\r\n * @param {string} path - Current route path\r\n */\r\nfunction updateNavbarActiveState(path) {\r\n  const navLinks = document.querySelectorAll(\".navbar-nav .nav-link\");\r\n\r\n  navLinks.forEach((link) => {\r\n    const href = link.getAttribute(\"href\");\r\n\r\n    // Remove active class from all links\r\n    link.classList.remove(\"active\");\r\n\r\n    // Add active class to matching link\r\n    if (href === `#${path}` || (path === \"/\" && href === \"#/\")) {\r\n      link.classList.add(\"active\");\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * Handle route change and render appropriate view\r\n */\r\nfunction handleRoute() {\r\n  const path = getCurrentPath();\r\n  const viewId = routes[path];\r\n\r\n  if (viewId) {\r\n    showView(viewId);\r\n    updateNavbarActiveState(path);\r\n  } else {\r\n    // 404 - Redirect to home\r\n    console.warn(`Route \"${path}\" not found, redirecting to home`);\r\n    navigateTo(\"/\");\r\n  }\r\n}\r\n\r\n/**\r\n * Programmatically navigate to a specific route\r\n * @param {string} path - Target path (e.g., '/form', '/doa')\r\n */\r\nfunction navigateTo(path) {\r\n  window.location.hash = `#${path}`;\r\n}\r\n\r\n/**\r\n * Initialize router and set up event listeners\r\n */\r\nfunction initRouter() {\r\n  // Handle initial page load\r\n  handleRoute();\r\n\r\n  // Listen for hash changes\r\n  window.addEventListener(\"hashchange\", handleRoute);\r\n\r\n  // Prevent default anchor behavior for hash links\r\n  document.addEventListener(\"click\", (e) => {\r\n    const link = e.target.closest('a[href^=\"#/\"]');\r\n    if (link) {\r\n      e.preventDefault();\r\n      const path = link.getAttribute(\"href\").slice(1);\r\n      navigateTo(path);\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * Get current active view ID\r\n * @returns {string|null} Current view ID or null if none active\r\n */\r\nfunction getCurrentView() {\r\n  const path = getCurrentPath();\r\n  return routes[path] || null;\r\n}\r\n\r\n// Export router functions\r\nexport {\r\n  initRouter,\r\n  navigateTo,\r\n  showView,\r\n  getCurrentPath,\r\n  getCurrentView,\r\n  handleRoute,\r\n};\r\n","/**\r\n * @file keyboardNavigation.js\r\n * @description Keyboard Navigation and Focus Management\r\n * @version 1.1\r\n * @date 2025-12-12\r\n */\r\n\r\nimport { Modal } from \"bootstrap\";\r\n\r\n// Store event handlers for cleanup\r\nlet keydownHandler = null;\r\nlet showModalHandler = null;\r\nlet hideModalHandler = null;\r\n\r\n/**\r\n * Initialize keyboard navigation for the application\r\n * @returns {Function} Cleanup function to remove event listeners\r\n */\r\nexport function initKeyboardNavigation() {\r\n  // Clean up existing listeners if any\r\n  cleanupKeyboardNavigation();\r\n\r\n  // ESC key closes modals\r\n  keydownHandler = (e) => {\r\n    if (e.key === \"Escape\") {\r\n      closeActiveModal();\r\n    }\r\n  };\r\n\r\n  // Trap focus inside modals\r\n  showModalHandler = (e) => {\r\n    trapFocusInModal(e.target);\r\n  };\r\n\r\n  // Restore focus when modal closes\r\n  hideModalHandler = () => {\r\n    restoreFocus();\r\n  };\r\n\r\n  document.addEventListener(\"keydown\", keydownHandler);\r\n  document.addEventListener(\"show.bs.modal\", showModalHandler);\r\n  document.addEventListener(\"hide.bs.modal\", hideModalHandler);\r\n\r\n  return cleanupKeyboardNavigation;\r\n}\r\n\r\n/**\r\n * Cleanup keyboard navigation event listeners\r\n */\r\nexport function cleanupKeyboardNavigation() {\r\n  if (keydownHandler) {\r\n    document.removeEventListener(\"keydown\", keydownHandler);\r\n    keydownHandler = null;\r\n  }\r\n  if (showModalHandler) {\r\n    document.removeEventListener(\"show.bs.modal\", showModalHandler);\r\n    showModalHandler = null;\r\n  }\r\n  if (hideModalHandler) {\r\n    document.removeEventListener(\"hide.bs.modal\", hideModalHandler);\r\n    hideModalHandler = null;\r\n  }\r\n}\r\n\r\n/**\r\n * Close active Bootstrap modal\r\n */\r\nfunction closeActiveModal() {\r\n  const activeModal = document.querySelector(\".modal.show\");\r\n  if (activeModal) {\r\n    const bsModal = Modal.getInstance(activeModal);\r\n    if (bsModal) {\r\n      bsModal.hide();\r\n    }\r\n  }\r\n}\r\n\r\n// Store modal focus trap handlers to prevent duplicates\r\nconst modalFocusHandlers = new WeakMap();\r\n\r\n/**\r\n * Trap focus inside modal for accessibility\r\n * @param {HTMLElement} modal - Modal element\r\n */\r\nfunction trapFocusInModal(modal) {\r\n  if (!modal) return;\r\n\r\n  // Remove existing handler if any\r\n  if (modalFocusHandlers.has(modal)) {\r\n    const oldHandler = modalFocusHandlers.get(modal);\r\n    modal.removeEventListener(\"keydown\", oldHandler);\r\n  }\r\n\r\n  const focusableElements = modal.querySelectorAll(\r\n    'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\r\n  );\r\n\r\n  const firstFocusable = focusableElements[0];\r\n  const lastFocusable = focusableElements[focusableElements.length - 1];\r\n\r\n  // Store currently focused element\r\n  modal.dataset.previousFocus = document.activeElement?.id || \"\";\r\n\r\n  // Focus first element with error handling\r\n  setTimeout(() => {\r\n    if (firstFocusable) {\r\n      try {\r\n        firstFocusable.focus();\r\n      } catch (error) {\r\n        // Silently fail if element cannot be focused\r\n      }\r\n    }\r\n  }, 100);\r\n\r\n  // Create and store handler\r\n  const tabHandler = (e) => {\r\n    if (e.key === \"Tab\") {\r\n      if (e.shiftKey) {\r\n        // Shift + Tab\r\n        if (document.activeElement === firstFocusable) {\r\n          e.preventDefault();\r\n          try {\r\n            lastFocusable.focus();\r\n          } catch (error) {\r\n            // Element might not be focusable\r\n          }\r\n        }\r\n      } else {\r\n        // Tab\r\n        if (document.activeElement === lastFocusable) {\r\n          e.preventDefault();\r\n          try {\r\n            firstFocusable.focus();\r\n          } catch (error) {\r\n            // Element might not be focusable\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  modalFocusHandlers.set(modal, tabHandler);\r\n  modal.addEventListener(\"keydown\", tabHandler);\r\n}\r\n\r\n/**\r\n * Restore focus to previously focused element\r\n */\r\nfunction restoreFocus() {\r\n  const modal = document.querySelector(\".modal\");\r\n  if (modal && modal.dataset.previousFocus) {\r\n    const previousElement = document.getElementById(\r\n      modal.dataset.previousFocus\r\n    );\r\n    if (previousElement) {\r\n      // Check if element is focusable before attempting to focus\r\n      const isDisabled = previousElement.hasAttribute(\"disabled\");\r\n      const isHidden = previousElement.offsetParent === null;\r\n\r\n      if (!isDisabled && !isHidden) {\r\n        try {\r\n          previousElement.focus();\r\n        } catch (error) {\r\n          // Silently fail if focus fails (element might have been removed)\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Enable keyboard shortcuts for common actions\r\n */\r\nexport function enableKeyboardShortcuts() {\r\n  document.addEventListener(\"keydown\", (e) => {\r\n    // Ctrl/Cmd + S to save draft (prevent browser save dialog)\r\n    if ((e.ctrlKey || e.metaKey) && e.key === \"s\") {\r\n      e.preventDefault();\r\n      const saveDraftBtn = document.getElementById(\"btn-save-draft\");\r\n      if (saveDraftBtn && !saveDraftBtn.disabled) {\r\n        saveDraftBtn.click();\r\n      }\r\n    }\r\n\r\n    // Ctrl/Cmd + Enter to submit form\r\n    if ((e.ctrlKey || e.metaKey) && e.key === \"Enter\") {\r\n      const submitBtn = document.querySelector('button[type=\"submit\"]');\r\n      if (submitBtn && !submitBtn.disabled) {\r\n        submitBtn.click();\r\n      }\r\n    }\r\n  });\r\n}\r\n","/**\r\n * @file landingView.js\r\n * @description Landing Page View - Homepage of Taaruf CV Kreator\r\n * @version 1.0\r\n * @date 2025-12-08\r\n */\r\n\r\nimport { navigateTo } from \"../router/router.js\";\r\n\r\n/**\r\n * Render Landing Page content\r\n */\r\nfunction renderLandingView() {\r\n  const container = document.getElementById(\"view-landing\");\r\n\r\n  container.innerHTML = `\r\n    <!-- Hero Section -->\r\n    <div class=\"hero-section\">\r\n      <h1>\r\n        Taaruf CV Kreator\r\n      </h1>\r\n      <p class=\"lead\">Buat CV Ta'aruf Islami dengan Mudah dan Aman</p>\r\n      <button class=\"btn btn-light btn-lg mt-3\" id=\"btn-start\">\r\n        <i class=\"bi bi-pencil-square\"></i> Buat CV Baru\r\n      </button>\r\n    </div>\r\n\r\n    <!-- Privacy Notice -->\r\n    <div class=\"alert privacy-notice\" role=\"alert\">\r\n      <h5 class=\"alert-heading\">\r\n        <i class=\"bi bi-shield-lock\"></i> Privasi Anda Terjamin\r\n      </h5>\r\n      <p class=\"mb-0\">\r\n        Semua data yang Anda masukkan <strong>hanya tersimpan di browser Anda</strong> \r\n        dan <strong>tidak dikirim ke server manapun</strong>. Data Anda sepenuhnya \r\n        aman dan terkendali oleh Anda.\r\n      </p>\r\n    </div>\r\n\r\n    <!-- Features Grid -->\r\n    <div class=\"row g-4 mb-5\">\r\n      <div class=\"col-md-6 col-lg-3\">\r\n        <div class=\"card feature-card\">\r\n          <div class=\"card-body\">\r\n            <i class=\"bi bi-pencil-square\"></i>\r\n            <h5 class=\"card-title\">Buat CV Baru</h5>\r\n            <p class=\"card-text\">Isi formulir lengkap untuk membuat CV Ta'aruf Anda</p>\r\n            <button class=\"btn btn-primary btn-feature\" data-route=\"/form\">\r\n              Mulai <i class=\"bi bi-arrow-right\"></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"col-md-6 col-lg-3\">\r\n        <div class=\"card feature-card\">\r\n          <div class=\"card-body\">\r\n            <i class=\"bi bi-file-earmark-text\"></i>\r\n            <h5 class=\"card-title\">Draft Saya</h5>\r\n            <p class=\"card-text\">Lanjutkan mengisi CV yang belum selesai</p>\r\n            <button class=\"btn btn-primary btn-feature\" data-route=\"/draft\">\r\n              Lihat Draft <i class=\"bi bi-arrow-right\"></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"col-md-6 col-lg-3\">\r\n        <div class=\"card feature-card\">\r\n          <div class=\"card-body\">\r\n            <i class=\"bi bi-clock-history\"></i>\r\n            <h5 class=\"card-title\">Riwayat CV</h5>\r\n            <p class=\"card-text\">Akses CV yang sudah pernah dibuat sebelumnya</p>\r\n            <button class=\"btn btn-primary btn-feature\" data-route=\"/history\">\r\n              Lihat Riwayat <i class=\"bi bi-arrow-right\"></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"col-md-6 col-lg-3\">\r\n        <div class=\"card feature-card\">\r\n          <div class=\"card-body\">\r\n            <i class=\"bi bi-book\"></i>\r\n            <h5 class=\"card-title\">Doa & Hadits</h5>\r\n            <p class=\"card-text\">Doa dan hadits seputar pernikahan dalam Islam</p>\r\n            <button class=\"btn btn-primary btn-feature\" data-route=\"/doa\">\r\n              Baca <i class=\"bi bi-arrow-right\"></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- About Section -->\r\n    <div class=\"row\">\r\n      <div class=\"col-lg-8 mx-auto\">\r\n        <div class=\"card\">\r\n          <div class=\"card-body p-4\">\r\n            <h3 class=\"card-title mb-3\">\r\n              <img \r\n                src=\"./married-couple.png\" \r\n                alt=\"Married Couple Icon\" \r\n                class=\"me-2\"\r\n                style=\"height: 40px; width: 40px; object-fit: contain; vertical-align: middle;\"\r\n              />\r\n              Tentang CV Ta'aruf\r\n            </h3>\r\n            <p>\r\n              <strong>Ta'aruf</strong> adalah proses perkenalan dalam Islam yang bertujuan \r\n              untuk menuju pernikahan. CV Ta'aruf berisi informasi pribadi, latar belakang \r\n              pendidikan, keluarga, praktik ibadah, dan visi pernikahan.\r\n            </p>\r\n            <p>\r\n              Aplikasi <strong>Taaruf CV Kreator</strong> membantu Anda menyusun CV Ta'aruf \r\n              dengan format yang rapi dan sistematis, sehingga memudahkan proses perkenalan \r\n              dengan calon pasangan.\r\n            </p>\r\n            <p class=\"mb-0\">\r\n              <i class=\"bi bi-check-circle text-success\"></i> Formulir lengkap 49 kolom<br>\r\n              <i class=\"bi bi-check-circle text-success\"></i> Format output yang rapi<br>\r\n              <i class=\"bi bi-check-circle text-success\"></i> Simpan draft & riwayat<br>\r\n              <i class=\"bi bi-check-circle text-success\"></i> 100% privasi terjaga\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  `;\r\n\r\n  // Attach event listeners\r\n  attachEventListeners();\r\n}\r\n\r\n/**\r\n * Attach event listeners for landing page interactions\r\n */\r\nfunction attachEventListeners() {\r\n  // Hero CTA button\r\n  const btnStart = document.getElementById(\"btn-start\");\r\n  if (btnStart) {\r\n    btnStart.addEventListener(\"click\", () => {\r\n      navigateTo(\"/form\");\r\n    });\r\n  }\r\n\r\n  // Feature card buttons\r\n  const featureButtons = document.querySelectorAll(\".btn-feature\");\r\n  featureButtons.forEach((button) => {\r\n    button.addEventListener(\"click\", (e) => {\r\n      const route = e.currentTarget.getAttribute(\"data-route\");\r\n      if (route) {\r\n        navigateTo(route);\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\n/**\r\n * Initialize landing view when view is activated\r\n */\r\nfunction initLandingView() {\r\n  renderLandingView();\r\n}\r\n\r\n// Listen for view change event\r\nwindow.addEventListener(\"viewChanged\", (e) => {\r\n  if (e.detail.viewId === \"view-landing\") {\r\n    initLandingView();\r\n  }\r\n});\r\n\r\n// Initialize on first load if this is the active view\r\nif (\r\n  window.location.hash === \"\" ||\r\n  window.location.hash === \"#/\" ||\r\n  window.location.hash === \"#/home\"\r\n) {\r\n  // Wait for DOM to be ready\r\n  if (document.readyState === \"loading\") {\r\n    document.addEventListener(\"DOMContentLoaded\", initLandingView);\r\n  } else {\r\n    initLandingView();\r\n  }\r\n}\r\n\r\nexport { renderLandingView, initLandingView };\r\n","/**\r\n * @file validationService.js\r\n * @description Form validation service with rules and error messages\r\n * @version 1.1\r\n * @date 2025-01-27\r\n * @changelog\r\n * - v1.1 (2025-01-27): Added real-time validation on blur (AC-VAL-001, AC-VAL-002)\r\n */\r\n\r\n/**\r\n * Error message templates in Bahasa Indonesia\r\n */\r\nexport const ERROR_MESSAGES = {\r\n  REQUIRED: \"Kolom ini wajib diisi.\",\r\n  MIN_LENGTH: (n) => `Minimal ${n} karakter.`,\r\n  MAX_LENGTH: (n) => `Maksimal ${n} karakter.`,\r\n  EMAIL: \"Format email tidak valid.\",\r\n  NUMBER: \"Harus berupa angka.\",\r\n  MIN_VALUE: (n) => `Nilai minimal adalah ${n}.`,\r\n  MAX_VALUE: (n) => `Nilai maksimal adalah ${n}.`,\r\n  DATE_FUTURE: \"Tanggal tidak boleh di masa depan.\",\r\n  PHONE: \"Format nomor telepon tidak valid (10-15 digit).\",\r\n  CONDITIONAL: \"Kolom ini wajib diisi berdasarkan pilihan sebelumnya.\",\r\n  PATTERN: \"Format input tidak sesuai.\",\r\n};\r\n\r\n/**\r\n * Validation rules for special fields\r\n */\r\nexport const VALIDATION_RULES = {\r\n  namaLengkap: {\r\n    required: true,\r\n    minLength: 3,\r\n  },\r\n  tempatLahir: {\r\n    required: true,\r\n  },\r\n  tanggalLahir: {\r\n    required: true,\r\n    maxDate: \"today\",\r\n  },\r\n  jenisKelamin: {\r\n    required: true,\r\n  },\r\n  tinggiBadan: {\r\n    required: true,\r\n    min: 100,\r\n    max: 250,\r\n  },\r\n  beratBadan: {\r\n    required: true,\r\n    min: 30,\r\n    max: 200,\r\n  },\r\n  pekerjaan: {\r\n    required: true,\r\n  },\r\n  statusPernikahan: {\r\n    required: true,\r\n  },\r\n  jumlahAnak: {\r\n    conditional: true, // Required if statusPernikahan != 'Lajang'\r\n    min: 0,\r\n    max: 20,\r\n  },\r\n  domisili: {\r\n    required: true,\r\n  },\r\n  statusIzin: {\r\n    required: true,\r\n  },\r\n  pendidikanTerakhir: {\r\n    required: true,\r\n    minLength: 10,\r\n  },\r\n  infoAyah: {\r\n    required: true,\r\n    minLength: 10,\r\n  },\r\n  infoIbu: {\r\n    required: true,\r\n    minLength: 10,\r\n  },\r\n  urutanAnak: {\r\n    required: true,\r\n    pattern: /^\\d+\\s+dari\\s+\\d+$/,\r\n  },\r\n  shalatWajib: {\r\n    required: true,\r\n  },\r\n  bacaanQuran: {\r\n    required: true,\r\n  },\r\n  sifatPositif: {\r\n    required: true,\r\n  },\r\n  sifatNegatif: {\r\n    required: true,\r\n  },\r\n  merokok: {\r\n    required: true,\r\n  },\r\n  statusHijab: {\r\n    conditional: true, // Required if jenisKelamin == 'Perempuan'\r\n  },\r\n  statusJenggot: {\r\n    conditional: true, // Required if jenisKelamin == 'Laki-laki'\r\n  },\r\n  visiPernikahan: {\r\n    required: true,\r\n    minLength: 20,\r\n  },\r\n  kriteriaPasangan: {\r\n    required: true,\r\n    minLength: 20,\r\n  },\r\n  kesediaanPoligami: {\r\n    conditional: true, // Required if jenisKelamin == 'Laki-laki'\r\n  },\r\n  kesediaanDipoligami: {\r\n    conditional: true, // Required if jenisKelamin == 'Perempuan'\r\n  },\r\n  noHP: {\r\n    pattern: /^[0-9]{10,15}$/,\r\n  },\r\n  email: {\r\n    type: \"email\",\r\n  },\r\n};\r\n\r\n// ============================================================================\r\n// HELPER FUNCTIONS\r\n// ============================================================================\r\n\r\n/**\r\n * Get all visible form fields (not in hidden containers)\r\n * @private\r\n * @param {HTMLFormElement|HTMLElement} container - Form or container element\r\n * @returns {Array<HTMLElement>} Array of visible form fields\r\n */\r\nconst getVisibleFields = (container) => {\r\n  const allFields = container.querySelectorAll(\"input, select, textarea\");\r\n  return Array.from(allFields).filter((field) => !field.closest(\".d-none\"));\r\n};\r\n\r\n/**\r\n * Get feedback element for field (error message container)\r\n * @private\r\n * @param {HTMLElement} field - Form field element\r\n * @returns {HTMLElement|null} Feedback element or null\r\n */\r\nconst getFeedbackElement = (field) => {\r\n  return field.nextElementSibling?.classList.contains(\"invalid-feedback\")\r\n    ? field.nextElementSibling\r\n    : null;\r\n};\r\n\r\n/**\r\n * Check if field is required and value is empty\r\n * @private\r\n * @param {HTMLElement} field - Form field element\r\n * @param {string} value - Field value (trimmed)\r\n * @returns {boolean} True if validation fails\r\n */\r\nconst validateRequired = (field, value) => {\r\n  if (field.hasAttribute(\"required\") && !value) {\r\n    showFieldError(field, ERROR_MESSAGES.REQUIRED);\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\n/**\r\n * Validate field length (min and max)\r\n * @private\r\n * @param {HTMLElement} field - Form field element\r\n * @param {string} value - Field value (trimmed)\r\n * @param {Object} rules - Validation rules\r\n * @returns {boolean} True if validation passes\r\n */\r\nconst validateLength = (field, value, rules) => {\r\n  if (rules?.minLength && value.length < rules.minLength) {\r\n    showFieldError(field, ERROR_MESSAGES.MIN_LENGTH(rules.minLength));\r\n    return false;\r\n  }\r\n  if (rules?.maxLength && value.length > rules.maxLength) {\r\n    showFieldError(field, ERROR_MESSAGES.MAX_LENGTH(rules.maxLength));\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\n/**\r\n * Validate numeric range (min and max value)\r\n * @private\r\n * @param {HTMLElement} field - Form field element\r\n * @param {string} value - Field value (trimmed)\r\n * @param {Object} rules - Validation rules\r\n * @returns {boolean} True if validation passes\r\n */\r\nconst validateNumericRange = (field, value, rules) => {\r\n  if (field.type !== \"number\") return true;\r\n\r\n  const numValue = parseFloat(value);\r\n  if (rules?.min !== undefined && numValue < rules.min) {\r\n    showFieldError(field, ERROR_MESSAGES.MIN_VALUE(rules.min));\r\n    return false;\r\n  }\r\n  if (rules?.max !== undefined && numValue > rules.max) {\r\n    showFieldError(field, ERROR_MESSAGES.MAX_VALUE(rules.max));\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\n/**\r\n * Validate date field (max date = today)\r\n * @private\r\n * @param {HTMLElement} field - Form field element\r\n * @param {string} value - Field value (date string)\r\n * @param {Object} rules - Validation rules\r\n * @returns {boolean} True if validation passes\r\n */\r\nconst validateDate = (field, value, rules) => {\r\n  if (field.type !== \"date\" || rules?.maxDate !== \"today\") return true;\r\n\r\n  const inputDate = new Date(value);\r\n  const today = new Date();\r\n  today.setHours(0, 0, 0, 0);\r\n\r\n  if (inputDate > today) {\r\n    showFieldError(field, ERROR_MESSAGES.DATE_FUTURE);\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\n/**\r\n * Validate pattern (regex)\r\n * @private\r\n * @param {HTMLElement} field - Form field element\r\n * @param {string} value - Field value (trimmed)\r\n * @param {Object} rules - Validation rules\r\n * @param {string} fieldName - Field name for special handling\r\n * @returns {boolean} True if validation passes\r\n */\r\nconst validatePattern = (field, value, rules, fieldName) => {\r\n  if (!rules?.pattern || !value) return true;\r\n\r\n  if (!rules.pattern.test(value)) {\r\n    const message =\r\n      fieldName === \"noHP\" ? ERROR_MESSAGES.PHONE : ERROR_MESSAGES.PATTERN;\r\n    showFieldError(field, message);\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\n/**\r\n * Validate email format\r\n * @private\r\n * @param {HTMLElement} field - Form field element\r\n * @param {string} value - Field value (trimmed)\r\n * @param {Object} rules - Validation rules\r\n * @returns {boolean} True if validation passes\r\n */\r\nconst validateEmail = (field, value, rules) => {\r\n  if (rules?.type !== \"email\" || !value) return true;\r\n\r\n  const emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n  if (!emailPattern.test(value)) {\r\n    showFieldError(field, ERROR_MESSAGES.EMAIL);\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\n/**\r\n * Run validation on field event (blur or input)\r\n * Extracted to avoid code duplication\r\n * @private\r\n * @param {HTMLElement} field - Form field element\r\n * @param {boolean} checkOnlyIfHasState - If true, only validate if field already has validation state\r\n */\r\nconst validateFieldOnEvent = (field, checkOnlyIfHasState = false) => {\r\n  try {\r\n    const isRequired = field.hasAttribute(\"required\");\r\n    const hasValue = field.value.trim() !== \"\";\r\n\r\n    // Skip validation if checking only if has state AND doesn't have state\r\n    if (checkOnlyIfHasState) {\r\n      const hasState =\r\n        field.classList.contains(\"is-invalid\") ||\r\n        field.classList.contains(\"is-valid\");\r\n      if (!hasState) return;\r\n    }\r\n\r\n    // Clear validation first\r\n    clearFieldError(field);\r\n\r\n    // Only validate if required OR has value\r\n    if (!isRequired && !hasValue) {\r\n      clearFieldError(field);\r\n      return;\r\n    }\r\n\r\n    // Use built-in checkValidity\r\n    if (field.checkValidity()) {\r\n      showFieldValid(field);\r\n    } else {\r\n      const feedbackDiv = getFeedbackElement(field);\r\n      const errorMessage = feedbackDiv?.textContent || ERROR_MESSAGES.REQUIRED;\r\n      showFieldError(field, errorMessage);\r\n    }\r\n  } catch (error) {\r\n    console.error(\"[ValidationService] Error in validateFieldOnEvent:\", error);\r\n  }\r\n};\r\n\r\n// ============================================================================\r\n// PUBLIC VALIDATION FUNCTIONS\r\n// ============================================================================\r\n\r\n/**\r\n * Validate a single field\r\n * @param {HTMLElement} field - Form field element\r\n * @returns {boolean} - True if valid, false if invalid\r\n */\r\nexport function validateField(field) {\r\n  try {\r\n    if (!field) {\r\n      console.error(\"[ValidationService] Field is null or undefined\");\r\n      return false;\r\n    }\r\n\r\n    const fieldName = field.name || field.id;\r\n    const value = field.value.trim();\r\n    const rules = VALIDATION_RULES[fieldName];\r\n\r\n    // Clear previous errors\r\n    clearFieldError(field);\r\n\r\n    // Skip validation for hidden fields\r\n    if (field.closest(\".d-none\")) {\r\n      return true;\r\n    }\r\n\r\n    // Run validators in sequence - return false on first failure\r\n    if (!validateRequired(field, value)) return false;\r\n\r\n    // Skip further validation if value is empty and not required\r\n    if (!value && !field.hasAttribute(\"required\")) {\r\n      return true;\r\n    }\r\n\r\n    if (!validateLength(field, value, rules)) return false;\r\n    if (!validateNumericRange(field, value, rules)) return false;\r\n    if (!validateDate(field, value, rules)) return false;\r\n    if (!validatePattern(field, value, rules, fieldName)) return false;\r\n    if (!validateEmail(field, value, rules)) return false;\r\n\r\n    // Final check with browser's built-in validation\r\n    if (!field.checkValidity()) {\r\n      showFieldError(field, field.validationMessage || ERROR_MESSAGES.REQUIRED);\r\n      return false;\r\n    }\r\n\r\n    // All checks passed\r\n    showFieldValid(field);\r\n    return true;\r\n  } catch (error) {\r\n    console.error(\"[ValidationService] Error in validateField:\", error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Validate entire form\r\n * @param {HTMLFormElement} formElement - Form element\r\n * @returns {Object} - { isValid: boolean, firstInvalidField: HTMLElement|null }\r\n */\r\nexport function validateForm(formElement) {\r\n  try {\r\n    if (!formElement) {\r\n      console.error(\"[ValidationService] Form element is null or undefined\");\r\n      return { isValid: false, firstInvalidField: null };\r\n    }\r\n\r\n    const fields = getVisibleFields(formElement);\r\n    const invalidFields = fields.filter((field) => !validateField(field));\r\n\r\n    return {\r\n      isValid: invalidFields.length === 0,\r\n      firstInvalidField: invalidFields[0] || null,\r\n    };\r\n  } catch (error) {\r\n    console.error(\"[ValidationService] Error in validateForm:\", error);\r\n    return { isValid: false, firstInvalidField: null };\r\n  }\r\n}\r\n\r\n/**\r\n * Show error message for a field\r\n * @param {HTMLElement} field - Form field element\r\n * @param {string} message - Error message\r\n */\r\nexport function showFieldError(field, message) {\r\n  field.classList.remove(\"is-valid\");\r\n  field.classList.add(\"is-invalid\");\r\n\r\n  // Update invalid-feedback div with optional chaining\r\n  const feedbackDiv = getFeedbackElement(field);\r\n  if (feedbackDiv) {\r\n    feedbackDiv.textContent = message;\r\n  }\r\n}\r\n\r\n/**\r\n * Show valid state for a field\r\n * @param {HTMLElement} field - Form field element\r\n */\r\nexport function showFieldValid(field) {\r\n  field.classList.remove(\"is-invalid\");\r\n  field.classList.add(\"is-valid\");\r\n}\r\n\r\n/**\r\n * Clear validation state for a field\r\n * @param {HTMLElement} field - Form field element\r\n */\r\nexport function clearFieldError(field) {\r\n  field.classList.remove(\"is-invalid\", \"is-valid\");\r\n}\r\n\r\n/**\r\n * Clear all validation states in form\r\n * @param {HTMLFormElement} formElement - Form element\r\n */\r\nexport function clearAllValidation(formElement) {\r\n  const fields = getVisibleFields(formElement);\r\n  fields.forEach((field) => clearFieldError(field));\r\n}\r\n\r\n/**\r\n * Initialize real-time validation for form fields\r\n * Adds blur event listeners to validate fields on focus out\r\n * Implements AC-VAL-001 and AC-VAL-002 requirements\r\n * @param {HTMLFormElement} formElement - Form element\r\n */\r\nexport function initializeRealTimeValidation(formElement) {\r\n  try {\r\n    if (!formElement) {\r\n      console.error(\"[ValidationService] Form element is null or undefined\");\r\n      return;\r\n    }\r\n\r\n    const fields = formElement.querySelectorAll(\"input, select, textarea\");\r\n\r\n    fields.forEach((field) => {\r\n      // Blur event: Validate on focus out\r\n      field.addEventListener(\"blur\", () => {\r\n        validateFieldOnEvent(field, false); // Always validate on blur\r\n      });\r\n\r\n      // Input event: Validate only if field already has validation state (UX improvement)\r\n      // This removes error as user types\r\n      field.addEventListener(\"input\", () => {\r\n        validateFieldOnEvent(field, true); // Only validate if has state\r\n      });\r\n    });\r\n  } catch (error) {\r\n    console.error(\r\n      \"[ValidationService] Error initializing real-time validation:\",\r\n      error\r\n    );\r\n  }\r\n}\r\n","/**\r\n * ID Generator Utilities\r\n * Generate unique IDs for Draft and History objects\r\n */\r\n\r\n// Constants for ID generation\r\nconst RANDOM_STRING_BASE = 36;\r\nconst RANDOM_STRING_START_INDEX = 2;\r\nconst RANDOM_STRING_END_INDEX = 6;\r\nconst RANDOM_STRING_LENGTH =\r\n  RANDOM_STRING_END_INDEX - RANDOM_STRING_START_INDEX; // 4 characters\r\n\r\n/**\r\n * Generate UUID v4 (RFC 4122 compliant)\r\n * @returns {string} UUID v4 string\r\n * @example\r\n * generateUUID() // \"550e8400-e29b-41d4-a716-446655440000\"\r\n */\r\nexport function generateUUID() {\r\n  // Check if crypto.randomUUID is available (modern browsers)\r\n  if (typeof crypto !== \"undefined\" && crypto.randomUUID) {\r\n    return crypto.randomUUID();\r\n  }\r\n\r\n  // Secure fallback using crypto.getRandomValues for older browsers\r\n  if (typeof crypto !== \"undefined\" && crypto.getRandomValues) {\r\n    const bytes = new Uint8Array(16);\r\n    crypto.getRandomValues(bytes);\r\n\r\n    // Set version (4) and variant (10) bits per RFC 4122\r\n    bytes[6] = (bytes[6] & 0x0f) | 0x40; // Version 4\r\n    bytes[8] = (bytes[8] & 0x3f) | 0x80; // Variant 10\r\n\r\n    // Convert to hex string with proper UUID format\r\n    const hex = Array.from(bytes, (byte) =>\r\n      byte.toString(16).padStart(2, \"0\")\r\n    ).join(\"\");\r\n    return `${hex.slice(0, 8)}-${hex.slice(8, 12)}-${hex.slice(\r\n      12,\r\n      16\r\n    )}-${hex.slice(16, 20)}-${hex.slice(20)}`;\r\n  }\r\n\r\n  // Last resort fallback (should never happen in modern environments)\r\n  throw new Error(\"Crypto API not available. Cannot generate secure UUID.\");\r\n}\r\n\r\n/**\r\n * Generate timestamp-based ID with prefix\r\n * Format: {prefix}_{timestamp}_{random}\r\n * @param {string} prefix - Prefix for the ID (e.g., \"draft\", \"cv\")\r\n * @returns {string} Timestamp-based ID\r\n * @example\r\n * generateTimestampId(\"draft\") // \"draft_1733580000000_a3f9\"\r\n */\r\nexport function generateTimestampId(prefix = \"id\") {\r\n  const timestamp = Date.now();\r\n  const random = Math.random()\r\n    .toString(RANDOM_STRING_BASE)\r\n    .substring(RANDOM_STRING_START_INDEX, RANDOM_STRING_END_INDEX);\r\n  return `${prefix}_${timestamp}_${random}`;\r\n}\r\n\r\n/**\r\n * Generate Draft ID\r\n * Uses timestamp-based ID for better readability\r\n * @returns {string} Draft ID\r\n * @example\r\n * generateDraftId() // \"draft_1733580000000_a3f9\"\r\n */\r\nexport function generateDraftId() {\r\n  return generateTimestampId(\"draft\");\r\n}\r\n\r\n/**\r\n * Generate History/CV ID\r\n * Uses UUID v4 for maximum uniqueness\r\n * @returns {string} CV ID with \"cv_\" prefix\r\n * @example\r\n * generateHistoryId() // \"cv_550e8400-e29b-41d4-a716-446655440000\"\r\n */\r\nexport function generateHistoryId() {\r\n  return `cv_${generateUUID()}`;\r\n}\r\n\r\n/**\r\n * Validate if a string is a valid UUID v4\r\n * @param {string} uuid - UUID string to validate\r\n * @returns {boolean} True if valid UUID v4\r\n * @example\r\n * isValidUUID(\"550e8400-e29b-41d4-a716-446655440000\") // true\r\n * isValidUUID(\"invalid\") // false\r\n */\r\nexport function isValidUUID(uuid) {\r\n  if (!uuid || typeof uuid !== \"string\") return false;\r\n\r\n  const uuidPattern =\r\n    /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\r\n  return uuidPattern.test(uuid);\r\n}\r\n\r\n/**\r\n * Validate if a string is a valid timestamp ID\r\n * @param {string} id - ID string to validate\r\n * @param {string} expectedPrefix - Expected prefix (optional)\r\n * @returns {boolean} True if valid timestamp ID\r\n * @example\r\n * isValidTimestampId(\"draft_1733580000000_a3f9\", \"draft\") // true\r\n * isValidTimestampId(\"invalid\") // false\r\n */\r\nexport function isValidTimestampId(id, expectedPrefix = null) {\r\n  if (!id || typeof id !== \"string\") return false;\r\n\r\n  const parts = id.split(\"_\");\r\n  if (parts.length !== 3) return false;\r\n\r\n  const [prefix, timestamp, random] = parts;\r\n\r\n  // Check prefix if specified\r\n  if (expectedPrefix && prefix !== expectedPrefix) return false;\r\n\r\n  // Check timestamp is a valid number\r\n  const ts = parseInt(timestamp, 10);\r\n  if (isNaN(ts) || ts <= 0) return false;\r\n\r\n  // Check random part exists and has expected length\r\n  if (!random || random.length !== RANDOM_STRING_LENGTH) return false;\r\n\r\n  return true;\r\n}\r\n\r\n/**\r\n * Extract timestamp from timestamp-based ID\r\n * @param {string} id - Timestamp-based ID\r\n * @returns {number|null} Timestamp in milliseconds or null if invalid\r\n * @example\r\n * extractTimestamp(\"draft_1733580000000_a3f9\") // 1733580000000\r\n */\r\nexport function extractTimestamp(id) {\r\n  if (!isValidTimestampId(id)) return null;\r\n\r\n  const parts = id.split(\"_\");\r\n  return parseInt(parts[1], 10);\r\n}\r\n","/**\r\n * Date Utilities for ISO 8601 Format\r\n * Sesuai dengan REQ-DAT-003: Dates MUST be stored in ISO 8601 format\r\n */\r\n\r\n/**\r\n * Get current date/time as ISO 8601 string\r\n * @returns {string} ISO 8601 formatted date string (YYYY-MM-DDTHH:mm:ss.sssZ)\r\n * @example\r\n * getISODateString() // \"2025-12-07T14:30:00.000Z\"\r\n */\r\nexport function getISODateString() {\r\n  return new Date().toISOString();\r\n}\r\n\r\n/**\r\n * Get current date in YYYY-MM-DD format (for date input fields)\r\n * @returns {string} Date in YYYY-MM-DD format\r\n * @example\r\n * getISODateOnly() // \"2025-12-07\"\r\n */\r\nexport function getISODateOnly() {\r\n  const now = new Date();\r\n  const year = now.getFullYear();\r\n  const month = String(now.getMonth() + 1).padStart(2, \"0\");\r\n  const day = String(now.getDate()).padStart(2, \"0\");\r\n  return `${year}-${month}-${day}`;\r\n}\r\n\r\n/**\r\n * Format ISO date string for display in Indonesian format (date only)\r\n * Single Responsibility: Date formatting without time\r\n * @param {string} isoDateString - ISO 8601 date string\r\n * @returns {string|null} Formatted date string (e.g., \"07 Des 2025\") or null if invalid\r\n * @example\r\n * formatDate(\"2025-12-07T14:30:00.000Z\") // \"07 Des 2025\"\r\n */\r\nexport function formatDate(isoDateString) {\r\n  if (!isoDateString) return null;\r\n\r\n  const date = new Date(isoDateString);\r\n\r\n  if (isNaN(date.getTime())) {\r\n    return null;\r\n  }\r\n\r\n  const monthNames = [\r\n    \"Jan\",\r\n    \"Feb\",\r\n    \"Mar\",\r\n    \"Apr\",\r\n    \"Mei\",\r\n    \"Jun\",\r\n    \"Jul\",\r\n    \"Agt\",\r\n    \"Sep\",\r\n    \"Okt\",\r\n    \"Nov\",\r\n    \"Des\",\r\n  ];\r\n\r\n  const day = String(date.getDate()).padStart(2, \"0\");\r\n  const month = monthNames[date.getMonth()];\r\n  const year = date.getFullYear();\r\n\r\n  return `${day} ${month} ${year}`;\r\n}\r\n\r\n/**\r\n * Format ISO date string for display in Indonesian format (date and time)\r\n * Single Responsibility: Date and time formatting\r\n * @param {string} isoDateString - ISO 8601 date string\r\n * @returns {string|null} Formatted date-time string (e.g., \"07 Des 2025, 14:30\") or null if invalid\r\n * @example\r\n * formatDateTime(\"2025-12-07T14:30:00.000Z\") // \"07 Des 2025, 14:30\"\r\n */\r\nexport function formatDateTime(isoDateString) {\r\n  if (!isoDateString) return null;\r\n\r\n  const date = new Date(isoDateString);\r\n\r\n  if (isNaN(date.getTime())) {\r\n    return null;\r\n  }\r\n\r\n  const monthNames = [\r\n    \"Jan\",\r\n    \"Feb\",\r\n    \"Mar\",\r\n    \"Apr\",\r\n    \"Mei\",\r\n    \"Jun\",\r\n    \"Jul\",\r\n    \"Agt\",\r\n    \"Sep\",\r\n    \"Okt\",\r\n    \"Nov\",\r\n    \"Des\",\r\n  ];\r\n\r\n  const day = String(date.getDate()).padStart(2, \"0\");\r\n  const month = monthNames[date.getMonth()];\r\n  const year = date.getFullYear();\r\n  const hours = String(date.getHours()).padStart(2, \"0\");\r\n  const minutes = String(date.getMinutes()).padStart(2, \"0\");\r\n\r\n  return `${day} ${month} ${year}, ${hours}:${minutes}`;\r\n}\r\n\r\n/**\r\n * Format ISO date string for display in Indonesian format\r\n * @deprecated Use formatDate() or formatDateTime() instead to follow Single Responsibility Principle\r\n * @param {string} isoDateString - ISO 8601 date string\r\n * @param {boolean} includeTime - Whether to include time in output\r\n * @returns {string|null} Formatted date string or null if invalid\r\n * @example\r\n * formatDateDisplay(\"2025-12-07T14:30:00.000Z\") // \"07 Des 2025\"\r\n * formatDateDisplay(\"2025-12-07T14:30:00.000Z\", true) // \"07 Des 2025, 14:30\"\r\n */\r\nexport function formatDateDisplay(isoDateString, includeTime = false) {\r\n  return includeTime\r\n    ? formatDateTime(isoDateString)\r\n    : formatDate(isoDateString);\r\n}\r\n\r\n/**\r\n * Calculate age from birth date (YYYY-MM-DD)\r\n * @param {string} birthDate - Birth date in YYYY-MM-DD format\r\n * @returns {number|null} Age in years or null if invalid\r\n * @example\r\n * calculateAge(\"1995-08-17\") // 30 (as of 2025)\r\n * calculateAge(null) // null\r\n * calculateAge(\"invalid\") // null\r\n */\r\nexport function calculateAge(birthDate) {\r\n  if (!birthDate) return null;\r\n\r\n  const birth = new Date(birthDate);\r\n  if (isNaN(birth.getTime())) return null;\r\n\r\n  const today = new Date();\r\n\r\n  let age = today.getFullYear() - birth.getFullYear();\r\n  const monthDiff = today.getMonth() - birth.getMonth();\r\n\r\n  if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {\r\n    age--;\r\n  }\r\n\r\n  return age;\r\n}\r\n\r\n/**\r\n * Validate if a string is a valid ISO 8601 date\r\n * @param {string} dateString - Date string to validate\r\n * @returns {boolean} True if valid ISO 8601 date\r\n * @example\r\n * isValidISODate(\"2025-12-07\") // true\r\n * isValidISODate(\"2025-12-07T14:30:00.000Z\") // true\r\n * isValidISODate(\"invalid\") // false\r\n */\r\nexport function isValidISODate(dateString) {\r\n  if (!dateString || typeof dateString !== \"string\") return false;\r\n\r\n  const date = new Date(dateString);\r\n  return (\r\n    !isNaN(date.getTime()) &&\r\n    date.toISOString().substring(0, 10) === dateString.substring(0, 10)\r\n  );\r\n}\r\n\r\n/**\r\n * Convert date input value (YYYY-MM-DD) to ISO string for storage\r\n * @param {string} dateInputValue - Date from HTML date input\r\n * @returns {string} ISO 8601 date string\r\n * @example\r\n * dateInputToISO(\"2025-12-07\") // \"2025-12-07\"\r\n */\r\nexport function dateInputToISO(dateInputValue) {\r\n  if (!dateInputValue) return \"\";\r\n  return dateInputValue; // Already in YYYY-MM-DD format\r\n}\r\n\r\n/**\r\n * Convert ISO date string to date input value (YYYY-MM-DD)\r\n * @param {string} isoDateString - ISO 8601 date string\r\n * @returns {string|null} Date in YYYY-MM-DD format for input field or null if invalid\r\n * @example\r\n * isoToDateInput(\"2025-12-07T14:30:00.000Z\") // \"2025-12-07\"\r\n * isoToDateInput(null) // null\r\n * isoToDateInput(\"invalid\") // null\r\n */\r\nexport function isoToDateInput(isoDateString) {\r\n  if (!isoDateString) return null;\r\n\r\n  const date = new Date(isoDateString);\r\n  if (isNaN(date.getTime())) return null;\r\n\r\n  const year = date.getFullYear();\r\n  const month = String(date.getMonth() + 1).padStart(2, \"0\");\r\n  const day = String(date.getDate()).padStart(2, \"0\");\r\n\r\n  return `${year}-${month}-${day}`;\r\n}\r\n","/**\r\n * LocalStorage Service\r\n * Handles all localStorage operations with error handling\r\n * Sesuai dengan spec-data-localstorage-schema.md\r\n */\r\n\r\nimport { generateDraftId, generateHistoryId } from \"../utils/idGenerator.js\";\r\nimport { getISODateString, formatDateDisplay } from \"../utils/dateUtils.js\";\r\n\r\n// Storage Keys (REQ-DAT-002: Must use prefix \"taaruf_cv_\")\r\nconst STORAGE_KEYS = {\r\n  DRAFTS: \"taaruf_cv_drafts\",\r\n  HISTORY: \"taaruf_cv_history\",\r\n  SETTINGS: \"taaruf_cv_settings\",\r\n};\r\n\r\n// Default Settings\r\nconst DEFAULT_SETTINGS = {\r\n  theme: \"light\",\r\n  version: \"1.5\",\r\n  lastAccessed: getISODateString(),\r\n};\r\n\r\n/**\r\n * Check if localStorage is available and accessible\r\n * @returns {boolean} True if localStorage is available\r\n */\r\nexport function isStorageAvailable() {\r\n  try {\r\n    const test = \"__storage_test__\";\r\n    localStorage.setItem(test, test);\r\n    localStorage.removeItem(test);\r\n    return true;\r\n  } catch (error) {\r\n    console.error(\"localStorage is not available:\", error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Private helper: Save data to localStorage with error handling\r\n * @private\r\n * @param {string} key - Storage key\r\n * @param {*} data - Data to save\r\n * @returns {Object} Result object {success, message, error}\r\n */\r\nfunction _save(key, data) {\r\n  try {\r\n    if (!isStorageAvailable()) {\r\n      return {\r\n        success: false,\r\n        message:\r\n          \"localStorage tidak tersedia. Pastikan browser Anda tidak dalam mode privat.\",\r\n        error: new Error(\"Storage not available\"),\r\n      };\r\n    }\r\n\r\n    const jsonString = JSON.stringify(data);\r\n    localStorage.setItem(key, jsonString);\r\n\r\n    return {\r\n      success: true,\r\n      message: \"Data berhasil disimpan\",\r\n    };\r\n  } catch (error) {\r\n    // Handle QuotaExceededError (CON-DAT-001)\r\n    if (error.name === \"QuotaExceededError\") {\r\n      return {\r\n        success: false,\r\n        message:\r\n          \"Penyimpanan penuh. Hapus draft/history lama untuk melanjutkan.\",\r\n        error,\r\n      };\r\n    }\r\n\r\n    return {\r\n      success: false,\r\n      message: `Gagal menyimpan data: ${error.message}`,\r\n      error,\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Private helper: Load data from localStorage with error handling\r\n * @private\r\n * @param {string} key - Storage key\r\n * @returns {Object} Result object {success, data, message, error}\r\n */\r\nfunction _load(key) {\r\n  try {\r\n    if (!isStorageAvailable()) {\r\n      return {\r\n        success: false,\r\n        data: null,\r\n        message: \"localStorage tidak tersedia\",\r\n        error: new Error(\"Storage not available\"),\r\n      };\r\n    }\r\n\r\n    const jsonString = localStorage.getItem(key);\r\n\r\n    if (jsonString === null) {\r\n      return {\r\n        success: true,\r\n        data: null,\r\n        message: \"Data tidak ditemukan\",\r\n      };\r\n    }\r\n\r\n    const data = JSON.parse(jsonString);\r\n\r\n    return {\r\n      success: true,\r\n      data,\r\n      message: \"Data berhasil dimuat\",\r\n    };\r\n  } catch (error) {\r\n    console.error(`Error loading data from ${key}:`, error);\r\n\r\n    return {\r\n      success: false,\r\n      data: null,\r\n      message:\r\n        \"Data corrupt atau format tidak valid. Pertimbangkan untuk reset data.\",\r\n      error,\r\n    };\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// DRAFT OPERATIONS\r\n// ============================================================================\r\n\r\n/**\r\n * Pure function: Create a new draft object\r\n * @private\r\n * @param {Partial<FormData>} formData - Form data\r\n * @param {string|null} draftName - Custom draft name\r\n * @returns {DraftObject} New draft object\r\n */\r\nconst createNewDraft = (formData, draftName = null) => {\r\n  const id = generateDraftId();\r\n  const now = getISODateString();\r\n  const name =\r\n    draftName ||\r\n    `Draft - ${formData.namaLengkap || \"Tanpa Nama\"} - ${formatDateDisplay(\r\n      now\r\n    )}`;\r\n\r\n  return {\r\n    id,\r\n    name,\r\n    createdAt: now,\r\n    lastUpdated: now,\r\n    data: formData,\r\n  };\r\n};\r\n\r\n/**\r\n * Pure function: Update existing draft in array (immutable)\r\n * @private\r\n * @param {Array<DraftObject>} drafts - Current drafts array\r\n * @param {string} existingId - Draft ID to update\r\n * @param {Partial<FormData>} formData - Updated form data\r\n * @param {string|null} draftName - Updated draft name (optional)\r\n * @returns {Array<DraftObject>} New drafts array with updated draft\r\n */\r\nconst updateExistingDraft = (drafts, existingId, formData, draftName) => {\r\n  const now = getISODateString();\r\n  return drafts.map((draft) =>\r\n    draft.id === existingId\r\n      ? {\r\n          ...draft,\r\n          lastUpdated: now,\r\n          data: formData,\r\n          ...(draftName && { name: draftName }),\r\n        }\r\n      : draft\r\n  );\r\n};\r\n\r\n/**\r\n * Save a new draft or update existing draft\r\n * @param {Partial<FormData>} formData - Form data (can be incomplete)\r\n * @param {string} [draftName] - Custom draft name (optional)\r\n * @param {string} [existingId] - Existing draft ID for update (optional)\r\n * @returns {Object} Result object with draft ID\r\n */\r\nexport function saveDraft(formData, draftName = null, existingId = null) {\r\n  try {\r\n    const draftsResult = _load(STORAGE_KEYS.DRAFTS);\r\n    const drafts = draftsResult.data || [];\r\n\r\n    if (existingId) {\r\n      // Verify draft exists before update\r\n      const draftExists = drafts.some((draft) => draft.id === existingId);\r\n      if (!draftExists) {\r\n        return {\r\n          success: false,\r\n          message: \"Draft tidak ditemukan\",\r\n        };\r\n      }\r\n\r\n      const updatedDrafts = updateExistingDraft(\r\n        drafts,\r\n        existingId,\r\n        formData,\r\n        draftName\r\n      );\r\n      const saveResult = _save(STORAGE_KEYS.DRAFTS, updatedDrafts);\r\n\r\n      return saveResult.success\r\n        ? { ...saveResult, data: { id: existingId } }\r\n        : saveResult;\r\n    } else {\r\n      // Create new draft\r\n      const newDraft = createNewDraft(formData, draftName);\r\n      const updatedDrafts = [...drafts, newDraft];\r\n      const saveResult = _save(STORAGE_KEYS.DRAFTS, updatedDrafts);\r\n\r\n      return saveResult.success\r\n        ? { ...saveResult, data: { id: newDraft.id } }\r\n        : saveResult;\r\n    }\r\n  } catch (error) {\r\n    return {\r\n      success: false,\r\n      message: `Error saving draft: ${error.message}`,\r\n      error,\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Get all drafts\r\n * @returns {Array<DraftObject>} Array of draft objects\r\n */\r\nexport function getDrafts() {\r\n  const result = _load(STORAGE_KEYS.DRAFTS);\r\n\r\n  if (result.success) {\r\n    return result.data || [];\r\n  }\r\n\r\n  console.error(\"Error loading drafts:\", result.message);\r\n  return [];\r\n}\r\n\r\n/**\r\n * Get a specific draft by ID\r\n * @param {string} id - Draft ID\r\n * @returns {DraftObject|null} Draft object or null if not found\r\n */\r\nexport function getDraftById(id) {\r\n  const drafts = getDrafts();\r\n  return drafts.find((draft) => draft.id === id) || null;\r\n}\r\n\r\n/**\r\n * Update an existing draft\r\n * @param {string} id - Draft ID\r\n * @param {Partial<FormData>} formData - Updated form data\r\n * @param {string} [draftName] - Updated draft name (optional)\r\n * @returns {Object} Result object\r\n */\r\nexport function updateDraft(id, formData, draftName = null) {\r\n  return saveDraft(formData, draftName, id);\r\n}\r\n\r\n/**\r\n * Delete a draft by ID\r\n * @param {string} id - Draft ID to delete\r\n * @returns {Object} Result object\r\n */\r\nexport function deleteDraft(id) {\r\n  try {\r\n    const drafts = getDrafts();\r\n\r\n    // Check if draft exists\r\n    const draftExists = drafts.some((draft) => draft.id === id);\r\n    if (!draftExists) {\r\n      return {\r\n        success: false,\r\n        message: \"Draft tidak ditemukan\",\r\n      };\r\n    }\r\n\r\n    const filteredDrafts = drafts.filter((draft) => draft.id !== id);\r\n    return _save(STORAGE_KEYS.DRAFTS, filteredDrafts);\r\n  } catch (error) {\r\n    return {\r\n      success: false,\r\n      message: `Error deleting draft: ${error.message}`,\r\n      error,\r\n    };\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// HISTORY OPERATIONS\r\n// ============================================================================\r\n\r\n/**\r\n * Save a generated CV to history\r\n * @param {FormData} formData - Complete validated form data\r\n * @param {string} cvTextContent - Generated CV text\r\n * @param {string} [customName] - Custom CV name (optional)\r\n * @returns {Object} Result object with history ID\r\n */\r\nexport function saveHistory(formData, cvTextContent, customName = null) {\r\n  try {\r\n    const historyResult = _load(STORAGE_KEYS.HISTORY);\r\n    const history = historyResult.data || [];\r\n\r\n    const id = generateHistoryId();\r\n    const now = getISODateString();\r\n    const name =\r\n      customName || `${formData.namaLengkap} - ${formatDateDisplay(now)}`;\r\n\r\n    const historyItem = {\r\n      id,\r\n      name,\r\n      generatedAt: now,\r\n      cvTextContent,\r\n      sourceData: formData,\r\n    };\r\n\r\n    // Immutable array update\r\n    const updatedHistory = [...history, historyItem];\r\n    const saveResult = _save(STORAGE_KEYS.HISTORY, updatedHistory);\r\n\r\n    return saveResult.success ? { ...saveResult, data: { id } } : saveResult;\r\n  } catch (error) {\r\n    return {\r\n      success: false,\r\n      message: `Error saving history: ${error.message}`,\r\n      error,\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Get all history items\r\n * @returns {Array<HistoryObject>} Array of history objects\r\n */\r\nexport function getHistory() {\r\n  const result = _load(STORAGE_KEYS.HISTORY);\r\n\r\n  if (result.success) {\r\n    return result.data || [];\r\n  }\r\n\r\n  console.error(\"Error loading history:\", result.message);\r\n  return [];\r\n}\r\n\r\n/**\r\n * Get a specific history item by ID\r\n * @param {string} id - History ID\r\n * @returns {HistoryObject|null} History object or null if not found\r\n */\r\nexport function getHistoryById(id) {\r\n  const history = getHistory();\r\n  return history.find((item) => item.id === id) || null;\r\n}\r\n\r\n/**\r\n * Delete a history item by ID\r\n * @param {string} id - History ID to delete\r\n * @returns {Object} Result object\r\n */\r\nexport function deleteHistory(id) {\r\n  try {\r\n    const history = getHistory();\r\n\r\n    // Check if history item exists\r\n    const itemExists = history.some((item) => item.id === id);\r\n    if (!itemExists) {\r\n      return {\r\n        success: false,\r\n        message: \"History tidak ditemukan\",\r\n      };\r\n    }\r\n\r\n    const filteredHistory = history.filter((item) => item.id !== id);\r\n    return _save(STORAGE_KEYS.HISTORY, filteredHistory);\r\n  } catch (error) {\r\n    return {\r\n      success: false,\r\n      message: `Error deleting history: ${error.message}`,\r\n      error,\r\n    };\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// SETTINGS OPERATIONS\r\n// ============================================================================\r\n\r\n/**\r\n * Get application settings (pure getter, no side effects)\r\n * @returns {SettingsObject} Settings object\r\n */\r\nexport function getSettings() {\r\n  const result = _load(STORAGE_KEYS.SETTINGS);\r\n\r\n  if (result.success && result.data) {\r\n    return {\r\n      ...DEFAULT_SETTINGS,\r\n      ...result.data,\r\n    };\r\n  }\r\n\r\n  return { ...DEFAULT_SETTINGS };\r\n}\r\n\r\n/**\r\n * Update lastAccessed timestamp for settings\r\n * Call this when you want to track when settings were last accessed\r\n * @returns {Object} Result object\r\n */\r\nexport function touchSettings() {\r\n  const currentSettings = getSettings();\r\n  return saveSettings({\r\n    ...currentSettings,\r\n    lastAccessed: getISODateString(),\r\n  });\r\n}\r\n\r\n/**\r\n * Save application settings\r\n * @param {SettingsObject} settings - Settings to save\r\n * @returns {Object} Result object\r\n */\r\nexport function saveSettings(settings) {\r\n  try {\r\n    const updatedSettings = {\r\n      ...DEFAULT_SETTINGS,\r\n      ...settings,\r\n      lastAccessed: getISODateString(),\r\n    };\r\n\r\n    return _save(STORAGE_KEYS.SETTINGS, updatedSettings);\r\n  } catch (error) {\r\n    return {\r\n      success: false,\r\n      message: `Error saving settings: ${error.message}`,\r\n      error,\r\n    };\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// UTILITY OPERATIONS\r\n// ============================================================================\r\n\r\n/**\r\n * Clear all application data (drafts, history, settings)\r\n * Used for \"Reset Data\" feature\r\n * @returns {Object} Result object\r\n */\r\nexport function clearAllData() {\r\n  try {\r\n    if (!isStorageAvailable()) {\r\n      return {\r\n        success: false,\r\n        message: \"localStorage tidak tersedia\",\r\n      };\r\n    }\r\n\r\n    // Remove all taaruf_cv_* keys\r\n    Object.values(STORAGE_KEYS).forEach((key) => {\r\n      localStorage.removeItem(key);\r\n    });\r\n\r\n    return {\r\n      success: true,\r\n      message: \"Semua data berhasil dihapus\",\r\n    };\r\n  } catch (error) {\r\n    return {\r\n      success: false,\r\n      message: `Error clearing data: ${error.message}`,\r\n      error,\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Get storage usage statistics\r\n * @returns {Object} Storage stats\r\n */\r\nexport function getStorageStats() {\r\n  try {\r\n    const drafts = getDrafts();\r\n    const history = getHistory();\r\n    const settings = getSettings();\r\n\r\n    return {\r\n      draftsCount: drafts.length,\r\n      historyCount: history.length,\r\n      hasSettings: !!settings,\r\n      storageAvailable: isStorageAvailable(),\r\n    };\r\n  } catch (error) {\r\n    console.error(\"Error getting storage stats:\", error);\r\n    return {\r\n      draftsCount: 0,\r\n      historyCount: 0,\r\n      hasSettings: false,\r\n      storageAvailable: false,\r\n    };\r\n  }\r\n}\r\n","/**\r\n * @file ToastNotification.js\r\n * @description Reusable Bootstrap Toast for non-blocking notifications\r\n * @version 1.2\r\n * @date 2025-12-12\r\n * @changelog\r\n * - v1.2: Extracted magic numbers/strings to constants (Clean Code compliance)\r\n * - v1.1: Added backward compatibility for string parameter (message, type)\r\n * - v1.0: Initial release with object parameter\r\n */\r\n\r\n// ===== CONSTANTS =====\r\nconst TOAST_CONTAINER_ID = \"toast-container\";\r\nconst TOAST_ID_PREFIX = \"toast\";\r\nconst TOAST_CLASS = \"toast\";\r\nconst TOAST_HEADER_CLASS = \"toast-header\";\r\nconst TOAST_BODY_CLASS = \"toast-body\";\r\nconst RANDOM_ID_START = 2;\r\nconst RANDOM_ID_LENGTH = 9;\r\nconst DEFAULT_TITLE = \"Notifikasi\";\r\nconst DEFAULT_TYPE = \"info\";\r\nconst DEFAULT_DURATION = 5000;\r\nconst ERROR_DURATION = 7000;\r\nconst WARNING_DURATION = 6000;\r\n\r\n// Toast type configurations\r\nconst TOAST_CONFIGS = {\r\n  success: {\r\n    icon: \"bi bi-check-circle-fill text-success\",\r\n    headerClass: \"bg-success bg-opacity-10\",\r\n  },\r\n  error: {\r\n    icon: \"bi bi-exclamation-circle-fill text-danger\",\r\n    headerClass: \"bg-danger bg-opacity-10\",\r\n  },\r\n  warning: {\r\n    icon: \"bi bi-exclamation-triangle-fill text-warning\",\r\n    headerClass: \"bg-warning bg-opacity-10\",\r\n  },\r\n  info: {\r\n    icon: \"bi bi-info-circle-fill text-primary\",\r\n    headerClass: \"bg-primary bg-opacity-10\",\r\n  },\r\n  loading: {\r\n    icon: \"spinner-border spinner-border-sm text-white\",\r\n    headerClass: \"bg-danger text-white\",\r\n  },\r\n};\r\n\r\n/**\r\n * Show toast notification\r\n * @param {Object|string} options - Toast configuration object OR message string (for backward compatibility)\r\n * @param {string} options.title - Toast title\r\n * @param {string} options.message - Toast message\r\n * @param {string} [options.type='info'] - Toast type: 'success', 'error', 'warning', 'info'\r\n * @param {number} [options.duration=5000] - Auto-hide duration in milliseconds (0 = no auto-hide)\r\n * @param {Function} [options.onClose] - Callback when toast is closed\r\n * @param {string} [typeParam] - Type parameter (for backward compatibility when first param is string)\r\n * @returns {void}\r\n */\r\nconst showToast = (options, typeParam) => {\r\n  // Backward compatibility: if first parameter is string, convert to object format\r\n  let config;\r\n\r\n  if (typeof options === \"string\") {\r\n    // Old style: showToast(message, type)\r\n    config = {\r\n      title: DEFAULT_TITLE,\r\n      message: options,\r\n      type: typeParam || DEFAULT_TYPE,\r\n      duration: DEFAULT_DURATION,\r\n    };\r\n  } else if (typeof options === \"object\" && options !== null) {\r\n    // New style: showToast({ title, message, type, ... })\r\n    config = {\r\n      title: options.title || DEFAULT_TITLE,\r\n      message: options.message || \"\",\r\n      type: options.type || DEFAULT_TYPE,\r\n      duration:\r\n        options.duration !== undefined ? options.duration : DEFAULT_DURATION,\r\n      onClose: options.onClose,\r\n    };\r\n  } else {\r\n    console.error(\"[ToastNotification] Invalid options parameter\");\r\n    return;\r\n  }\r\n\r\n  const { title, message, type, duration, onClose } = config;\r\n\r\n  // Generate unique ID for this toast\r\n  const toastId = `${TOAST_ID_PREFIX}-${Date.now()}-${Math.random()\r\n    .toString(36)\r\n    .substr(RANDOM_ID_START, RANDOM_ID_LENGTH)}`;\r\n\r\n  // Get toast container\r\n  const container = document.getElementById(TOAST_CONTAINER_ID);\r\n  if (!container) {\r\n    console.error(\"[ToastNotification] Toast container not found\");\r\n    return;\r\n  }\r\n\r\n  // Determine icon and color based on type\r\n  const toastConfig = getToastConfig(type);\r\n\r\n  // Create toast HTML\r\n  const toastHTML = `\r\n    <div id=\"${toastId}\" class=\"${TOAST_CLASS}\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\">\r\n      <div class=\"${TOAST_HEADER_CLASS} ${toastConfig.headerClass}\">\r\n        <i class=\"${toastConfig.icon} me-2\"></i>\r\n        <strong class=\"me-auto\">${title}</strong>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\r\n      </div>\r\n      ${message ? `<div class=\"${TOAST_BODY_CLASS}\">${message}</div>` : \"\"}\r\n    </div>\r\n  `;\r\n\r\n  // Insert toast into container\r\n  container.insertAdjacentHTML(\"beforeend\", toastHTML);\r\n\r\n  // Get toast element\r\n  const toastElement = document.getElementById(toastId);\r\n  if (!toastElement) {\r\n    console.error(\"[ToastNotification] Failed to create toast element\");\r\n    return;\r\n  }\r\n\r\n  // Initialize Bootstrap toast\r\n  const toastInstance = new bootstrap.Toast(toastElement, {\r\n    autohide: duration > 0,\r\n    delay: duration,\r\n  });\r\n\r\n  // Add event listener for when toast is hidden\r\n  toastElement.addEventListener(\"hidden.bs.toast\", () => {\r\n    // Remove toast element from DOM\r\n    toastElement.remove();\r\n\r\n    // Call onClose callback if provided\r\n    if (typeof onClose === \"function\") {\r\n      onClose();\r\n    }\r\n  });\r\n\r\n  // Show toast\r\n  toastInstance.show();\r\n};\r\n\r\n/**\r\n * Get toast configuration based on type\r\n * @param {string} type - Toast type\r\n * @returns {Object} Toast configuration\r\n */\r\nconst getToastConfig = (type) => {\r\n  return TOAST_CONFIGS[type] || TOAST_CONFIGS.info;\r\n};\r\n\r\n/**\r\n * Show success toast (shorthand)\r\n * @param {string} title - Toast title\r\n * @param {string} message - Toast message\r\n * @param {number} [duration=5000] - Auto-hide duration\r\n */\r\nconst showSuccessToast = (title, message, duration = DEFAULT_DURATION) => {\r\n  showToast({ title, message, type: \"success\", duration });\r\n};\r\n\r\n/**\r\n * Show error toast (shorthand)\r\n * @param {string} title - Toast title\r\n * @param {string} message - Toast message\r\n * @param {number} [duration=7000] - Auto-hide duration\r\n */\r\nconst showErrorToast = (title, message, duration = ERROR_DURATION) => {\r\n  showToast({ title, message, type: \"error\", duration });\r\n};\r\n\r\n/**\r\n * Show warning toast (shorthand)\r\n * @param {string} title - Toast title\r\n * @param {string} message - Toast message\r\n * @param {number} [duration=6000] - Auto-hide duration\r\n */\r\nconst showWarningToast = (title, message, duration = WARNING_DURATION) => {\r\n  showToast({ title, message, type: \"warning\", duration });\r\n};\r\n\r\n/**\r\n * Show info toast (shorthand)\r\n * @param {string} title - Toast title\r\n * @param {string} message - Toast message\r\n * @param {number} [duration=5000] - Auto-hide duration\r\n */\r\nconst showInfoToast = (title, message, duration = DEFAULT_DURATION) => {\r\n  showToast({ title, message, type: \"info\", duration });\r\n};\r\n\r\nexport {\r\n  showToast,\r\n  showSuccessToast,\r\n  showErrorToast,\r\n  showWarningToast,\r\n  showInfoToast,\r\n};\r\n","/**\r\n * @file LoadingSpinner.js\r\n * @description Loading Spinner Component for async operations\r\n * @version 1.1\r\n * @date 2025-12-12\r\n * @changelog\r\n * - v1.1: Extracted magic strings to constants (Clean Code compliance)\r\n * - v1.0: Initial release\r\n */\r\n\r\n// ===== CONSTANTS =====\r\nconst SPINNER_OVERLAY_ID = \"loading-spinner-overlay\";\r\nconst SPINNER_SIZE_SM = \"spinner-border-sm\";\r\nconst INLINE_SPINNER_CLASS = \"inline-spinner\";\r\nconst DATA_ATTR_ORIGINAL_CONTENT = \"originalContent\";\r\nconst DATA_ATTR_ORIGINAL_DISABLED = \"originalDisabled\";\r\n\r\n/**\r\n * Show loading spinner overlay\r\n * @param {string} message - Optional loading message\r\n */\r\nexport function showLoadingSpinner(message = \"Memproses...\") {\r\n  // Remove existing spinner if any\r\n  hideLoadingSpinner();\r\n\r\n  const spinnerHTML = `\r\n    <div id=\"${SPINNER_OVERLAY_ID}\" class=\"loading-spinner-overlay\">\r\n      <div class=\"loading-spinner-content\">\r\n        <div class=\"spinner-border text-primary\" role=\"status\" style=\"width: 3rem; height: 3rem;\">\r\n          <span class=\"visually-hidden\">Loading...</span>\r\n        </div>\r\n        <p class=\"mt-3 mb-0 fw-medium\">${message}</p>\r\n      </div>\r\n    </div>\r\n  `;\r\n\r\n  document.body.insertAdjacentHTML(\"beforeend\", spinnerHTML);\r\n}\r\n\r\n/**\r\n * Hide loading spinner overlay\r\n */\r\nexport function hideLoadingSpinner() {\r\n  const spinner = document.getElementById(SPINNER_OVERLAY_ID);\r\n  if (spinner) {\r\n    spinner.remove();\r\n  }\r\n}\r\n\r\n/**\r\n * Show inline loading spinner in a specific element\r\n * @param {HTMLElement} element - Target element\r\n * @param {string} size - Size: 'sm', 'md', 'lg' (default: 'md')\r\n */\r\nexport function showInlineSpinner(element, size = \"md\") {\r\n  if (!element) return;\r\n\r\n  const sizeClass = size === \"sm\" ? SPINNER_SIZE_SM : \"\";\r\n  const spinnerHTML = `\r\n    <div class=\"${INLINE_SPINNER_CLASS} text-center py-3\">\r\n      <div class=\"spinner-border text-primary ${sizeClass}\" role=\"status\">\r\n        <span class=\"visually-hidden\">Loading...</span>\r\n      </div>\r\n    </div>\r\n  `;\r\n\r\n  element.innerHTML = spinnerHTML;\r\n}\r\n\r\n/**\r\n * Show button loading state\r\n * @param {HTMLButtonElement} button - Button element\r\n * @param {string} loadingText - Loading text (default: \"Memproses...\")\r\n */\r\nexport function setButtonLoading(button, loadingText = \"Memproses...\") {\r\n  if (!button) return;\r\n\r\n  // Store original content\r\n  button.dataset[DATA_ATTR_ORIGINAL_CONTENT] = button.innerHTML;\r\n  button.dataset[DATA_ATTR_ORIGINAL_DISABLED] = button.disabled;\r\n\r\n  // Set loading state\r\n  button.disabled = true;\r\n  button.innerHTML = `\r\n    <span class=\"spinner-border ${SPINNER_SIZE_SM} me-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n    ${loadingText}\r\n  `;\r\n}\r\n\r\n/**\r\n * Reset button to normal state\r\n * @param {HTMLButtonElement} button - Button element\r\n */\r\nexport function resetButtonLoading(button) {\r\n  if (!button) return;\r\n\r\n  // Restore original content\r\n  if (button.dataset[DATA_ATTR_ORIGINAL_CONTENT]) {\r\n    button.innerHTML = button.dataset[DATA_ATTR_ORIGINAL_CONTENT];\r\n    delete button.dataset[DATA_ATTR_ORIGINAL_CONTENT];\r\n  }\r\n\r\n  // Restore disabled state\r\n  if (button.dataset[DATA_ATTR_ORIGINAL_DISABLED] !== undefined) {\r\n    button.disabled = button.dataset[DATA_ATTR_ORIGINAL_DISABLED] === \"true\";\r\n    delete button.dataset[DATA_ATTR_ORIGINAL_DISABLED];\r\n  } else {\r\n    button.disabled = false;\r\n  }\r\n}\r\n","/**\r\n * Enum Values for Select Options\r\n * Sesuai dengan spec-data-localstorage-schema.md Section 5\r\n */\r\n\r\n/**\r\n * Jenis Kelamin Options\r\n * @readonly\r\n * @enum {string}\r\n */\r\nexport const JenisKelamin = {\r\n  LAKI_LAKI: \"Laki-laki\",\r\n  PEREMPUAN: \"Perempuan\",\r\n};\r\n\r\n/**\r\n * Status Pernikahan Options\r\n * @readonly\r\n * @enum {string}\r\n */\r\nexport const StatusPernikahan = {\r\n  LAJANG: \"Lajang\",\r\n  DUDA: \"Duda\",\r\n  JANDA: \"Janda\",\r\n};\r\n\r\n/**\r\n * Pernah Khitbah Options\r\n * @readonly\r\n * @enum {string}\r\n */\r\nexport const PernahKhitbah = {\r\n  YA: \"Ya\",\r\n  TIDAK: \"Tidak\",\r\n};\r\n\r\n/**\r\n * Penghasilan Bulanan Options\r\n * @readonly\r\n * @enum {string}\r\n */\r\nexport const PenghasilanBulanan = {\r\n  DI_BAWAH_3_JUTA: \"Di bawah 3 juta\",\r\n  TIGA_SAMPAI_LIMA_JUTA: \"3 - 5 juta\",\r\n  LIMA_SAMPAI_SEPULUH_JUTA: \"5 - 10 juta\",\r\n  SEPULUH_SAMPAI_DUA_PULUH_JUTA: \"10 - 20 juta\",\r\n  DI_ATAS_DUA_PULUH_JUTA: \"Di atas 20 juta\",\r\n  TIDAK_TETAP: \"Tidak tetap\",\r\n};\r\n\r\n/**\r\n * Status Rumah Options\r\n * @readonly\r\n * @enum {string}\r\n */\r\nexport const StatusRumah = {\r\n  MILIK_SENDIRI: \"Milik Sendiri\",\r\n  KONTRAK_SEWA: \"Kontrak/Sewa\",\r\n  TINGGAL_DENGAN_ORANG_TUA: \"Tinggal dengan Orang Tua\",\r\n  LAINNYA: \"Lainnya\",\r\n};\r\n\r\n/**\r\n * Status Izin Menikah Options\r\n * @readonly\r\n * @enum {string}\r\n */\r\nexport const StatusIzin = {\r\n  SUDAH: \"Sudah\",\r\n  BELUM: \"Belum\",\r\n  PROSES: \"Proses\",\r\n};\r\n\r\n/**\r\n * Kebiasaan Merokok Options\r\n * @readonly\r\n * @enum {string}\r\n */\r\nexport const Merokok = {\r\n  YA: \"Ya\",\r\n  TIDAK: \"Tidak\",\r\n  PERNAH_SUDAH_BERHENTI: \"Pernah (sudah berhenti)\",\r\n};\r\n\r\n/**\r\n * Status Hijab (Akhwat) Options\r\n * @readonly\r\n * @enum {string}\r\n */\r\nexport const StatusHijab = {\r\n  SYARI: \"Syar'i\",\r\n  NON_SYARI: \"Non-Syar'i\",\r\n  BERCADAR: \"Bercadar\",\r\n};\r\n\r\n/**\r\n * Status Jenggot (Ikhwan) Options\r\n * @readonly\r\n * @enum {string}\r\n */\r\nexport const StatusJenggot = {\r\n  YA: \"Ya\",\r\n  TIDAK: \"Tidak\",\r\n};\r\n\r\n/**\r\n * Kesediaan Poligami (Ikhwan) Options\r\n * @readonly\r\n * @enum {string}\r\n */\r\nexport const KesediaanPoligami = {\r\n  BERSEDIA: \"Bersedia\",\r\n  TIDAK_BERSEDIA: \"Tidak Bersedia\",\r\n  KONDISIONAL: \"Kondisional\",\r\n};\r\n\r\n/**\r\n * Kesediaan Dipoligami (Akhwat) Options\r\n * @readonly\r\n * @enum {string}\r\n */\r\nexport const KesediaanDipoligami = {\r\n  BERSEDIA: \"Bersedia\",\r\n  TIDAK_BERSEDIA: \"Tidak Bersedia\",\r\n  KONDISIONAL: \"Kondisional\",\r\n};\r\n\r\n/**\r\n * Pandangan Nafkah (Istri Bekerja) Options\r\n * @readonly\r\n * @enum {string}\r\n */\r\nexport const PandanganNafkah = {\r\n  IRT_PENUH: \"IRT Penuh\",\r\n  BOLEH_BEKERJA: \"Boleh Bekerja\",\r\n  KONDISIONAL: \"Kondisional\",\r\n};\r\n\r\n/**\r\n * Kesediaan Pindah Domisili Options\r\n * @readonly\r\n * @enum {string}\r\n */\r\nexport const KesediaanPindah = {\r\n  YA: \"Ya\",\r\n  TIDAK: \"Tidak\",\r\n  BISA_DIDISKUSIKAN: \"Bisa Didiskusikan\",\r\n};\r\n\r\n/**\r\n * Get all enum values as an array\r\n * @param {Object} enumObject - The enum object\r\n * @returns {Array<string>} Array of enum values\r\n */\r\nexport function getEnumValues(enumObject) {\r\n  return Object.values(enumObject);\r\n}\r\n\r\n/**\r\n * SessionStorage Keys\r\n * Sesuai dengan architectural pattern untuk central key management\r\n * @readonly\r\n * @enum {string}\r\n */\r\nexport const STORAGE_KEYS = {\r\n  // Temporary form data (in preview/result flow)\r\n  TEMP_DATA: \"taaruf_cv_temp_data\",\r\n  // Draft loading indicator\r\n  DRAFT_TO_LOAD: \"taaruf_cv_draft_to_load\",\r\n  // Generated CV text output\r\n  GENERATED_TEXT: \"taaruf_cv_generated_text\",\r\n  // Source data for history saving\r\n  SOURCE_DATA: \"taaruf_cv_source_data\",\r\n};\r\n\r\n/**\r\n * Check if a value is valid for a given enum\r\n * @param {Object} enumObject - The enum object\r\n * @param {string} value - The value to check\r\n * @returns {boolean} True if valid\r\n */\r\nexport function isValidEnumValue(enumObject, value) {\r\n  return Object.values(enumObject).includes(value);\r\n}\r\n","/**\r\n * @file formView.js\r\n * @description Form Page View - CV Input Form with Validation\r\n * @version 2.4\r\n * @date 2025-12-11\r\n * @changelog\r\n * - v2.4 (2025-12-11): Fixed priority logic for draft vs preview data (BUG-FIX-002)\r\n * - v2.3 (2025-12-11): Fixed form data restoration from Preview page (BUG-FIX-001)\r\n * - v2.2 (2025-01-27): Integrated real-time validation on blur (AC-VAL-001, AC-VAL-002)\r\n */\r\n\r\nimport {\r\n  validateField,\r\n  clearFieldError,\r\n  validateForm,\r\n  initializeRealTimeValidation,\r\n} from \"../services/validationService.js\";\r\nimport { saveDraft } from \"../services/localStorageService.js\";\r\nimport { showToast } from \"../components/ToastNotification.js\";\r\nimport { navigateTo } from \"../router/router.js\";\r\nimport {\r\n  setButtonLoading,\r\n  resetButtonLoading,\r\n} from \"../components/LoadingSpinner.js\";\r\nimport { STORAGE_KEYS } from \"../types/enums.js\";\r\n\r\n/**\r\n * Render Form Page content (skeleton structure)\r\n * Note: Full 49 fields will be implemented in Phase 3\r\n */\r\nfunction renderFormView() {\r\n  const container = document.getElementById(\"view-form\");\r\n\r\n  container.innerHTML = `\r\n    <!-- Form Header -->\r\n    <div class=\"mb-4\">\r\n      <h2>\r\n        <i class=\"bi bi-pencil-square\"></i> Formulir CV Ta'aruf\r\n      </h2>\r\n      <p class=\"text-muted\">\r\n        Isi formulir dengan lengkap dan jujur. Kolom bertanda \r\n        <span class=\"text-danger fw-bold\">*</span> wajib diisi.\r\n      </p>\r\n    </div>\r\n\r\n    <!-- Form Container -->\r\n    <form id=\"cv-form\" novalidate>\r\n      \r\n      <!-- Section 1: Data Pribadi -->\r\n      <div class=\"form-section-header\">\r\n        <h3><i class=\"bi bi-person\"></i> 1. Data Pribadi</h3>\r\n      </div>\r\n      <div class=\"card mb-4\">\r\n        <div class=\"card-body\">\r\n          <div class=\"row g-3\">\r\n            <!-- Nama Lengkap (Wajib) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"namaLengkap\" class=\"form-label\">\r\n                Nama Lengkap <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                id=\"namaLengkap\"\r\n                name=\"namaLengkap\"\r\n                required\r\n                minlength=\"3\"\r\n                placeholder=\"Contoh: Ahmad Fauzi bin Abdullah\"\r\n              />\r\n              <div class=\"invalid-feedback\">Kolom ini wajib diisi (minimal 3 karakter).</div>\r\n            </div>\r\n\r\n            <!-- Nama Panggilan (Opsional) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"namaPanggilan\" class=\"form-label\">\r\n                Nama Panggilan\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                id=\"namaPanggilan\"\r\n                name=\"namaPanggilan\"\r\n                placeholder=\"Contoh: Ahmad\"\r\n              />\r\n            </div>\r\n\r\n            <!-- Tempat Lahir (Wajib) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"tempatLahir\" class=\"form-label\">\r\n                Tempat Lahir <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                id=\"tempatLahir\"\r\n                name=\"tempatLahir\"\r\n                required\r\n                placeholder=\"Contoh: Jakarta\"\r\n              />\r\n              <div class=\"invalid-feedback\">Kolom ini wajib diisi.</div>\r\n            </div>\r\n\r\n            <!-- Tanggal Lahir (Wajib) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"tanggalLahir\" class=\"form-label\">\r\n                Tanggal Lahir <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <input\r\n                type=\"date\"\r\n                class=\"form-control\"\r\n                id=\"tanggalLahir\"\r\n                name=\"tanggalLahir\"\r\n                required\r\n                max=\"\"\r\n              />\r\n              <div class=\"invalid-feedback\">Kolom ini wajib diisi.</div>\r\n            </div>\r\n\r\n            <!-- Jenis Kelamin (Wajib) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"jenisKelamin\" class=\"form-label\">\r\n                Jenis Kelamin <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <select\r\n                class=\"form-select\"\r\n                id=\"jenisKelamin\"\r\n                name=\"jenisKelamin\"\r\n                required\r\n              >\r\n                <option value=\"\">-- Pilih --</option>\r\n                <option value=\"Laki-laki\">Laki-laki</option>\r\n                <option value=\"Perempuan\">Perempuan</option>\r\n              </select>\r\n              <div class=\"invalid-feedback\">Kolom ini wajib diisi.</div>\r\n            </div>\r\n\r\n            <!-- Tinggi Badan (Wajib) -->\r\n            <div class=\"col-md-3\">\r\n              <label for=\"tinggiBadan\" class=\"form-label\">\r\n                Tinggi Badan (cm) <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                class=\"form-control\"\r\n                id=\"tinggiBadan\"\r\n                name=\"tinggiBadan\"\r\n                required\r\n                min=\"100\"\r\n                max=\"250\"\r\n                placeholder=\"170\"\r\n              />\r\n              <div class=\"invalid-feedback\">Nilai 100-250 cm.</div>\r\n            </div>\r\n\r\n            <!-- Berat Badan (Wajib) -->\r\n            <div class=\"col-md-3\">\r\n              <label for=\"beratBadan\" class=\"form-label\">\r\n                Berat Badan (kg) <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                class=\"form-control\"\r\n                id=\"beratBadan\"\r\n                name=\"beratBadan\"\r\n                required\r\n                min=\"30\"\r\n                max=\"200\"\r\n                placeholder=\"65\"\r\n              />\r\n              <div class=\"invalid-feedback\">Nilai 30-200 kg.</div>\r\n            </div>\r\n\r\n            <!-- Warna Kulit (Opsional) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"warnaKulit\" class=\"form-label\">\r\n                Warna Kulit\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                id=\"warnaKulit\"\r\n                name=\"warnaKulit\"\r\n                placeholder=\"Contoh: Sawo matang\"\r\n              />\r\n            </div>\r\n\r\n            <!-- Pekerjaan (Wajib) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"pekerjaan\" class=\"form-label\">\r\n                Pekerjaan Saat Ini <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                id=\"pekerjaan\"\r\n                name=\"pekerjaan\"\r\n                required\r\n                placeholder=\"Contoh: Software Engineer di PT ABC\"\r\n              />\r\n              <div class=\"invalid-feedback\">Kolom ini wajib diisi.</div>\r\n            </div>\r\n\r\n            <!-- Status Pernikahan (Wajib) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"statusPernikahan\" class=\"form-label\">\r\n                Status Pernikahan <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <select\r\n                class=\"form-select\"\r\n                id=\"statusPernikahan\"\r\n                name=\"statusPernikahan\"\r\n                required\r\n              >\r\n                <option value=\"\">-- Pilih --</option>\r\n                <option value=\"Lajang\">Lajang</option>\r\n                <option value=\"Duda\">Duda</option>\r\n                <option value=\"Janda\">Janda</option>\r\n              </select>\r\n              <div class=\"invalid-feedback\">Kolom ini wajib diisi.</div>\r\n            </div>\r\n\r\n            <!-- Jumlah Anak (Kondisional) -->\r\n            <div class=\"col-md-6 conditional-field d-none\" id=\"wrapper-jumlahAnak\">\r\n              <label for=\"jumlahAnak\" class=\"form-label\">\r\n                Jumlah Anak <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                class=\"form-control\"\r\n                id=\"jumlahAnak\"\r\n                name=\"jumlahAnak\"\r\n                min=\"0\"\r\n                max=\"20\"\r\n                placeholder=\"0\"\r\n              />\r\n              <div class=\"invalid-feedback\">Nilai 0-20.</div>\r\n            </div>\r\n\r\n            <!-- Pernah Khitbah (Opsional) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"pernahKhitbah\" class=\"form-label\">\r\n                Pernah Khitbah\r\n              </label>\r\n              <select\r\n                class=\"form-select\"\r\n                id=\"pernahKhitbah\"\r\n                name=\"pernahKhitbah\"\r\n              >\r\n                <option value=\"\">-- Pilih --</option>\r\n                <option value=\"Ya\">Ya</option>\r\n                <option value=\"Tidak\">Tidak</option>\r\n              </select>\r\n            </div>\r\n\r\n            <!-- Suku Bangsa (Opsional) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"suku\" class=\"form-label\">\r\n                Suku Bangsa\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                id=\"suku\"\r\n                name=\"suku\"\r\n                placeholder=\"Contoh: Jawa\"\r\n              />\r\n            </div>\r\n\r\n            <!-- Domisili (Wajib) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"domisili\" class=\"form-label\">\r\n                Domisili Saat Ini <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                id=\"domisili\"\r\n                name=\"domisili\"\r\n                required\r\n                placeholder=\"Contoh: Jakarta Selatan\"\r\n              />\r\n              <div class=\"invalid-feedback\">Kolom ini wajib diisi.</div>\r\n            </div>\r\n\r\n            <!-- Kota Asal (Opsional) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"asalDaerah\" class=\"form-label\">\r\n                Kota Asal\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                id=\"asalDaerah\"\r\n                name=\"asalDaerah\"\r\n                placeholder=\"Contoh: Bandung\"\r\n              />\r\n            </div>\r\n\r\n            <!-- Pengalaman Kerja (Opsional) -->\r\n            <div class=\"col-12\">\r\n              <label for=\"pengalamanKerja\" class=\"form-label\">\r\n                Pengalaman Kerja\r\n              </label>\r\n              <textarea\r\n                class=\"form-control\"\r\n                id=\"pengalamanKerja\"\r\n                name=\"pengalamanKerja\"\r\n                rows=\"3\"\r\n                placeholder=\"Contoh: Software Engineer di PT XYZ (2020-2023), Junior Developer di CV ABC (2018-2020)\"\r\n              ></textarea>\r\n            </div>\r\n\r\n            <!-- Penghasilan Bulanan (Opsional) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"penghasilanBulanan\" class=\"form-label\">\r\n                Penghasilan Bulanan\r\n              </label>\r\n              <select\r\n                class=\"form-select\"\r\n                id=\"penghasilanBulanan\"\r\n                name=\"penghasilanBulanan\"\r\n              >\r\n                <option value=\"\">-- Pilih --</option>\r\n                <option value=\"Di bawah 3 juta\">Di bawah 3 juta</option>\r\n                <option value=\"3 - 5 juta\">3 - 5 juta</option>\r\n                <option value=\"5 - 10 juta\">5 - 10 juta</option>\r\n                <option value=\"10 - 20 juta\">10 - 20 juta</option>\r\n                <option value=\"Di atas 20 juta\">Di atas 20 juta</option>\r\n                <option value=\"Tidak tetap\">Tidak tetap</option>\r\n              </select>\r\n            </div>\r\n\r\n            <!-- Status Tempat Tinggal (Opsional) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"statusRumah\" class=\"form-label\">\r\n                Status Tempat Tinggal\r\n              </label>\r\n              <select\r\n                class=\"form-select\"\r\n                id=\"statusRumah\"\r\n                name=\"statusRumah\"\r\n              >\r\n                <option value=\"\">-- Pilih --</option>\r\n                <option value=\"Milik Sendiri\">Milik Sendiri</option>\r\n                <option value=\"Kontrak/Sewa\">Kontrak/Sewa</option>\r\n                <option value=\"Tinggal dengan Orang Tua\">Tinggal dengan Orang Tua</option>\r\n                <option value=\"Lainnya\">Lainnya</option>\r\n              </select>\r\n            </div>\r\n\r\n            <!-- Status Izin Menikah (Wajib) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"statusIzin\" class=\"form-label\">\r\n                Status Izin Menikah <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <select\r\n                class=\"form-select\"\r\n                id=\"statusIzin\"\r\n                name=\"statusIzin\"\r\n                required\r\n              >\r\n                <option value=\"\">-- Pilih --</option>\r\n                <option value=\"Sudah\">Sudah</option>\r\n                <option value=\"Belum\">Belum</option>\r\n                <option value=\"Proses\">Proses</option>\r\n              </select>\r\n              <div class=\"invalid-feedback\">Kolom ini wajib diisi.</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Section 2: Riwayat Pendidikan -->\r\n      <div class=\"form-section-header\">\r\n        <h3><i class=\"bi bi-mortarboard\"></i> 2. Riwayat Pendidikan</h3>\r\n      </div>\r\n      <div class=\"card mb-4\">\r\n        <div class=\"card-body\">\r\n          <div class=\"row g-3\">\r\n            <!-- Pendidikan Terakhir (Wajib) -->\r\n            <div class=\"col-12\">\r\n              <label for=\"pendidikanTerakhir\" class=\"form-label\">\r\n                Pendidikan Terakhir <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <textarea\r\n                class=\"form-control\"\r\n                id=\"pendidikanTerakhir\"\r\n                name=\"pendidikanTerakhir\"\r\n                rows=\"3\"\r\n                required\r\n                minlength=\"10\"\r\n                placeholder=\"Contoh: S1 Teknik Informatika, Universitas Indonesia (2015-2019), IPK 3.75\"\r\n              ></textarea>\r\n              <div class=\"invalid-feedback\">Kolom ini wajib diisi (minimal 10 karakter).</div>\r\n            </div>\r\n\r\n            <!-- Pendidikan Non-Formal (Opsional) -->\r\n            <div class=\"col-12\">\r\n              <label for=\"pendidikanNonFormal\" class=\"form-label\">\r\n                Pendidikan Non-Formal\r\n              </label>\r\n              <textarea\r\n                class=\"form-control\"\r\n                id=\"pendidikanNonFormal\"\r\n                name=\"pendidikanNonFormal\"\r\n                rows=\"3\"\r\n                placeholder=\"Contoh: Kursus Full-Stack Development di Dicoding (2020), Sertifikat AWS Cloud Practitioner (2021)\"\r\n              ></textarea>\r\n            </div>\r\n\r\n            <!-- Prestasi / Keahlian (Opsional) -->\r\n            <div class=\"col-12\">\r\n              <label for=\"prestasi\" class=\"form-label\">\r\n                Prestasi / Keahlian\r\n              </label>\r\n              <textarea\r\n                class=\"form-control\"\r\n                id=\"prestasi\"\r\n                name=\"prestasi\"\r\n                rows=\"3\"\r\n                placeholder=\"Contoh: Juara 2 Lomba Karya Tulis Ilmiah Nasional, Mahir JavaScript & Python, Bisa berbahasa Inggris (TOEFL 550)\"\r\n              ></textarea>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Section 3: Informasi Keluarga -->\r\n      <div class=\"form-section-header\">\r\n        <h3><i class=\"bi bi-people\"></i> 3. Informasi Keluarga</h3>\r\n      </div>\r\n      <div class=\"card mb-4\">\r\n        <div class=\"card-body\">\r\n          <div class=\"row g-3\">\r\n            <!-- Data Ayah (Wajib) -->\r\n            <div class=\"col-12\">\r\n              <label for=\"infoAyah\" class=\"form-label\">\r\n                Data Ayah <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <textarea\r\n                class=\"form-control\"\r\n                id=\"infoAyah\"\r\n                name=\"infoAyah\"\r\n                rows=\"3\"\r\n                required\r\n                minlength=\"10\"\r\n                placeholder=\"Contoh: Bapak Ahmad bin Abdullah, Pegawai Swasta, Lahir di Bandung 1960\"\r\n              ></textarea>\r\n              <div class=\"invalid-feedback\">Kolom ini wajib diisi (minimal 10 karakter).</div>\r\n            </div>\r\n\r\n            <!-- Data Ibu (Wajib) -->\r\n            <div class=\"col-12\">\r\n              <label for=\"infoIbu\" class=\"form-label\">\r\n                Data Ibu <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <textarea\r\n                class=\"form-control\"\r\n                id=\"infoIbu\"\r\n                name=\"infoIbu\"\r\n                rows=\"3\"\r\n                required\r\n                minlength=\"10\"\r\n                placeholder=\"Contoh: Ibu Fatimah binti Ahmad, Ibu Rumah Tangga, Lahir di Jakarta 1965\"\r\n              ></textarea>\r\n              <div class=\"invalid-feedback\">Kolom ini wajib diisi (minimal 10 karakter).</div>\r\n            </div>\r\n\r\n            <!-- Urutan Anak (Wajib) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"urutanAnak\" class=\"form-label\">\r\n                Urutan Anak <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                id=\"urutanAnak\"\r\n                name=\"urutanAnak\"\r\n                required\r\n                pattern=\"\\\\d+\\\\s+dari\\\\s+\\\\d+\"\r\n                placeholder=\"Contoh: 1 dari 3\"\r\n              />\r\n              <div class=\"invalid-feedback\">Format: \"X dari Y\" (contoh: 1 dari 3).</div>\r\n            </div>\r\n\r\n            <!-- Data Saudara (Opsional) -->\r\n            <div class=\"col-12\">\r\n              <label for=\"infoSaudara\" class=\"form-label\">\r\n                Data Saudara\r\n              </label>\r\n              <textarea\r\n                class=\"form-control\"\r\n                id=\"infoSaudara\"\r\n                name=\"infoSaudara\"\r\n                rows=\"3\"\r\n                placeholder=\"Contoh: Kakak pertama (L) - Mahasiswa S2, Adik kedua (P) - SMA kelas 2\"\r\n              ></textarea>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Section 4: Ibadah & Agama -->\r\n      <div class=\"form-section-header\">\r\n        <h3><i class=\"bi bi-moon-stars\"></i> 4. Ibadah & Pemahaman Agama</h3>\r\n      </div>\r\n      <div class=\"card mb-4\">\r\n        <div class=\"card-body\">\r\n          <div class=\"row g-3\">\r\n            <!-- Status Muallaf (Opsional) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"statusMuallaf\" class=\"form-label\">\r\n                Status Muallaf\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                id=\"statusMuallaf\"\r\n                name=\"statusMuallaf\"\r\n                placeholder=\"Contoh: Muallaf sejak 2015\"\r\n              />\r\n            </div>\r\n\r\n            <!-- Shalat Wajib (Wajib) -->\r\n            <div class=\"col-12\">\r\n              <label for=\"shalatWajib\" class=\"form-label\">\r\n                Pelaksanaan Shalat Wajib <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <textarea\r\n                class=\"form-control\"\r\n                id=\"shalatWajib\"\r\n                name=\"shalatWajib\"\r\n                rows=\"2\"\r\n                required\r\n                placeholder=\"Contoh: Alhamdulillah 5 waktu tepat waktu, di masjid untuk shalat Jumat\"\r\n              ></textarea>\r\n              <div class=\"invalid-feedback\">Kolom ini wajib diisi.</div>\r\n            </div>\r\n\r\n            <!-- Ibadah Sunnah (Opsional) -->\r\n            <div class=\"col-12\">\r\n              <label for=\"ibadahSunnah\" class=\"form-label\">\r\n                Kebiasaan Ibadah Sunnah\r\n              </label>\r\n              <textarea\r\n                class=\"form-control\"\r\n                id=\"ibadahSunnah\"\r\n                name=\"ibadahSunnah\"\r\n                rows=\"2\"\r\n                placeholder=\"Contoh: Puasa Senin-Kamis, Shalat Tahajud, Qiyamullail\"\r\n              ></textarea>\r\n            </div>\r\n\r\n            <!-- Bacaan Al-Qur'an (Wajib) -->\r\n            <div class=\"col-12\">\r\n              <label for=\"bacaanQuran\" class=\"form-label\">\r\n                Kemampuan Baca Al-Qur'an <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <textarea\r\n                class=\"form-control\"\r\n                id=\"bacaanQuran\"\r\n                name=\"bacaanQuran\"\r\n                rows=\"2\"\r\n                required\r\n                placeholder=\"Contoh: Alhamdulillah bisa membaca dengan tartil, sedang mempelajari tajwid\"\r\n              ></textarea>\r\n              <div class=\"invalid-feedback\">Kolom ini wajib diisi.</div>\r\n            </div>\r\n\r\n            <!-- Kajian Favorit (Opsional) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"kajianFavorit\" class=\"form-label\">\r\n                Kajian / Ustadz Favorit\r\n              </label>\r\n              <textarea\r\n                class=\"form-control\"\r\n                id=\"kajianFavorit\"\r\n                name=\"kajianFavorit\"\r\n                rows=\"2\"\r\n                placeholder=\"Contoh: Ustadz Adi Hidayat, Kajian Fiqih Keluarga\"\r\n              ></textarea>\r\n            </div>\r\n\r\n            <!-- Afiliasi Organisasi (Opsional) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"afiliasiOrganisasi\" class=\"form-label\">\r\n                Organisasi Islam\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                id=\"afiliasiOrganisasi\"\r\n                name=\"afiliasiOrganisasi\"\r\n                placeholder=\"Contoh: Pemuda Masjid Al-Ikhlas, Relawan Dakwah\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Section 5: Profil Diri & Kebiasaan -->\r\n      <div class=\"form-section-header\">\r\n        <h3><i class=\"bi bi-card-text\"></i> 5. Profil Diri & Kebiasaan</h3>\r\n      </div>\r\n      <div class=\"card mb-4\">\r\n        <div class=\"card-body\">\r\n          <div class=\"row g-3\">\r\n            <!-- Hobi (Opsional) -->\r\n            <div class=\"col-12\">\r\n              <label for=\"hobi\" class=\"form-label\">\r\n                Hobi / Kegemaran\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                id=\"hobi\"\r\n                name=\"hobi\"\r\n                placeholder=\"Contoh: Membaca, Olahraga, Traveling, Menulis\"\r\n              />\r\n            </div>\r\n\r\n            <!-- Sifat Positif (Wajib) -->\r\n            <div class=\"col-12\">\r\n              <label for=\"sifatPositif\" class=\"form-label\">\r\n                Sifat Positif <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <textarea\r\n                class=\"form-control\"\r\n                id=\"sifatPositif\"\r\n                name=\"sifatPositif\"\r\n                rows=\"2\"\r\n                required\r\n                placeholder=\"Contoh: Disiplin, bertanggung jawab, mudah bergaul, suka menolong\"\r\n              ></textarea>\r\n              <div class=\"invalid-feedback\">Kolom ini wajib diisi.</div>\r\n            </div>\r\n\r\n            <!-- Sifat Negatif (Wajib) -->\r\n            <div class=\"col-12\">\r\n              <label for=\"sifatNegatif\" class=\"form-label\">\r\n                Sifat Negatif <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <textarea\r\n                class=\"form-control\"\r\n                id=\"sifatNegatif\"\r\n                name=\"sifatNegatif\"\r\n                rows=\"2\"\r\n                required\r\n                placeholder=\"Contoh: Kadang terlalu perfeksionis, susah tidur jika ada masalah\"\r\n              ></textarea>\r\n              <div class=\"invalid-feedback\">Kolom ini wajib diisi.</div>\r\n            </div>\r\n\r\n            <!-- Riwayat Penyakit (Opsional) -->\r\n            <div class=\"col-12\">\r\n              <label for=\"riwayatPenyakit\" class=\"form-label\">\r\n                Riwayat Penyakit\r\n              </label>\r\n              <textarea\r\n                class=\"form-control\"\r\n                id=\"riwayatPenyakit\"\r\n                name=\"riwayatPenyakit\"\r\n                rows=\"2\"\r\n                placeholder=\"Contoh: Tidak ada, atau Pernah asma saat kecil (sudah sembuh)\"\r\n              ></textarea>\r\n            </div>\r\n\r\n            <!-- Kebiasaan Merokok (Wajib) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"merokok\" class=\"form-label\">\r\n                Kebiasaan Merokok <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <select\r\n                class=\"form-select\"\r\n                id=\"merokok\"\r\n                name=\"merokok\"\r\n                required\r\n              >\r\n                <option value=\"\">-- Pilih --</option>\r\n                <option value=\"Ya\">Ya</option>\r\n                <option value=\"Tidak\">Tidak</option>\r\n                <option value=\"Pernah (sudah berhenti)\">Pernah (sudah berhenti)</option>\r\n              </select>\r\n              <div class=\"invalid-feedback\">Kolom ini wajib diisi.</div>\r\n            </div>\r\n\r\n            <!-- Status Hijab - Kondisional Perempuan -->\r\n            <div class=\"col-md-6 conditional-field d-none\" id=\"wrapper-statusHijab\">\r\n              <label for=\"statusHijab\" class=\"form-label\">\r\n                Status Hijab (Akhwat) <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <select\r\n                class=\"form-select\"\r\n                id=\"statusHijab\"\r\n                name=\"statusHijab\"\r\n              >\r\n                <option value=\"\">-- Pilih --</option>\r\n                <option value=\"Syar'i\">Syar'i</option>\r\n                <option value=\"Non-Syar'i\">Non-Syar'i</option>\r\n                <option value=\"Bercadar\">Bercadar</option>\r\n              </select>\r\n              <div class=\"invalid-feedback\">Kolom ini wajib diisi.</div>\r\n            </div>\r\n\r\n            <!-- Status Jenggot - Kondisional Laki-laki -->\r\n            <div class=\"col-md-6 conditional-field d-none\" id=\"wrapper-statusJenggot\">\r\n              <label for=\"statusJenggot\" class=\"form-label\">\r\n                Status Jenggot (Ikhwan) <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <select\r\n                class=\"form-select\"\r\n                id=\"statusJenggot\"\r\n                name=\"statusJenggot\"\r\n              >\r\n                <option value=\"\">-- Pilih --</option>\r\n                <option value=\"Ya\">Ya</option>\r\n                <option value=\"Tidak\">Tidak</option>\r\n              </select>\r\n              <div class=\"invalid-feedback\">Kolom ini wajib diisi.</div>\r\n            </div>\r\n\r\n            <!-- Visi Misi Hidup (Opsional) -->\r\n            <div class=\"col-12\">\r\n              <label for=\"visiMisiHidup\" class=\"form-label\">\r\n                Visi Misi Hidup\r\n              </label>\r\n              <textarea\r\n                class=\"form-control\"\r\n                id=\"visiMisiHidup\"\r\n                name=\"visiMisiHidup\"\r\n                rows=\"3\"\r\n                placeholder=\"Contoh: Menjadi hamba Allah yang taat, bermanfaat untuk sesama, dan membangun keluarga sakinah\"\r\n              ></textarea>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Section 6: Visi Pernikahan -->\r\n      <div class=\"form-section-header\">\r\n        <h3><i class=\"bi bi-heart\"></i> 6. Visi Pernikahan</h3>\r\n      </div>\r\n      <div class=\"card mb-4\">\r\n        <div class=\"card-body\">\r\n          <div class=\"row g-3\">\r\n            <!-- Visi & Misi Pernikahan (Wajib) -->\r\n            <div class=\"col-12\">\r\n              <label for=\"visiPernikahan\" class=\"form-label\">\r\n                Visi & Misi Pernikahan <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <textarea\r\n                class=\"form-control\"\r\n                id=\"visiPernikahan\"\r\n                name=\"visiPernikahan\"\r\n                rows=\"3\"\r\n                required\r\n                minlength=\"20\"\r\n                placeholder=\"Contoh: Membangun keluarga yang sakinah mawaddah warahmah, saling mengingatkan dalam kebaikan, mendidik anak-anak menjadi generasi Rabbani\"\r\n              ></textarea>\r\n              <div class=\"invalid-feedback\">Kolom ini wajib diisi (minimal 20 karakter).</div>\r\n            </div>\r\n\r\n            <!-- Kriteria Calon Pasangan (Wajib) -->\r\n            <div class=\"col-12\">\r\n              <label for=\"kriteriaPasangan\" class=\"form-label\">\r\n                Kriteria Calon Pasangan <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <textarea\r\n                class=\"form-control\"\r\n                id=\"kriteriaPasangan\"\r\n                name=\"kriteriaPasangan\"\r\n                rows=\"3\"\r\n                required\r\n                minlength=\"20\"\r\n                placeholder=\"Contoh: Beriman dan bertakwa, menjaga ibadah, memiliki akhlak yang baik, bisa menjadi imam/pemimpin keluarga, saling mendukung dalam mencapai tujuan\"\r\n              ></textarea>\r\n              <div class=\"invalid-feedback\">Kolom ini wajib diisi (minimal 20 karakter).</div>\r\n            </div>\r\n\r\n            <!-- Pandangan tentang Mahar (Opsional) -->\r\n            <div class=\"col-12\">\r\n              <label for=\"pandanganMahar\" class=\"form-label\">\r\n                Pandangan tentang Mahar\r\n              </label>\r\n              <textarea\r\n                class=\"form-control\"\r\n                id=\"pandanganMahar\"\r\n                name=\"pandanganMahar\"\r\n                rows=\"2\"\r\n                placeholder=\"Contoh: Mahar sesuai kemampuan, yang penting adalah kesungguhan dan tanggung jawab\"\r\n              ></textarea>\r\n            </div>\r\n\r\n            <!-- Kesediaan Poligami - Kondisional Laki-laki -->\r\n            <div class=\"col-md-6 conditional-field d-none\" id=\"wrapper-kesediaanPoligami\">\r\n              <label for=\"kesediaanPoligami\" class=\"form-label\">\r\n                Pandangan Poligami (Ikhwan) <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <select\r\n                class=\"form-select\"\r\n                id=\"kesediaanPoligami\"\r\n                name=\"kesediaanPoligami\"\r\n              >\r\n                <option value=\"\">-- Pilih --</option>\r\n                <option value=\"Bersedia\">Bersedia</option>\r\n                <option value=\"Tidak Bersedia\">Tidak Bersedia</option>\r\n                <option value=\"Kondisional\">Kondisional</option>\r\n              </select>\r\n              <div class=\"invalid-feedback\">Kolom ini wajib diisi.</div>\r\n            </div>\r\n\r\n            <!-- Kesediaan Dipoligami - Kondisional Perempuan -->\r\n            <div class=\"col-md-6 conditional-field d-none\" id=\"wrapper-kesediaanDipoligami\">\r\n              <label for=\"kesediaanDipoligami\" class=\"form-label\">\r\n                Kesediaan Dipoligami (Akhwat) <span class=\"text-danger\">*</span>\r\n              </label>\r\n              <select\r\n                class=\"form-select\"\r\n                id=\"kesediaanDipoligami\"\r\n                name=\"kesediaanDipoligami\"\r\n              >\r\n                <option value=\"\">-- Pilih --</option>\r\n                <option value=\"Bersedia\">Bersedia</option>\r\n                <option value=\"Tidak Bersedia\">Tidak Bersedia</option>\r\n                <option value=\"Kondisional\">Kondisional</option>\r\n              </select>\r\n              <div class=\"invalid-feedback\">Kolom ini wajib diisi.</div>\r\n            </div>\r\n\r\n            <!-- Pandangan Istri Bekerja (Opsional) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"pandanganNafkah\" class=\"form-label\">\r\n                Pandangan Istri Bekerja\r\n              </label>\r\n              <select\r\n                class=\"form-select\"\r\n                id=\"pandanganNafkah\"\r\n                name=\"pandanganNafkah\"\r\n              >\r\n                <option value=\"\">-- Pilih --</option>\r\n                <option value=\"IRT Penuh\">IRT Penuh</option>\r\n                <option value=\"Boleh Bekerja\">Boleh Bekerja</option>\r\n                <option value=\"Kondisional\">Kondisional</option>\r\n              </select>\r\n            </div>\r\n\r\n            <!-- Kesediaan Pindah Domisili (Opsional) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"kesediaanPindah\" class=\"form-label\">\r\n                Kesediaan Pindah Domisili\r\n              </label>\r\n              <select\r\n                class=\"form-select\"\r\n                id=\"kesediaanPindah\"\r\n                name=\"kesediaanPindah\"\r\n              >\r\n                <option value=\"\">-- Pilih --</option>\r\n                <option value=\"Ya\">Ya</option>\r\n                <option value=\"Tidak\">Tidak</option>\r\n                <option value=\"Bisa Didiskusikan\">Bisa Didiskusikan</option>\r\n              </select>\r\n            </div>\r\n\r\n            <!-- Target Waktu Menikah (Opsional) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"targetMenikah\" class=\"form-label\">\r\n                Target Waktu Menikah\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                id=\"targetMenikah\"\r\n                name=\"targetMenikah\"\r\n                placeholder=\"Contoh: 6 bulan, atau Secepat mungkin jika ada jodoh\"\r\n              />\r\n            </div>\r\n\r\n            <!-- Rencana Setelah Menikah (Opsional) -->\r\n            <div class=\"col-12\">\r\n              <label for=\"rencanaSetelahMenikah\" class=\"form-label\">\r\n                Rencana Pasca Nikah\r\n              </label>\r\n              <textarea\r\n                class=\"form-control\"\r\n                id=\"rencanaSetelahMenikah\"\r\n                name=\"rencanaSetelahMenikah\"\r\n                rows=\"3\"\r\n                placeholder=\"Contoh: Tinggal bersama orang tua selama 1 tahun, lalu mencari rumah sendiri, fokus membangun karier dan finansial keluarga\"\r\n              ></textarea>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Section 7: Informasi Kontak -->\r\n      <div class=\"form-section-header\">\r\n        <h3><i class=\"bi bi-telephone\"></i> 7. Informasi Kontak</h3>\r\n      </div>\r\n      <div class=\"card mb-4\">\r\n        <div class=\"card-body\">\r\n          <div class=\"row g-3\">\r\n            <!-- No WhatsApp (Opsional) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"noHP\" class=\"form-label\">\r\n                No WhatsApp Aktif\r\n              </label>\r\n              <input\r\n                type=\"tel\"\r\n                class=\"form-control\"\r\n                id=\"noHP\"\r\n                name=\"noHP\"\r\n                pattern=\"[0-9]{10,15}\"\r\n                placeholder=\"Contoh: 081234567890\"\r\n              />\r\n              <div class=\"invalid-feedback\">Gunakan angka saja (10-15 digit).</div>\r\n            </div>\r\n\r\n            <!-- Email (Opsional) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"email\" class=\"form-label\">\r\n                Alamat Email\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                class=\"form-control\"\r\n                id=\"email\"\r\n                name=\"email\"\r\n                placeholder=\"Contoh: ahmad.fauzi@email.com\"\r\n              />\r\n              <div class=\"invalid-feedback\">Format email tidak valid.</div>\r\n            </div>\r\n\r\n            <!-- Akun Media Sosial (Opsional) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"akunSosmed\" class=\"form-label\">\r\n                Akun Media Sosial\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                id=\"akunSosmed\"\r\n                name=\"akunSosmed\"\r\n                placeholder=\"Contoh: @ahmad_fauzi (Instagram)\"\r\n              />\r\n            </div>\r\n\r\n            <!-- Kontak Wali (Opsional) -->\r\n            <div class=\"col-md-6\">\r\n              <label for=\"kontakWali\" class=\"form-label\">\r\n                Kontak Wali / Mediator\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                id=\"kontakWali\"\r\n                name=\"kontakWali\"\r\n                placeholder=\"Contoh: Bapak Abdullah (081234567890)\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Action Bar (Sticky Bottom) -->\r\n      <div class=\"action-bar\">\r\n        <div class=\"d-flex justify-content-between flex-wrap gap-2\">\r\n          <button type=\"button\" class=\"btn btn-outline-secondary\" id=\"btn-reset-form\">\r\n            <i class=\"bi bi-arrow-clockwise\"></i> Reset Form\r\n          </button>\r\n          <div class=\"d-flex gap-2\">\r\n            <button type=\"button\" class=\"btn btn-outline-primary\" id=\"btn-save-draft\">\r\n              <i class=\"bi bi-save\"></i> Simpan Draft\r\n            </button>\r\n            <button type=\"submit\" class=\"btn btn-primary\" id=\"btn-preview\">\r\n              <i class=\"bi bi-eye\"></i> Preview CV\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n\r\n    <!-- Spacing for sticky action bar -->\r\n    <div style=\"height: 80px;\"></div>\r\n  `;\r\n\r\n  // Set max date for tanggalLahir (today)\r\n  const today = new Date().toISOString().split(\"T\")[0];\r\n  const tanggalLahirInput = document.getElementById(\"tanggalLahir\");\r\n  if (tanggalLahirInput) {\r\n    tanggalLahirInput.setAttribute(\"max\", today);\r\n  }\r\n\r\n  // Attach event listeners\r\n  attachEventListeners();\r\n}\r\n\r\n/**\r\n * Attach event listeners for form interactions\r\n */\r\nfunction attachEventListeners() {\r\n  const form = document.getElementById(\"cv-form\");\r\n  const btnReset = document.getElementById(\"btn-reset-form\");\r\n  const btnSaveDraft = document.getElementById(\"btn-save-draft\");\r\n\r\n  // Conditional logic handlers\r\n  const jenisKelaminSelect = document.getElementById(\"jenisKelamin\");\r\n  const statusPernikahanSelect = document.getElementById(\"statusPernikahan\");\r\n\r\n  if (jenisKelaminSelect) {\r\n    jenisKelaminSelect.addEventListener(\"change\", handleGenderChange);\r\n  }\r\n\r\n  if (statusPernikahanSelect) {\r\n    statusPernikahanSelect.addEventListener(\r\n      \"change\",\r\n      handleMaritalStatusChange\r\n    );\r\n  }\r\n\r\n  // Attach real-time validation to all form fields\r\n  attachValidationListeners(form);\r\n\r\n  // Form submission\r\n  if (form) {\r\n    form.addEventListener(\"submit\", (e) => {\r\n      e.preventDefault();\r\n      handleFormSubmit();\r\n    });\r\n  }\r\n\r\n  // Reset button with confirmation\r\n  if (btnReset) {\r\n    btnReset.addEventListener(\"click\", () => {\r\n      handleResetForm();\r\n    });\r\n  }\r\n\r\n  // Save draft button\r\n  if (btnSaveDraft) {\r\n    btnSaveDraft.addEventListener(\"click\", () => {\r\n      handleSaveDraft();\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Handle gender change for conditional fields\r\n * @param {Event} event - Change event\r\n */\r\nfunction handleGenderChange(event) {\r\n  const gender = event.target.value;\r\n\r\n  // Ikhwan (Laki-laki) fields\r\n  const wrapperJenggot = document.getElementById(\"wrapper-statusJenggot\");\r\n  const wrapperPoligami = document.getElementById(\"wrapper-kesediaanPoligami\");\r\n  const fieldJenggot = document.getElementById(\"statusJenggot\");\r\n  const fieldPoligami = document.getElementById(\"kesediaanPoligami\");\r\n\r\n  // Akhwat (Perempuan) fields\r\n  const wrapperHijab = document.getElementById(\"wrapper-statusHijab\");\r\n  const wrapperDipoligami = document.getElementById(\r\n    \"wrapper-kesediaanDipoligami\"\r\n  );\r\n  const fieldHijab = document.getElementById(\"statusHijab\");\r\n  const fieldDipoligami = document.getElementById(\"kesediaanDipoligami\");\r\n\r\n  if (gender === \"Laki-laki\") {\r\n    // Show Ikhwan fields\r\n    wrapperJenggot.classList.remove(\"d-none\");\r\n    wrapperPoligami.classList.remove(\"d-none\");\r\n    fieldJenggot.setAttribute(\"required\", \"required\");\r\n    fieldPoligami.setAttribute(\"required\", \"required\");\r\n\r\n    // Hide Akhwat fields\r\n    wrapperHijab.classList.add(\"d-none\");\r\n    wrapperDipoligami.classList.add(\"d-none\");\r\n    fieldHijab.removeAttribute(\"required\");\r\n    fieldDipoligami.removeAttribute(\"required\");\r\n    fieldHijab.value = \"\";\r\n    fieldDipoligami.value = \"\";\r\n  } else if (gender === \"Perempuan\") {\r\n    // Show Akhwat fields\r\n    wrapperHijab.classList.remove(\"d-none\");\r\n    wrapperDipoligami.classList.remove(\"d-none\");\r\n    fieldHijab.setAttribute(\"required\", \"required\");\r\n    fieldDipoligami.setAttribute(\"required\", \"required\");\r\n\r\n    // Hide Ikhwan fields\r\n    wrapperJenggot.classList.add(\"d-none\");\r\n    wrapperPoligami.classList.add(\"d-none\");\r\n    fieldJenggot.removeAttribute(\"required\");\r\n    fieldPoligami.removeAttribute(\"required\");\r\n    fieldJenggot.value = \"\";\r\n    fieldPoligami.value = \"\";\r\n  } else {\r\n    // Hide all conditional fields if no gender selected\r\n    wrapperJenggot.classList.add(\"d-none\");\r\n    wrapperPoligami.classList.add(\"d-none\");\r\n    wrapperHijab.classList.add(\"d-none\");\r\n    wrapperDipoligami.classList.add(\"d-none\");\r\n    fieldJenggot.removeAttribute(\"required\");\r\n    fieldPoligami.removeAttribute(\"required\");\r\n    fieldHijab.removeAttribute(\"required\");\r\n    fieldDipoligami.removeAttribute(\"required\");\r\n  }\r\n}\r\n\r\n/**\r\n * Handle marital status change for conditional fields\r\n * @param {Event} event - Change event\r\n */\r\nfunction handleMaritalStatusChange(event) {\r\n  const status = event.target.value;\r\n  const wrapperJumlahAnak = document.getElementById(\"wrapper-jumlahAnak\");\r\n  const fieldJumlahAnak = document.getElementById(\"jumlahAnak\");\r\n\r\n  if (status === \"Duda\" || status === \"Janda\") {\r\n    // Show jumlahAnak field\r\n    wrapperJumlahAnak.classList.remove(\"d-none\");\r\n    fieldJumlahAnak.setAttribute(\"required\", \"required\");\r\n  } else {\r\n    // Hide jumlahAnak field\r\n    wrapperJumlahAnak.classList.add(\"d-none\");\r\n    fieldJumlahAnak.removeAttribute(\"required\");\r\n    fieldJumlahAnak.value = \"\";\r\n  }\r\n}\r\n\r\n/**\r\n * Attach real-time validation listeners to all form fields\r\n * @param {HTMLFormElement} form - Form element\r\n */\r\nfunction attachValidationListeners(form) {\r\n  const fields = form.querySelectorAll(\"input, select, textarea\");\r\n\r\n  fields.forEach((field) => {\r\n    // Validate on blur (when user leaves the field)\r\n    field.addEventListener(\"blur\", () => {\r\n      validateField(field);\r\n    });\r\n\r\n    // Clear error on input (when user starts typing)\r\n    field.addEventListener(\"input\", () => {\r\n      if (field.classList.contains(\"is-invalid\")) {\r\n        clearFieldError(field);\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\n/**\r\n * Collect all form data into an object\r\n * @returns {Object} Form data object\r\n */\r\nfunction collectFormData() {\r\n  const form = document.getElementById(\"cv-form\");\r\n  const formData = {};\r\n\r\n  const fields = form.querySelectorAll(\"input, select, textarea\");\r\n  fields.forEach((field) => {\r\n    const name = field.name || field.id;\r\n    const value = field.value.trim();\r\n\r\n    // Skip hidden conditional fields or empty values\r\n    if (field.closest(\".d-none\") || !name) {\r\n      return;\r\n    }\r\n\r\n    // Store value (empty string for optional fields)\r\n    formData[name] = value;\r\n  });\r\n\r\n  return formData;\r\n}\r\n\r\n/**\r\n * Handle save draft button click\r\n */\r\nfunction handleSaveDraft() {\r\n  const btnSave = document.getElementById(\"btn-save-draft\");\r\n\r\n  const formData = collectFormData();\r\n\r\n  // Check if at least some data is filled\r\n  const hasData = Object.values(formData).some((value) => value !== \"\");\r\n\r\n  if (!hasData) {\r\n    showToast(\"Tidak ada data untuk disimpan\", \"warning\");\r\n    return;\r\n  }\r\n\r\n  // Show loading state\r\n  setButtonLoading(btnSave, \"Menyimpan...\");\r\n\r\n  // Simulate async operation with setTimeout\r\n  setTimeout(() => {\r\n    // Save to localStorage\r\n    const result = saveDraft(formData);\r\n\r\n    // Reset button state\r\n    resetButtonLoading(btnSave);\r\n\r\n    if (result.success) {\r\n      showToast(\r\n        \"Draft berhasil disimpan! Anda dapat melanjutkan nanti.\",\r\n        \"success\"\r\n      );\r\n    } else {\r\n      showToast(result.message || \"Gagal menyimpan draft\", \"error\");\r\n      console.error(\"[FormView] Save draft failed:\", result);\r\n    }\r\n  }, 500);\r\n}\r\n\r\n/**\r\n * Load draft data into form\r\n * @param {Object} draftData - Draft data object\r\n */\r\nexport function loadDraftToForm(draftData) {\r\n  const form = document.getElementById(\"cv-form\");\r\n  if (!form || !draftData) return;\r\n\r\n  // Populate each field\r\n  Object.keys(draftData).forEach((key) => {\r\n    const field = form.querySelector(`[name=\"${key}\"], #${key}`);\r\n    if (field && draftData[key]) {\r\n      field.value = draftData[key];\r\n\r\n      // Trigger change event for conditional fields\r\n      if (key === \"jenisKelamin\" || key === \"statusPernikahan\") {\r\n        field.dispatchEvent(new Event(\"change\"));\r\n      }\r\n    }\r\n  });\r\n\r\n  showToast(\"Draft berhasil dimuat\", \"success\");\r\n}\r\n\r\n/**\r\n * Handle form submission (Preview CV)\r\n */\r\nfunction handleFormSubmit() {\r\n  const form = document.getElementById(\"cv-form\");\r\n\r\n  // Run full form validation\r\n  const validationResult = validateForm(form);\r\n\r\n  if (!validationResult.isValid) {\r\n    // Show error toast\r\n    showToast(\r\n      \"Form belum lengkap. Periksa field yang ditandai merah.\",\r\n      \"error\"\r\n    );\r\n\r\n    // Scroll to first invalid field\r\n    if (validationResult.firstInvalidField) {\r\n      validationResult.firstInvalidField.scrollIntoView({\r\n        behavior: \"smooth\",\r\n        block: \"center\",\r\n      });\r\n      validationResult.firstInvalidField.focus();\r\n    }\r\n\r\n    return;\r\n  }\r\n\r\n  // Collect form data\r\n  const formData = collectFormData();\r\n\r\n  // Save to sessionStorage for preview page\r\n  try {\r\n    sessionStorage.setItem(STORAGE_KEYS.TEMP_DATA, JSON.stringify(formData));\r\n\r\n    // Navigate to preview page\r\n    navigateTo(\"/preview\");\r\n  } catch (error) {\r\n    console.error(\"[FormView] Error saving to sessionStorage:\", error);\r\n    showToast(\"Gagal menyimpan data. Silakan coba lagi.\", \"error\");\r\n  }\r\n}\r\n\r\n/**\r\n * Handle reset form with confirmation\r\n */\r\nfunction handleResetForm() {\r\n  // Use browser confirm for simplicity (can use ModalConfirm in Phase 5)\r\n  if (confirm(\"Apakah Anda yakin ingin mereset semua isian form?\")) {\r\n    const form = document.getElementById(\"cv-form\");\r\n    form.reset();\r\n\r\n    // Reset conditional fields\r\n    handleGenderChange({ target: { value: \"\" } });\r\n    handleMaritalStatusChange({ target: { value: \"Lajang\" } });\r\n\r\n    // Clear all validation states\r\n    const fields = form.querySelectorAll(\"input, select, textarea\");\r\n    fields.forEach((field) => clearFieldError(field));\r\n\r\n    showToast(\"Form berhasil direset\", \"info\");\r\n  }\r\n}\r\n\r\n/**\r\n * Initialize Form View\r\n */\r\nfunction initFormView() {\r\n  renderFormView();\r\n\r\n  // Initialize real-time validation on blur (AC-VAL-001, AC-VAL-002)\r\n  const form = document.getElementById(\"cv-form\");\r\n  if (form) {\r\n    initializeRealTimeValidation(form);\r\n  }\r\n\r\n  // Priority 1: Check if there's a draft to load from Draft page (explicit user action)\r\n  const draftToLoad = sessionStorage.getItem(STORAGE_KEYS.DRAFT_TO_LOAD);\r\n  if (draftToLoad) {\r\n    try {\r\n      const draftData = JSON.parse(draftToLoad);\r\n\r\n      // Wait for form to be fully rendered before loading\r\n      setTimeout(() => {\r\n        loadDraftToForm(draftData);\r\n        // Clear sessionStorage after loading\r\n        sessionStorage.removeItem(STORAGE_KEYS.DRAFT_TO_LOAD);\r\n      }, 100);\r\n\r\n      // Exit early - draft has highest priority\r\n      return;\r\n    } catch (error) {\r\n      console.error(\"[FormView] Error loading draft:\", error);\r\n      showToast(\"Gagal memuat draft\", \"error\");\r\n    }\r\n  }\r\n\r\n  // Priority 2: Check if there's temporary data from Preview page (auto-restore)\r\n  const tempData = sessionStorage.getItem(STORAGE_KEYS.TEMP_DATA);\r\n  if (tempData) {\r\n    try {\r\n      const formData = JSON.parse(tempData);\r\n\r\n      // Wait for form to be fully rendered before loading\r\n      setTimeout(() => {\r\n        loadDraftToForm(formData);\r\n        // Clear temp data after restoring to prevent conflicts\r\n        sessionStorage.removeItem(STORAGE_KEYS.TEMP_DATA);\r\n      }, 100);\r\n\r\n      return;\r\n    } catch (error) {\r\n      console.error(\"[FormView] Error loading temp data:\", error);\r\n      showToast(\"Gagal memuat data dari preview\", \"error\");\r\n    }\r\n  }\r\n}\r\n\r\n// Listen for view change event\r\nwindow.addEventListener(\"viewChanged\", (e) => {\r\n  if (e.detail.viewId === \"view-form\") {\r\n    initFormView();\r\n  }\r\n});\r\n\r\nexport { renderFormView, initFormView };\r\n","/**\r\n * @file cvGeneratorService.js\r\n * @description CV Text Generator Service - Transform form data to formatted plain text CV\r\n * @version 1.0\r\n * @date 2025-12-08\r\n */\r\n\r\n// ============================================================================\r\n// CONSTANTS\r\n// ============================================================================\r\n\r\n/**\r\n * Indonesian month names for date formatting\r\n */\r\nconst MONTH_NAMES = [\r\n  \"Januari\",\r\n  \"Februari\",\r\n  \"Maret\",\r\n  \"April\",\r\n  \"Mei\",\r\n  \"Juni\",\r\n  \"Juli\",\r\n  \"Agustus\",\r\n  \"September\",\r\n  \"Oktober\",\r\n  \"November\",\r\n  \"Desember\",\r\n];\r\n\r\n// ============================================================================\r\n// HELPER FUNCTIONS\r\n// ============================================================================\r\n\r\n/**\r\n * Format tanggal dari YYYY-MM-DD ke format Indonesia \"DD MMMM YYYY\"\r\n * @param {string} dateString - Tanggal dalam format ISO (YYYY-MM-DD)\r\n * @returns {string} - Tanggal dalam format \"DD MMMM YYYY\" atau \"-\" jika invalid\r\n * @example\r\n * formatDate('1995-08-17') // returns \"17 Agustus 1995\"\r\n * formatDate('') // returns \"-\"\r\n * formatDate(null) // returns \"-\"\r\n */\r\nexport const formatDate = (dateString) => {\r\n  if (!dateString || dateString === \"\") return \"-\";\r\n\r\n  try {\r\n    const parts = dateString.split(\"-\");\r\n    if (parts.length !== 3) return \"-\";\r\n\r\n    const [year, month, day] = parts;\r\n    const yearNum = parseInt(year, 10);\r\n    const monthNum = parseInt(month, 10);\r\n    const dayNum = parseInt(day, 10);\r\n\r\n    if (isNaN(yearNum) || isNaN(monthNum) || isNaN(dayNum)) return \"-\";\r\n    if (monthNum < 1 || monthNum > 12) return \"-\";\r\n    if (dayNum < 1 || dayNum > 31) return \"-\";\r\n\r\n    return `${dayNum} ${MONTH_NAMES[monthNum - 1]} ${yearNum}`;\r\n  } catch (error) {\r\n    console.error(\"[cvGeneratorService] Error formatting date:\", error);\r\n    return \"-\";\r\n  }\r\n};\r\n\r\n/**\r\n * Return value atau \"-\" jika kosong (null, undefined, empty string)\r\n * @param {any} value - Nilai yang akan diformat\r\n * @returns {string} - Nilai atau \"-\"\r\n * @example\r\n * formatEmpty('John') // returns \"John\"\r\n * formatEmpty('') // returns \"-\"\r\n * formatEmpty(null) // returns \"-\"\r\n * formatEmpty(undefined) // returns \"-\"\r\n */\r\nexport const formatEmpty = (value) => {\r\n  if (value === null || value === undefined || value === \"\") return \"-\";\r\n  return String(value).trim();\r\n};\r\n\r\n/**\r\n * Get current date in Indonesian format \"DD MMMM YYYY\"\r\n * @returns {string} - Tanggal saat ini dalam format Indonesia\r\n * @example\r\n * getCurrentDate() // returns \"8 Desember 2025\"\r\n */\r\nexport const getCurrentDate = () => {\r\n  const now = new Date();\r\n  const day = now.getDate();\r\n  const month = MONTH_NAMES[now.getMonth()];\r\n  const year = now.getFullYear();\r\n  return `${day} ${month} ${year}`;\r\n};\r\n\r\n/**\r\n * Build section header with title and separator\r\n * @private\r\n * @param {string} title - Section title\r\n * @returns {string} - Formatted section header\r\n */\r\nconst buildSectionHeader = (title) => {\r\n  return `${title}\\n${\"-\".repeat(64)}\\n`;\r\n};\r\n\r\n/**\r\n * Build field line with label and value (label padded to 20 chars)\r\n * @private\r\n * @param {string} label - Field label\r\n * @param {string} value - Field value\r\n * @returns {string} - Formatted field line\r\n */\r\nconst buildFieldLine = (label, value) => {\r\n  return `${label.padEnd(20)}: ${value}\\n`;\r\n};\r\n\r\n/**\r\n * Build multiline field (e.g., textarea content)\r\n * @private\r\n * @param {string} label - Field label\r\n * @param {string} value - Field value (multiline)\r\n * @returns {string} - Formatted multiline field\r\n */\r\nconst buildMultilineField = (label, value) => {\r\n  return `${label}:\\n${value}\\n\\n`;\r\n};\r\n\r\n/**\r\n * Build CV header with title and date\r\n * @private\r\n * @param {string} currentDate - Current date formatted\r\n * @returns {string} - Formatted header\r\n */\r\nconst buildHeader = (currentDate) => {\r\n  const divider = \"=\".repeat(64);\r\n  return [\r\n    divider,\r\n    \"                    CURRICULUM VITAE TA'ARUF\",\r\n    divider,\r\n    `Tanggal Pembuatan: ${currentDate}`,\r\n    \"\",\r\n  ].join(\"\\n\");\r\n};\r\n\r\n/**\r\n * Build personal data section (Section I)\r\n * @private\r\n * @param {Object} data - Form data\r\n * @param {string} tanggalLahirFormatted - Formatted birth date\r\n * @returns {string} - Formatted section\r\n */\r\nconst buildPersonalDataSection = (data, tanggalLahirFormatted) => {\r\n  const lines = [\r\n    buildSectionHeader(\"I. DATA PRIBADI\"),\r\n    buildFieldLine(\"Nama Lengkap\", formatEmpty(data.namaLengkap)),\r\n    buildFieldLine(\"Nama Panggilan\", formatEmpty(data.namaPanggilan)),\r\n    buildFieldLine(\r\n      \"Tempat, Tgl Lahir\",\r\n      `${formatEmpty(data.tempatLahir)}, ${tanggalLahirFormatted}`\r\n    ),\r\n    buildFieldLine(\"Jenis Kelamin\", formatEmpty(data.jenisKelamin)),\r\n    buildFieldLine(\r\n      \"Tinggi / Berat\",\r\n      `${formatEmpty(data.tinggiBadan)} cm / ${formatEmpty(data.beratBadan)} kg`\r\n    ),\r\n    buildFieldLine(\"Warna Kulit\", formatEmpty(data.warnaKulit)),\r\n    buildFieldLine(\"Suku Bangsa\", formatEmpty(data.suku)),\r\n    buildFieldLine(\"Domisili Saat Ini\", formatEmpty(data.domisili)),\r\n    buildFieldLine(\"Asal Daerah\", formatEmpty(data.asalDaerah)),\r\n    buildFieldLine(\"Pekerjaan\", formatEmpty(data.pekerjaan)),\r\n    buildFieldLine(\"Pengalaman Kerja\", formatEmpty(data.pengalamanKerja)),\r\n    buildFieldLine(\"Penghasilan Bulanan\", formatEmpty(data.penghasilanBulanan)),\r\n    buildFieldLine(\"Status Tempat Tinggal\", formatEmpty(data.statusRumah)),\r\n    buildFieldLine(\"Status Pernikahan\", formatEmpty(data.statusPernikahan)),\r\n  ];\r\n\r\n  // Conditional: Jumlah Anak\r\n  if (data.statusPernikahan === \"Duda\" || data.statusPernikahan === \"Janda\") {\r\n    lines.push(buildFieldLine(\"Jumlah Anak\", formatEmpty(data.jumlahAnak)));\r\n  }\r\n\r\n  lines.push(\r\n    buildFieldLine(\"Pernah Khitbah\", formatEmpty(data.pernahKhitbah)),\r\n    buildFieldLine(\"Status Izin Wali\", formatEmpty(data.statusIzin)),\r\n    \"\\n\"\r\n  );\r\n\r\n  return lines.join(\"\");\r\n};\r\n\r\n/**\r\n * Build education section (Section II)\r\n * @private\r\n * @param {Object} data - Form data\r\n * @returns {string} - Formatted section\r\n */\r\nconst buildEducationSection = (data) => {\r\n  return [\r\n    buildSectionHeader(\"II. RIWAYAT PENDIDIKAN\"),\r\n    buildMultilineField(\r\n      \"Pendidikan Terakhir\",\r\n      formatEmpty(data.pendidikanTerakhir)\r\n    ),\r\n    buildMultilineField(\r\n      \"Pendidikan Non-Formal\",\r\n      formatEmpty(data.pendidikanNonFormal)\r\n    ),\r\n    buildMultilineField(\r\n      \"Prestasi / Keahlian Khusus\",\r\n      formatEmpty(data.prestasi)\r\n    ),\r\n  ].join(\"\");\r\n};\r\n\r\n/**\r\n * Build family information section (Section III)\r\n * @private\r\n * @param {Object} data - Form data\r\n * @returns {string} - Formatted section\r\n */\r\nconst buildFamilySection = (data) => {\r\n  return [\r\n    buildSectionHeader(\"III. INFORMASI KELUARGA\"),\r\n    buildMultilineField(\"Data Ayah\", formatEmpty(data.infoAyah)),\r\n    buildMultilineField(\"Data Ibu\", formatEmpty(data.infoIbu)),\r\n    `Anak ke: ${formatEmpty(data.urutanAnak)}\\n\\n`,\r\n    buildMultilineField(\"Data Saudara\", formatEmpty(data.infoSaudara)),\r\n  ].join(\"\");\r\n};\r\n\r\n/**\r\n * Build religion & worship section (Section IV)\r\n * @private\r\n * @param {Object} data - Form data\r\n * @returns {string} - Formatted section\r\n */\r\nconst buildReligionSection = (data) => {\r\n  return [\r\n    buildSectionHeader(\"IV. IBADAH & PEMAHAMAN AGAMA\"),\r\n    buildFieldLine(\"Status Muallaf\", formatEmpty(data.statusMuallaf)),\r\n    \"\\n\",\r\n    buildMultilineField(\r\n      \"Pelaksanaan Shalat Wajib\",\r\n      formatEmpty(data.shalatWajib)\r\n    ),\r\n    buildMultilineField(\r\n      \"Kebiasaan Ibadah Sunnah\",\r\n      formatEmpty(data.ibadahSunnah)\r\n    ),\r\n    buildMultilineField(\r\n      \"Kemampuan Baca Al-Qur'an & Hafalan\",\r\n      formatEmpty(data.bacaanQuran)\r\n    ),\r\n    buildMultilineField(\r\n      \"Kajian / Ustadz Favorit\",\r\n      formatEmpty(data.kajianFavorit)\r\n    ),\r\n    buildMultilineField(\r\n      \"Organisasi / Komunitas Islam\",\r\n      formatEmpty(data.afiliasiOrganisasi)\r\n    ),\r\n  ].join(\"\");\r\n};\r\n\r\n/**\r\n * Build profile & habits section (Section V)\r\n * @private\r\n * @param {Object} data - Form data\r\n * @returns {string} - Formatted section\r\n */\r\nconst buildProfileSection = (data) => {\r\n  const lines = [\r\n    buildSectionHeader(\"V. PROFIL DIRI & KEBIASAAN\"),\r\n    buildFieldLine(\"Hobi / Kegemaran\", formatEmpty(data.hobi)),\r\n    buildFieldLine(\"Merokok\", formatEmpty(data.merokok)),\r\n  ];\r\n\r\n  // Conditional gender-specific fields\r\n  if (data.jenisKelamin === \"Laki-laki\") {\r\n    lines.push(\r\n      buildFieldLine(\"Status Jenggot\", formatEmpty(data.statusJenggot))\r\n    );\r\n  }\r\n\r\n  if (data.jenisKelamin === \"Perempuan\") {\r\n    lines.push(buildFieldLine(\"Status Hijab\", formatEmpty(data.statusHijab)));\r\n  }\r\n\r\n  lines.push(\r\n    \"\\n\",\r\n    buildMultilineField(\r\n      \"Sifat Positif (Kelebihan)\",\r\n      formatEmpty(data.sifatPositif)\r\n    ),\r\n    buildMultilineField(\r\n      \"Sifat Negatif (Kekurangan)\",\r\n      formatEmpty(data.sifatNegatif)\r\n    ),\r\n    buildMultilineField(\"Riwayat Penyakit\", formatEmpty(data.riwayatPenyakit)),\r\n    buildMultilineField(\"Visi Misi Hidup\", formatEmpty(data.visiMisiHidup))\r\n  );\r\n\r\n  return lines.join(\"\");\r\n};\r\n\r\n/**\r\n * Build marriage vision section (Section VI)\r\n * @private\r\n * @param {Object} data - Form data\r\n * @returns {string} - Formatted section\r\n */\r\nconst buildMarriageVisionSection = (data) => {\r\n  const lines = [\r\n    buildSectionHeader(\"VI. VISI PERNIKAHAN\"),\r\n    buildMultilineField(\r\n      \"Visi & Misi Pernikahan\",\r\n      formatEmpty(data.visiPernikahan)\r\n    ),\r\n    buildMultilineField(\r\n      \"Kriteria Calon Pasangan\",\r\n      formatEmpty(data.kriteriaPasangan)\r\n    ),\r\n    buildMultilineField(\r\n      \"Pandangan tentang Mahar\",\r\n      formatEmpty(data.pandanganMahar)\r\n    ),\r\n  ];\r\n\r\n  // Conditional gender-specific polygamy fields\r\n  if (data.jenisKelamin === \"Laki-laki\") {\r\n    lines.push(\r\n      buildFieldLine(\r\n        \"Pandangan tentang Poligami\",\r\n        formatEmpty(data.kesediaanPoligami)\r\n      )\r\n    );\r\n  }\r\n\r\n  if (data.jenisKelamin === \"Perempuan\") {\r\n    lines.push(\r\n      buildFieldLine(\r\n        \"Kesediaan Dipoligami\",\r\n        formatEmpty(data.kesediaanDipoligami)\r\n      )\r\n    );\r\n  }\r\n\r\n  lines.push(\r\n    buildFieldLine(\r\n      \"Pandangan Istri Bekerja\",\r\n      formatEmpty(data.pandanganNafkah)\r\n    ),\r\n    buildFieldLine(\r\n      \"Kesediaan Pindah Domisili\",\r\n      formatEmpty(data.kesediaanPindah)\r\n    ),\r\n    buildFieldLine(\"Target Waktu Menikah\", formatEmpty(data.targetMenikah)),\r\n    \"\\n\",\r\n    buildMultilineField(\r\n      \"Rencana Setelah Menikah\",\r\n      formatEmpty(data.rencanaSetelahMenikah)\r\n    )\r\n  );\r\n\r\n  return lines.join(\"\");\r\n};\r\n\r\n/**\r\n * Build contact section (Section VII)\r\n * @private\r\n * @param {Object} data - Form data\r\n * @returns {string} - Formatted section\r\n */\r\nconst buildContactSection = (data) => {\r\n  return [\r\n    buildSectionHeader(\"VII. KONTAK (Untuk Keperluan Mediator)\"),\r\n    buildFieldLine(\"No HP/WhatsApp\", formatEmpty(data.noHP)),\r\n    buildFieldLine(\"Email\", formatEmpty(data.email)),\r\n    buildFieldLine(\"Akun Sosmed\", formatEmpty(data.akunSosmed)),\r\n    buildFieldLine(\"Kontak Wali\", formatEmpty(data.kontakWali)),\r\n    \"\\n\",\r\n  ].join(\"\");\r\n};\r\n\r\n/**\r\n * Build CV footer with disclaimer\r\n * @private\r\n * @returns {string} - Formatted footer\r\n */\r\nconst buildFooter = () => {\r\n  const divider = \"=\".repeat(64);\r\n  return [\r\n    divider,\r\n    \"*Data ini diisi dengan sebenar-benarnya dan dapat\",\r\n    \"dipertanggungjawabkan.*\",\r\n    divider,\r\n  ].join(\"\\n\");\r\n};\r\n\r\n// ============================================================================\r\n// MAIN GENERATOR FUNCTION\r\n// ============================================================================\r\n\r\n/**\r\n * Generate formatted CV text from form data\r\n * @param {Object} data - Form data object with 49 fields\r\n * @returns {string} - Formatted CV text ready for copy-paste\r\n */\r\nexport const generateCV = (data) => {\r\n  try {\r\n    // Validate input\r\n    if (!data || typeof data !== \"object\") {\r\n      throw new Error(\"[cvGeneratorService] Data must be a non-null object\");\r\n    }\r\n\r\n    // Prepare formatted data\r\n    const currentDate = getCurrentDate();\r\n    const tanggalLahirFormatted = formatDate(data.tanggalLahir);\r\n\r\n    // Build CV sections using functional composition\r\n    const sections = [\r\n      buildHeader(currentDate),\r\n      buildPersonalDataSection(data, tanggalLahirFormatted),\r\n      buildEducationSection(data),\r\n      buildFamilySection(data),\r\n      buildReligionSection(data),\r\n      buildProfileSection(data),\r\n      buildMarriageVisionSection(data),\r\n      buildContactSection(data),\r\n      buildFooter(),\r\n    ];\r\n\r\n    // Join all sections with newlines\r\n    return sections.join(\"\\n\");\r\n  } catch (error) {\r\n    console.error(\"[cvGeneratorService] Error generating CV:\", error);\r\n    throw error;\r\n  }\r\n};\r\n","/**\r\n * @file previewView.js\r\n * @description Preview Page View - Review CV data before generation\r\n * @version 2.0\r\n * @date 2025-12-08\r\n */\r\n\r\nimport { navigateTo } from \"../router/router.js\";\r\nimport { generateCV } from \"../services/cvGeneratorService.js\";\r\nimport { showToast } from \"../components/ToastNotification.js\";\r\nimport { STORAGE_KEYS } from \"../types/enums.js\";\r\n\r\n/**\r\n * Render Preview Page content\r\n */\r\nfunction renderPreviewView() {\r\n  const container = document.getElementById(\"view-preview\");\r\n\r\n  // Load form data from sessionStorage\r\n  const formData = loadFormData();\r\n\r\n  // If no data (empty object), redirect to form\r\n  if (Object.keys(formData).length === 0) {\r\n    showToast(\r\n      \"Tidak ada data untuk di-preview. Silakan isi formulir terlebih dahulu.\",\r\n      \"warning\"\r\n    );\r\n    navigateTo(\"/form\");\r\n    return;\r\n  }\r\n\r\n  // Build preview HTML\r\n  const previewHTML = buildPreviewHTML(formData);\r\n\r\n  container.innerHTML = `\r\n    <!-- Preview Header -->\r\n    <div class=\"mb-4\">\r\n      <h2>\r\n        <i class=\"bi bi-eye\"></i> Preview Data CV Ta'aruf\r\n      </h2>\r\n      <p class=\"text-muted\">\r\n        Periksa kembali data Anda sebelum men-generate CV. \r\n        Pastikan semua informasi sudah benar.\r\n      </p>\r\n    </div>\r\n\r\n    <!-- Preview Container -->\r\n    <div class=\"card mb-4\">\r\n      <div class=\"card-body\">\r\n        <div id=\"preview-content\">\r\n          ${previewHTML}\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Action Bar -->\r\n    <div class=\"action-bar\">\r\n      <div class=\"d-flex justify-content-between flex-wrap gap-2\">\r\n        <button type=\"button\" class=\"btn btn-outline-secondary\" id=\"btn-back-to-form\">\r\n          <i class=\"bi bi-arrow-left\"></i> Kembali ke Edit\r\n        </button>\r\n        <button type=\"button\" class=\"btn btn-success\" id=\"btn-generate-cv\">\r\n          <i class=\"bi bi-file-earmark-check\"></i> Generate CV\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Spacing for sticky action bar -->\r\n    <div style=\"height: 80px;\"></div>\r\n  `;\r\n\r\n  // Attach event listeners\r\n  attachEventListeners();\r\n}\r\n\r\n/**\r\n * Load form data from sessionStorage\r\n * Returns empty object (Null Object Pattern) instead of null to prevent null checks\r\n * @returns {Object} Form data or empty object if not found\r\n */\r\nfunction loadFormData() {\r\n  try {\r\n    const dataStr = sessionStorage.getItem(STORAGE_KEYS.TEMP_DATA);\r\n    return dataStr ? JSON.parse(dataStr) : {};\r\n  } catch (error) {\r\n    console.error(\"[PreviewView] Error loading form data:\", error);\r\n    return {};\r\n  }\r\n}\r\n\r\n/**\r\n * Build preview HTML from form data\r\n * @param {Object} data - Form data object\r\n * @returns {string} HTML string for preview\r\n */\r\nfunction buildPreviewHTML(data) {\r\n  let html = \"\";\r\n\r\n  // Helper function to display value or dash\r\n  const display = (value) => value || \"-\";\r\n\r\n  // Section 1: Data Pribadi\r\n  html += `\r\n    <div class=\"preview-section mb-4\">\r\n      <h5 class=\"text-primary mb-3\">\r\n        <i class=\"bi bi-person\"></i> 1. Data Pribadi\r\n      </h5>\r\n      <div class=\"row g-2\">\r\n        <div class=\"col-md-6\"><strong>Nama Lengkap:</strong> ${display(\r\n          data.namaLengkap\r\n        )}</div>\r\n        <div class=\"col-md-6\"><strong>Nama Panggilan:</strong> ${display(\r\n          data.namaPanggilan\r\n        )}</div>\r\n        <div class=\"col-md-6\"><strong>Tempat Lahir:</strong> ${display(\r\n          data.tempatLahir\r\n        )}</div>\r\n        <div class=\"col-md-6\"><strong>Tanggal Lahir:</strong> ${display(\r\n          data.tanggalLahir\r\n        )}</div>\r\n        <div class=\"col-md-6\"><strong>Jenis Kelamin:</strong> ${display(\r\n          data.jenisKelamin\r\n        )}</div>\r\n        <div class=\"col-md-6\"><strong>Tinggi/Berat:</strong> ${display(\r\n          data.tinggiBadan\r\n        )} cm / ${display(data.beratBadan)} kg</div>\r\n        <div class=\"col-md-6\"><strong>Warna Kulit:</strong> ${display(\r\n          data.warnaKulit\r\n        )}</div>\r\n        <div class=\"col-md-6\"><strong>Suku:</strong> ${display(data.suku)}</div>\r\n        <div class=\"col-md-6\"><strong>Domisili:</strong> ${display(\r\n          data.domisili\r\n        )}</div>\r\n        <div class=\"col-md-6\"><strong>Asal Daerah:</strong> ${display(\r\n          data.asalDaerah\r\n        )}</div>\r\n        <div class=\"col-md-6\"><strong>Pekerjaan:</strong> ${display(\r\n          data.pekerjaan\r\n        )}</div>\r\n        <div class=\"col-md-6\"><strong>Penghasilan:</strong> ${display(\r\n          data.penghasilanBulanan\r\n        )}</div>\r\n        <div class=\"col-md-6\"><strong>Status Rumah:</strong> ${display(\r\n          data.statusRumah\r\n        )}</div>\r\n        <div class=\"col-md-6\"><strong>Status Pernikahan:</strong> ${display(\r\n          data.statusPernikahan\r\n        )}</div>\r\n        ${\r\n          data.statusPernikahan === \"Duda\" || data.statusPernikahan === \"Janda\"\r\n            ? `<div class=\"col-md-6\"><strong>Jumlah Anak:</strong> ${display(\r\n                data.jumlahAnak\r\n              )}</div>`\r\n            : \"\"\r\n        }\r\n        <div class=\"col-md-6\"><strong>Pernah Khitbah:</strong> ${display(\r\n          data.pernahKhitbah\r\n        )}</div>\r\n        <div class=\"col-md-6\"><strong>Status Izin Menikah:</strong> ${display(\r\n          data.statusIzin\r\n        )}</div>\r\n      </div>\r\n    </div>\r\n  `;\r\n\r\n  // Section 2: Riwayat Pendidikan\r\n  html += `\r\n    <div class=\"preview-section mb-4\">\r\n      <h5 class=\"text-primary mb-3\">\r\n        <i class=\"bi bi-mortarboard\"></i> 2. Riwayat Pendidikan\r\n      </h5>\r\n      <div class=\"mb-2\"><strong>Pendidikan Terakhir:</strong><br>${display(\r\n        data.pendidikanTerakhir\r\n      )}</div>\r\n      <div class=\"mb-2\"><strong>Pendidikan Non-Formal:</strong><br>${display(\r\n        data.pendidikanNonFormal\r\n      )}</div>\r\n      <div class=\"mb-2\"><strong>Prestasi/Keahlian:</strong><br>${display(\r\n        data.prestasi\r\n      )}</div>\r\n    </div>\r\n  `;\r\n\r\n  // Section 3: Informasi Keluarga\r\n  html += `\r\n    <div class=\"preview-section mb-4\">\r\n      <h5 class=\"text-primary mb-3\">\r\n        <i class=\"bi bi-people\"></i> 3. Informasi Keluarga\r\n      </h5>\r\n      <div class=\"mb-2\"><strong>Data Ayah:</strong><br>${display(\r\n        data.infoAyah\r\n      )}</div>\r\n      <div class=\"mb-2\"><strong>Data Ibu:</strong><br>${display(\r\n        data.infoIbu\r\n      )}</div>\r\n      <div class=\"mb-2\"><strong>Urutan Anak:</strong> ${display(\r\n        data.urutanAnak\r\n      )}</div>\r\n      <div class=\"mb-2\"><strong>Data Saudara:</strong><br>${display(\r\n        data.infoSaudara\r\n      )}</div>\r\n    </div>\r\n  `;\r\n\r\n  // Section 4: Ibadah & Pemahaman Agama\r\n  html += `\r\n    <div class=\"preview-section mb-4\">\r\n      <h5 class=\"text-primary mb-3\">\r\n        <i class=\"bi bi-moon-stars\"></i> 4. Ibadah & Pemahaman Agama\r\n      </h5>\r\n      <div class=\"mb-2\"><strong>Status Muallaf:</strong> ${display(\r\n        data.statusMuallaf\r\n      )}</div>\r\n      <div class=\"mb-2\"><strong>Shalat Wajib:</strong><br>${display(\r\n        data.shalatWajib\r\n      )}</div>\r\n      <div class=\"mb-2\"><strong>Ibadah Sunnah:</strong><br>${display(\r\n        data.ibadahSunnah\r\n      )}</div>\r\n      <div class=\"mb-2\"><strong>Bacaan Al-Qur'an:</strong><br>${display(\r\n        data.bacaanQuran\r\n      )}</div>\r\n      <div class=\"mb-2\"><strong>Kajian Favorit:</strong><br>${display(\r\n        data.kajianFavorit\r\n      )}</div>\r\n      <div class=\"mb-2\"><strong>Organisasi Islam:</strong> ${display(\r\n        data.afiliasiOrganisasi\r\n      )}</div>\r\n    </div>\r\n  `;\r\n\r\n  // Section 5: Profil Diri & Kebiasaan\r\n  html += `\r\n    <div class=\"preview-section mb-4\">\r\n      <h5 class=\"text-primary mb-3\">\r\n        <i class=\"bi bi-card-text\"></i> 5. Profil Diri & Kebiasaan\r\n      </h5>\r\n      <div class=\"mb-2\"><strong>Hobi:</strong> ${display(data.hobi)}</div>\r\n      <div class=\"mb-2\"><strong>Merokok:</strong> ${display(data.merokok)}</div>\r\n      ${\r\n        data.jenisKelamin === \"Laki-laki\"\r\n          ? `<div class=\"mb-2\"><strong>Status Jenggot:</strong> ${display(\r\n              data.statusJenggot\r\n            )}</div>`\r\n          : \"\"\r\n      }\r\n      ${\r\n        data.jenisKelamin === \"Perempuan\"\r\n          ? `<div class=\"mb-2\"><strong>Status Hijab:</strong> ${display(\r\n              data.statusHijab\r\n            )}</div>`\r\n          : \"\"\r\n      }\r\n      <div class=\"mb-2\"><strong>Sifat Positif:</strong><br>${display(\r\n        data.sifatPositif\r\n      )}</div>\r\n      <div class=\"mb-2\"><strong>Sifat Negatif:</strong><br>${display(\r\n        data.sifatNegatif\r\n      )}</div>\r\n      <div class=\"mb-2\"><strong>Riwayat Penyakit:</strong><br>${display(\r\n        data.riwayatPenyakit\r\n      )}</div>\r\n      <div class=\"mb-2\"><strong>Visi Misi Hidup:</strong><br>${display(\r\n        data.visiMisiHidup\r\n      )}</div>\r\n    </div>\r\n  `;\r\n\r\n  // Section 6: Visi Pernikahan\r\n  html += `\r\n    <div class=\"preview-section mb-4\">\r\n      <h5 class=\"text-primary mb-3\">\r\n        <i class=\"bi bi-heart\"></i> 6. Visi Pernikahan\r\n      </h5>\r\n      <div class=\"mb-2\"><strong>Visi & Misi Pernikahan:</strong><br>${display(\r\n        data.visiPernikahan\r\n      )}</div>\r\n      <div class=\"mb-2\"><strong>Kriteria Pasangan:</strong><br>${display(\r\n        data.kriteriaPasangan\r\n      )}</div>\r\n      <div class=\"mb-2\"><strong>Pandangan Mahar:</strong><br>${display(\r\n        data.pandanganMahar\r\n      )}</div>\r\n      ${\r\n        data.jenisKelamin === \"Laki-laki\"\r\n          ? `<div class=\"mb-2\"><strong>Pandangan Poligami:</strong> ${display(\r\n              data.kesediaanPoligami\r\n            )}</div>`\r\n          : \"\"\r\n      }\r\n      ${\r\n        data.jenisKelamin === \"Perempuan\"\r\n          ? `<div class=\"mb-2\"><strong>Kesediaan Dipoligami:</strong> ${display(\r\n              data.kesediaanDipoligami\r\n            )}</div>`\r\n          : \"\"\r\n      }\r\n      <div class=\"mb-2\"><strong>Pandangan Istri Bekerja:</strong> ${display(\r\n        data.pandanganNafkah\r\n      )}</div>\r\n      <div class=\"mb-2\"><strong>Kesediaan Pindah:</strong> ${display(\r\n        data.kesediaanPindah\r\n      )}</div>\r\n      <div class=\"mb-2\"><strong>Target Menikah:</strong> ${display(\r\n        data.targetMenikah\r\n      )}</div>\r\n      <div class=\"mb-2\"><strong>Rencana Setelah Menikah:</strong><br>${display(\r\n        data.rencanaSetelahMenikah\r\n      )}</div>\r\n    </div>\r\n  `;\r\n\r\n  // Section 7: Kontak\r\n  html += `\r\n    <div class=\"preview-section mb-4\">\r\n      <h5 class=\"text-primary mb-3\">\r\n        <i class=\"bi bi-telephone\"></i> 7. Informasi Kontak\r\n      </h5>\r\n      <div class=\"row g-2\">\r\n        <div class=\"col-md-6\"><strong>No HP/WhatsApp:</strong> ${display(\r\n          data.noHP\r\n        )}</div>\r\n        <div class=\"col-md-6\"><strong>Email:</strong> ${display(\r\n          data.email\r\n        )}</div>\r\n        <div class=\"col-md-6\"><strong>Akun Sosmed:</strong> ${display(\r\n          data.akunSosmed\r\n        )}</div>\r\n        <div class=\"col-md-6\"><strong>Kontak Wali:</strong> ${display(\r\n          data.kontakWali\r\n        )}</div>\r\n      </div>\r\n    </div>\r\n  `;\r\n\r\n  return html;\r\n}\r\n\r\n/**\r\n * Attach event listeners for preview interactions\r\n */\r\nfunction attachEventListeners() {\r\n  const btnBack = document.getElementById(\"btn-back-to-form\");\r\n  const btnGenerate = document.getElementById(\"btn-generate-cv\");\r\n\r\n  // Back to form button\r\n  if (btnBack) {\r\n    btnBack.addEventListener(\"click\", () => {\r\n      navigateTo(\"/form\");\r\n    });\r\n  }\r\n\r\n  // Generate CV button\r\n  if (btnGenerate) {\r\n    btnGenerate.addEventListener(\"click\", handleGenerateCV);\r\n  }\r\n}\r\n\r\n/**\r\n * Handle Generate CV button click\r\n */\r\nfunction handleGenerateCV() {\r\n  // Load form data from sessionStorage\r\n  const formData = loadFormData();\r\n\r\n  if (!formData) {\r\n    showToast(\r\n      \"Data tidak ditemukan. Silakan isi formulir terlebih dahulu.\",\r\n      \"error\"\r\n    );\r\n    navigateTo(\"/form\");\r\n    return;\r\n  }\r\n\r\n  // Show loading indicator\r\n  const btnGenerate = document.getElementById(\"btn-generate-cv\");\r\n  const originalText = btnGenerate.innerHTML;\r\n  btnGenerate.disabled = true;\r\n  btnGenerate.innerHTML =\r\n    '<span class=\"spinner-border spinner-border-sm me-2\"></span>Generating...';\r\n\r\n  // Simulate async operation (give UI time to update)\r\n  setTimeout(() => {\r\n    try {\r\n      // Generate CV text\r\n      const cvText = generateCV(formData);\r\n\r\n      if (!cvText) {\r\n        throw new Error(\"Failed to generate CV text\");\r\n      }\r\n\r\n      // Store generated CV to sessionStorage\r\n      sessionStorage.setItem(\"taaruf_cv_generated_text\", cvText);\r\n\r\n      // Also store source data for history\r\n      sessionStorage.setItem(\"taaruf_cv_source_data\", JSON.stringify(formData));\r\n\r\n      // Navigate to result page\r\n      navigateTo(\"/result\");\r\n    } catch (error) {\r\n      console.error(\"[PreviewView] Error generating CV:\", error);\r\n      showToast(\"Gagal men-generate CV. Silakan coba lagi.\", \"error\");\r\n\r\n      // Restore button state\r\n      btnGenerate.disabled = false;\r\n      btnGenerate.innerHTML = originalText;\r\n    }\r\n  }, 500); // Small delay for better UX\r\n}\r\n\r\n/**\r\n * Initialize preview view when view is activated\r\n */\r\nfunction initPreviewView() {\r\n  renderPreviewView();\r\n}\r\n\r\n// Listen for view change event\r\nwindow.addEventListener(\"viewChanged\", (e) => {\r\n  if (e.detail.viewId === \"view-preview\") {\r\n    initPreviewView();\r\n  }\r\n});\r\n\r\nexport { renderPreviewView, initPreviewView };\r\n","/**\r\n * @file resultView.js\r\n * @description Result Page View - Display generated CV\r\n * @version 2.0\r\n * @date 2025-12-08\r\n */\r\n\r\nimport { navigateTo } from \"../router/router.js\";\r\nimport { showToast } from \"../components/ToastNotification.js\";\r\nimport { saveHistory } from \"../services/localStorageService.js\";\r\nimport { STORAGE_KEYS } from \"../types/enums.js\";\r\n\r\n/**\r\n * Render Result Page content\r\n */\r\nfunction renderResultView() {\r\n  const container = document.getElementById(\"view-result\");\r\n\r\n  // Load generated CV text from sessionStorage\r\n  const cvText = sessionStorage.getItem(STORAGE_KEYS.GENERATED_TEXT);\r\n\r\n  // If no CV text, redirect to form\r\n  if (!cvText) {\r\n    showToast(\r\n      \"Tidak ada CV yang di-generate. Silakan isi formulir terlebih dahulu.\",\r\n      \"warning\"\r\n    );\r\n    navigateTo(\"/form\");\r\n    return;\r\n  }\r\n\r\n  // Count characters\r\n  const charCount = cvText.length.toLocaleString(\"id-ID\");\r\n\r\n  container.innerHTML = `\r\n    <!-- Success Alert -->\r\n    <div class=\"alert alert-success\" role=\"alert\">\r\n      <h4 class=\"alert-heading\">\r\n        <i class=\"bi bi-check-circle\"></i> CV Ta'aruf Berhasil Dibuat!\r\n      </h4>\r\n      <p class=\"mb-0\">\r\n        CV Anda telah berhasil di-generate. Anda dapat menyalin teks di bawah \r\n        atau menyimpannya ke riwayat untuk diakses nanti.\r\n      </p>\r\n    </div>\r\n\r\n    <!-- Output Area -->\r\n    <div class=\"card mb-4\">\r\n      <div class=\"card-header d-flex justify-content-between align-items-center\">\r\n        <h5 class=\"mb-0\">\r\n          <i class=\"bi bi-file-earmark-text\"></i> CV Ta'aruf Anda\r\n        </h5>\r\n        <span class=\"badge bg-secondary\">${charCount} karakter</span>\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <textarea \r\n          id=\"cv-output\" \r\n          class=\"form-control cv-preview\" \r\n          rows=\"25\" \r\n          readonly\r\n          style=\"font-family: 'Courier New', monospace; font-size: 14px; line-height: 1.6;\"\r\n        >${cvText}</textarea>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Action Bar -->\r\n    <div class=\"action-bar\">\r\n      <div class=\"d-flex justify-content-between flex-wrap gap-2\">\r\n        <div class=\"d-flex gap-2 flex-wrap\">\r\n          <button type=\"button\" class=\"btn btn-primary\" id=\"btn-copy-cv\">\r\n            <i class=\"bi bi-clipboard\"></i> Copy to Clipboard\r\n          </button>\r\n          <button type=\"button\" class=\"btn btn-success\" id=\"btn-save-history\">\r\n            <i class=\"bi bi-save\"></i> Simpan ke History\r\n          </button>\r\n          <button type=\"button\" class=\"btn btn-outline-info\" id=\"btn-print-cv\">\r\n            <i class=\"bi bi-printer\"></i> Print\r\n          </button>\r\n        </div>\r\n        <div class=\"d-flex gap-2 flex-wrap\">\r\n          <button type=\"button\" class=\"btn btn-outline-secondary\" id=\"btn-new-cv\">\r\n            <i class=\"bi bi-plus-circle\"></i> Buat CV Baru\r\n          </button>\r\n          <button type=\"button\" class=\"btn btn-outline-primary\" id=\"btn-back-home\">\r\n            <i class=\"bi bi-house\"></i> Kembali ke Beranda\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Spacing for sticky action bar -->\r\n    <div style=\"height: 80px;\"></div>\r\n  `;\r\n\r\n  // Attach event listeners\r\n  attachEventListeners();\r\n}\r\n\r\n/**\r\n * Handle copy to clipboard with fallback\r\n */\r\nasync function handleCopyToClipboard() {\r\n  const cvOutput = document.getElementById(\"cv-output\");\r\n  const btnCopy = document.getElementById(\"btn-copy-cv\");\r\n\r\n  if (!cvOutput) return;\r\n\r\n  try {\r\n    // Try modern Clipboard API first\r\n    await navigator.clipboard.writeText(cvOutput.value);\r\n\r\n    // Show success feedback\r\n    showToast(\"CV berhasil disalin ke clipboard!\", \"success\");\r\n\r\n    const originalText = btnCopy.innerHTML;\r\n    btnCopy.innerHTML = '<i class=\"bi bi-check\"></i> Tersalin!';\r\n    btnCopy.classList.add(\"btn-success\");\r\n    btnCopy.classList.remove(\"btn-primary\");\r\n\r\n    setTimeout(() => {\r\n      btnCopy.innerHTML = originalText;\r\n      btnCopy.classList.remove(\"btn-success\");\r\n      btnCopy.classList.add(\"btn-primary\");\r\n    }, 2000);\r\n  } catch (err) {\r\n    // Fallback to execCommand for older browsers\r\n    try {\r\n      cvOutput.select();\r\n      document.execCommand(\"copy\");\r\n      showToast(\"CV berhasil disalin ke clipboard!\", \"success\");\r\n    } catch (fallbackErr) {\r\n      console.error(\"[ResultView] All copy methods failed:\", fallbackErr);\r\n      showToast(\"Gagal menyalin. Silakan gunakan Ctrl+A dan Ctrl+C.\", \"error\");\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Handle save to history\r\n */\r\nfunction handleSaveHistory() {\r\n  const cvText = sessionStorage.getItem(STORAGE_KEYS.GENERATED_TEXT);\r\n  const sourceDataStr = sessionStorage.getItem(STORAGE_KEYS.SOURCE_DATA);\r\n\r\n  if (!cvText || !sourceDataStr) {\r\n    showToast(\r\n      \"Data CV tidak ditemukan. Tidak dapat menyimpan ke history.\",\r\n      \"error\"\r\n    );\r\n    return;\r\n  }\r\n\r\n  try {\r\n    const sourceData = JSON.parse(sourceDataStr);\r\n\r\n    // Save to localStorage using proper signature: saveHistory(formData, cvTextContent, customName)\r\n    const result = saveHistory(sourceData, cvText);\r\n\r\n    if (result.success) {\r\n      showToast(\"CV berhasil disimpan ke history!\", \"success\");\r\n\r\n      // Disable button after saving\r\n      const btnSave = document.getElementById(\"btn-save-history\");\r\n      if (btnSave) {\r\n        btnSave.disabled = true;\r\n        btnSave.innerHTML = '<i class=\"bi bi-check-circle\"></i> Sudah Disimpan';\r\n      }\r\n    } else {\r\n      showToast(result.message || \"Gagal menyimpan ke history\", \"error\");\r\n      console.error(\"[ResultView] Save history failed:\", result);\r\n    }\r\n  } catch (err) {\r\n    console.error(\"[ResultView] Failed to save history:\", err);\r\n    showToast(\"Gagal menyimpan ke history. Silakan coba lagi.\", \"error\");\r\n  }\r\n}\r\n\r\n/**\r\n * Handle print CV\r\n */\r\nfunction handlePrintCV() {\r\n  const cvText = sessionStorage.getItem(STORAGE_KEYS.GENERATED_TEXT);\r\n\r\n  if (!cvText) {\r\n    showToast(\"Tidak ada CV untuk dicetak.\", \"error\");\r\n    return;\r\n  }\r\n\r\n  // Create a new window for printing\r\n  const printWindow = window.open(\"\", \"_blank\");\r\n  printWindow.document.write(`\r\n    <!DOCTYPE html>\r\n    <html>\r\n    <head>\r\n      <title>CV Ta'aruf - Print</title>\r\n      <style>\r\n        body {\r\n          font-family: 'Courier New', monospace;\r\n          font-size: 12pt;\r\n          line-height: 1.6;\r\n          margin: 2cm;\r\n          white-space: pre-wrap;\r\n        }\r\n        @media print {\r\n          body { margin: 1cm; }\r\n        }\r\n      </style>\r\n    </head>\r\n    <body>${cvText}</body>\r\n    </html>\r\n  `);\r\n  printWindow.document.close();\r\n  printWindow.focus();\r\n\r\n  // Wait for content to load, then print\r\n  setTimeout(() => {\r\n    printWindow.print();\r\n  }, 250);\r\n}\r\n\r\n/**\r\n * Handle new CV creation\r\n */\r\nfunction handleNewCV() {\r\n  // Clear sessionStorage\r\n  sessionStorage.removeItem(STORAGE_KEYS.TEMP_DATA);\r\n  sessionStorage.removeItem(STORAGE_KEYS.GENERATED_TEXT);\r\n  sessionStorage.removeItem(STORAGE_KEYS.SOURCE_DATA);\r\n\r\n  // Navigate to form\r\n  showToast(\"Membuat CV baru. Silakan isi formulir.\", \"info\");\r\n  navigateTo(\"/form\");\r\n}\r\n\r\n/**\r\n * Attach event listeners for result page interactions\r\n */\r\nfunction attachEventListeners() {\r\n  const btnCopy = document.getElementById(\"btn-copy-cv\");\r\n  const btnSaveHistory = document.getElementById(\"btn-save-history\");\r\n  const btnPrint = document.getElementById(\"btn-print-cv\");\r\n  const btnNewCV = document.getElementById(\"btn-new-cv\");\r\n  const btnBackHome = document.getElementById(\"btn-back-home\");\r\n\r\n  // Copy to clipboard button\r\n  if (btnCopy) {\r\n    btnCopy.addEventListener(\"click\", handleCopyToClipboard);\r\n  }\r\n\r\n  // Save to history button\r\n  if (btnSaveHistory) {\r\n    btnSaveHistory.addEventListener(\"click\", handleSaveHistory);\r\n  }\r\n\r\n  // Print button\r\n  if (btnPrint) {\r\n    btnPrint.addEventListener(\"click\", handlePrintCV);\r\n  }\r\n\r\n  // New CV button\r\n  if (btnNewCV) {\r\n    btnNewCV.addEventListener(\"click\", handleNewCV);\r\n  }\r\n\r\n  // Back to home button\r\n  if (btnBackHome) {\r\n    btnBackHome.addEventListener(\"click\", () => {\r\n      navigateTo(\"/\");\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Initialize result view when view is activated\r\n */\r\nfunction initResultView() {\r\n  renderResultView();\r\n\r\n  // Clear temporary form data after CV is generated\r\n  // This prevents conflicts when loading drafts later\r\n  sessionStorage.removeItem(STORAGE_KEYS.TEMP_DATA);\r\n}\r\n\r\n// Listen for view change event\r\nwindow.addEventListener(\"viewChanged\", (e) => {\r\n  if (e.detail.viewId === \"view-result\") {\r\n    initResultView();\r\n  }\r\n});\r\n\r\nexport { renderResultView, initResultView };\r\n","/**\r\n * @file draftView.js\r\n * @description Draft Page View - Manage saved drafts\r\n * @version 2.2\r\n * @date 2025-01-27\r\n */\r\n\r\nimport { navigateTo } from \"../router/router.js\";\r\nimport {\r\n  getDrafts,\r\n  getDraftById,\r\n  deleteDraft,\r\n} from \"../services/localStorageService.js\";\r\nimport { showToast } from \"../components/ToastNotification.js\";\r\nimport {\r\n  setButtonLoading,\r\n  resetButtonLoading,\r\n} from \"../components/LoadingSpinner.js\";\r\nimport { formatDateTime } from \"../utils/dateUtils.js\";\r\nimport { STORAGE_KEYS } from \"../types/enums.js\";\r\n\r\n/**\r\n * Render Draft Page content\r\n */\r\nfunction renderDraftView() {\r\n  const container = document.getElementById(\"view-draft\");\r\n\r\n  container.innerHTML = `\r\n    <!-- Page Header -->\r\n    <div class=\"mb-4\">\r\n      <h2>\r\n        <i class=\"bi bi-file-earmark-text\"></i> Draft Saya\r\n      </h2>\r\n      <p class=\"text-muted\">\r\n        Kelola draft CV yang belum selesai. Anda dapat melanjutkan mengisi \r\n        atau menghapus draft yang tidak diperlukan.\r\n      </p>\r\n    </div>\r\n\r\n    <!-- Draft List Container -->\r\n    <div id=\"draft-list-container\">\r\n      <!-- Draft list will be loaded here dynamically -->\r\n    </div>\r\n  `;\r\n\r\n  // Load and render drafts\r\n  loadDrafts();\r\n}\r\n\r\n/**\r\n * Load drafts from localStorage and render list\r\n */\r\nfunction loadDrafts() {\r\n  const container = document.getElementById(\"draft-list-container\");\r\n\r\n  // Get drafts from localStorage\r\n  const drafts = getDrafts();\r\n\r\n  // Sort by lastUpdated (newest first)\r\n  const sortedDrafts = drafts.sort(\r\n    (a, b) => new Date(b.lastUpdated) - new Date(a.lastUpdated)\r\n  );\r\n\r\n  if (sortedDrafts.length === 0) {\r\n    renderEmptyState(container);\r\n  } else {\r\n    renderDraftList(container, sortedDrafts);\r\n  }\r\n}\r\n\r\n/**\r\n * Render empty state when no drafts exist\r\n * @param {HTMLElement} container - Container element\r\n */\r\nfunction renderEmptyState(container) {\r\n  container.innerHTML = `\r\n    <div class=\"card\">\r\n      <div class=\"card-body empty-state\">\r\n        <i class=\"bi bi-inbox\"></i>\r\n        <h4>Belum Ada Draft Tersimpan</h4>\r\n        <p class=\"text-muted\">\r\n          Draft akan tersimpan otomatis saat Anda klik tombol \"Simpan Draft\" \r\n          di halaman formulir.\r\n        </p>\r\n        <button class=\"btn btn-primary\" id=\"btn-create-new\">\r\n          <i class=\"bi bi-plus-circle\"></i> Buat CV Baru\r\n        </button>\r\n      </div>\r\n    </div>\r\n  `;\r\n\r\n  // Attach event listener\r\n  const btnCreateNew = document.getElementById(\"btn-create-new\");\r\n  if (btnCreateNew) {\r\n    btnCreateNew.addEventListener(\"click\", () => {\r\n      navigateTo(\"/form\");\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Render list of drafts\r\n * @param {HTMLElement} container - Container element\r\n * @param {Array} drafts - Array of draft objects\r\n */\r\nfunction renderDraftList(container, drafts) {\r\n  let html = '<div class=\"list-group\">';\r\n\r\n  drafts.forEach((draft) => {\r\n    html += `\r\n      <div class=\"list-group-item draft-card\">\r\n        <div class=\"d-flex w-100 justify-content-between align-items-start\">\r\n          <div>\r\n            <h5 class=\"mb-1\">${draft.name || \"Draft Tanpa Nama\"}</h5>\r\n            <p class=\"mb-1 text-muted small\">\r\n              <i class=\"bi bi-clock\"></i> \r\n              Terakhir diupdate: ${formatDateTime(draft.lastUpdated)}\r\n            </p>\r\n            ${\r\n              draft.data.namaLengkap\r\n                ? `<p class=\"mb-1\"><strong>Nama:</strong> ${draft.data.namaLengkap}</p>`\r\n                : \"\"\r\n            }\r\n          </div>\r\n          <div class=\"d-flex gap-2\">\r\n            <button class=\"btn btn-sm btn-primary btn-load-draft\" data-id=\"${\r\n              draft.id\r\n            }\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" title=\"Muat draft ini ke formulir\">\r\n              <i class=\"bi bi-arrow-right-circle\"></i> Load\r\n            </button>\r\n            <button class=\"btn btn-sm btn-danger btn-delete-draft\" data-id=\"${\r\n              draft.id\r\n            }\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" title=\"Hapus draft ini secara permanen\">\r\n              <i class=\"bi bi-trash\"></i> Hapus\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `;\r\n  });\r\n\r\n  html += \"</div>\";\r\n  container.innerHTML = html;\r\n\r\n  // Attach event listeners\r\n  attachDraftListeners();\r\n\r\n  // Initialize Bootstrap tooltips\r\n  const tooltipTriggerList = [].slice.call(\r\n    container.querySelectorAll('[data-bs-toggle=\"tooltip\"]')\r\n  );\r\n  tooltipTriggerList.forEach((tooltipTriggerEl) => {\r\n    new bootstrap.Tooltip(tooltipTriggerEl);\r\n  });\r\n}\r\n\r\n/**\r\n * Handle load draft button click\r\n * @param {string} draftId - Draft ID to load\r\n * @param {HTMLElement} button - The clicked button element\r\n */\r\nfunction handleLoadDraft(draftId, button) {\r\n  const draft = getDraftById(draftId);\r\n\r\n  if (!draft) {\r\n    showToast(\"Draft tidak ditemukan\", \"error\");\r\n    return;\r\n  }\r\n\r\n  // Show loading state\r\n  if (button) setButtonLoading(button, \"Memuat...\");\r\n\r\n  // Simulate async operation\r\n  setTimeout(() => {\r\n    // Store draft data in sessionStorage for form to load\r\n    sessionStorage.setItem(\r\n      STORAGE_KEYS.DRAFT_TO_LOAD,\r\n      JSON.stringify(draft.data)\r\n    );\r\n\r\n    // Navigate to form\r\n    navigateTo(\"/form\");\r\n\r\n    showToast(\"Memuat draft ke formulir...\", \"loading\");\r\n  }, 300);\r\n}\r\n\r\n/**\r\n * Handle delete draft button click\r\n * @param {string} draftId - Draft ID to delete\r\n */\r\nfunction handleDeleteDraft(draftId) {\r\n  const draft = getDraftById(draftId);\r\n\r\n  if (!draft) {\r\n    showToast(\"Draft tidak ditemukan\", \"error\");\r\n    return;\r\n  }\r\n\r\n  // Double confirmation\r\n  const confirmMessage = `Apakah Anda yakin ingin menghapus draft \"${draft.name}\"?\\n\\nTindakan ini tidak dapat dibatalkan.`;\r\n\r\n  if (!confirm(confirmMessage)) {\r\n    return;\r\n  }\r\n\r\n  // Delete draft\r\n  const result = deleteDraft(draftId);\r\n\r\n  if (result.success) {\r\n    showToast(\"Draft berhasil dihapus\", \"success\");\r\n\r\n    // Reload draft list\r\n    loadDrafts();\r\n  } else {\r\n    showToast(result.message || \"Gagal menghapus draft\", \"error\");\r\n    console.error(\"[DraftView] Delete failed:\", result);\r\n  }\r\n}\r\n\r\n/**\r\n * Attach event listeners using Event Delegation (single listener on container)\r\n * Better performance for large lists, follows Eloquent JS patterns\r\n */\r\nfunction attachDraftListeners() {\r\n  const container = document.getElementById(\"draft-list-container\");\r\n\r\n  if (!container) return;\r\n\r\n  // Single event listener on container using Event Delegation\r\n  container.addEventListener(\"click\", (e) => {\r\n    // Check if clicked element is \"Load Draft\" button\r\n    const loadBtn = e.target.closest(\".btn-load-draft\");\r\n    if (loadBtn) {\r\n      const draftId = loadBtn.getAttribute(\"data-id\");\r\n      handleLoadDraft(draftId, loadBtn);\r\n      return;\r\n    }\r\n\r\n    // Check if clicked element is \"Delete Draft\" button\r\n    const deleteBtn = e.target.closest(\".btn-delete-draft\");\r\n    if (deleteBtn) {\r\n      const draftId = deleteBtn.getAttribute(\"data-id\");\r\n      handleDeleteDraft(draftId);\r\n      return;\r\n    }\r\n  });\r\n\r\n  // Initialize Bootstrap tooltips on container\r\n  const tooltipTriggerList = [].slice.call(\r\n    container.querySelectorAll('[data-bs-toggle=\"tooltip\"]')\r\n  );\r\n  tooltipTriggerList.forEach((tooltipTriggerEl) => {\r\n    new bootstrap.Tooltip(tooltipTriggerEl);\r\n  });\r\n}\r\n\r\n/**\r\n * Initialize draft view when view is activated\r\n */\r\nfunction initDraftView() {\r\n  renderDraftView();\r\n}\r\n\r\n// Listen for view change event\r\nwindow.addEventListener(\"viewChanged\", (e) => {\r\n  if (e.detail.viewId === \"view-draft\") {\r\n    initDraftView();\r\n  }\r\n});\r\n\r\nexport { renderDraftView, initDraftView };\r\n","/**\r\n * @file historyView.js\r\n * @description History Page View - View generated CV history\r\n * @version 2.1\r\n * @date 2025-01-27\r\n */\r\n\r\nimport { navigateTo } from \"../router/router.js\";\r\nimport {\r\n  getHistory,\r\n  getHistoryById,\r\n  deleteHistory,\r\n} from \"../services/localStorageService.js\";\r\nimport { showToast } from \"../components/ToastNotification.js\";\r\nimport {\r\n  setButtonLoading,\r\n  resetButtonLoading,\r\n} from \"../components/LoadingSpinner.js\";\r\nimport { formatDateTime } from \"../utils/dateUtils.js\";\r\nimport { STORAGE_KEYS } from \"../types/enums.js\";\r\n\r\n/**\r\n * Render History Page content\r\n */\r\nfunction renderHistoryView() {\r\n  const container = document.getElementById(\"view-history\");\r\n\r\n  container.innerHTML = `\r\n    <!-- Page Header -->\r\n    <div class=\"mb-4\">\r\n      <h2>\r\n        <i class=\"bi bi-clock-history\"></i> Riwayat CV\r\n      </h2>\r\n      <p class=\"text-muted\">\r\n        Lihat dan kelola CV yang sudah pernah Anda buat sebelumnya.\r\n      </p>\r\n    </div>\r\n\r\n    <!-- History List Container -->\r\n    <div id=\"history-list-container\">\r\n      <!-- History list will be loaded here dynamically -->\r\n    </div>\r\n\r\n    <!-- View Modal -->\r\n    <div class=\"modal fade\" id=\"modalViewHistory\" tabindex=\"-1\" aria-hidden=\"true\">\r\n      <div class=\"modal-dialog modal-lg modal-dialog-scrollable\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\">\r\n              <i class=\"bi bi-file-earmark-text\"></i> CV Ta'aruf\r\n            </h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <pre id=\"modal-cv-content\" class=\"cv-preview\" style=\"white-space: pre-wrap;\"></pre>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Tutup</button>\r\n            <button type=\"button\" class=\"btn btn-primary\" id=\"btn-modal-copy\">\r\n              <i class=\"bi bi-clipboard\"></i> Copy\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  `;\r\n\r\n  // Load and render history\r\n  loadHistory();\r\n}\r\n\r\n/**\r\n * Load history from localStorage and render list\r\n */\r\nfunction loadHistory() {\r\n  const container = document.getElementById(\"history-list-container\");\r\n\r\n  // Get history from localStorage\r\n  const history = getHistory();\r\n\r\n  // Sort by generatedAt (newest first)\r\n  const sortedHistory = history.sort(\r\n    (a, b) => new Date(b.generatedAt) - new Date(a.generatedAt)\r\n  );\r\n\r\n  if (sortedHistory.length === 0) {\r\n    renderEmptyState(container);\r\n  } else {\r\n    renderHistoryList(container, sortedHistory);\r\n  }\r\n}\r\n\r\n/**\r\n * Render empty state when no history exists\r\n * @param {HTMLElement} container - Container element\r\n */\r\nfunction renderEmptyState(container) {\r\n  container.innerHTML = `\r\n    <div class=\"card\">\r\n      <div class=\"card-body empty-state\">\r\n        <i class=\"bi bi-hourglass-split\"></i>\r\n        <h4>Belum Ada Riwayat CV</h4>\r\n        <p class=\"text-muted\">\r\n          Riwayat CV akan tersimpan otomatis setelah Anda selesai membuat CV \r\n          dan klik tombol \"Simpan ke History\".\r\n        </p>\r\n        <button class=\"btn btn-primary\" id=\"btn-create-new\">\r\n          <i class=\"bi bi-plus-circle\"></i> Buat CV Sekarang\r\n        </button>\r\n      </div>\r\n    </div>\r\n  `;\r\n\r\n  // Attach event listener\r\n  const btnCreateNew = document.getElementById(\"btn-create-new\");\r\n  if (btnCreateNew) {\r\n    btnCreateNew.addEventListener(\"click\", () => {\r\n      navigateTo(\"/form\");\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Render list of history items\r\n * @param {HTMLElement} container - Container element\r\n * @param {Array} history - Array of history objects\r\n */\r\nfunction renderHistoryList(container, history) {\r\n  let html = '<div class=\"list-group\">';\r\n\r\n  history.forEach((item) => {\r\n    html += `\r\n      <div class=\"list-group-item history-card\">\r\n        <div class=\"d-flex w-100 justify-content-between align-items-start\">\r\n          <div>\r\n            <h5 class=\"mb-1\">${item.name || \"CV Ta'aruf\"}</h5>\r\n            <p class=\"mb-1 text-muted small\">\r\n              <i class=\"bi bi-calendar\"></i> \r\n              Dibuat: ${formatDateTime(item.generatedAt)}\r\n            </p>\r\n            ${\r\n              item.sourceData && item.sourceData.namaLengkap\r\n                ? `<p class=\"mb-1\"><strong>Nama:</strong> ${item.sourceData.namaLengkap}</p>`\r\n                : \"\"\r\n            }\r\n          </div>\r\n          <div class=\"d-flex gap-2\">\r\n            <button class=\"btn btn-sm btn-view-history\" data-id=\"${\r\n              item.id\r\n            }\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" title=\"Lihat CV dalam modal\" style=\"background-color: #1a7431; color: white; border-color: #1a7431;\">\r\n              <i class=\"bi bi-eye\"></i> Lihat\r\n            </button>\r\n            <button class=\"btn btn-sm btn-primary btn-copy-history\" data-id=\"${\r\n              item.id\r\n            }\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" title=\"Salin CV ke clipboard\">\r\n              <i class=\"bi bi-clipboard\"></i> Copy\r\n            </button>\r\n            <button class=\"btn btn-sm btn-danger btn-delete-history\" data-id=\"${\r\n              item.id\r\n            }\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" title=\"Hapus riwayat ini secara permanen\">\r\n              <i class=\"bi bi-trash\"></i> Hapus\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `;\r\n  });\r\n\r\n  html += \"</div>\";\r\n  container.innerHTML = html;\r\n\r\n  // Attach event listeners\r\n  attachHistoryListeners();\r\n\r\n  // Initialize Bootstrap tooltips\r\n  const tooltipTriggerList = [].slice.call(\r\n    container.querySelectorAll('[data-bs-toggle=\"tooltip\"]')\r\n  );\r\n  tooltipTriggerList.forEach((tooltipTriggerEl) => {\r\n    new bootstrap.Tooltip(tooltipTriggerEl);\r\n  });\r\n}\r\n\r\n/**\r\n * Handle view history button click\r\n * @param {string} historyId - History ID to view\r\n */\r\nfunction handleViewHistory(historyId) {\r\n  const item = getHistoryById(historyId);\r\n\r\n  if (!item) {\r\n    showToast(\"Riwayat tidak ditemukan\", \"error\");\r\n    return;\r\n  }\r\n\r\n  // Get modal elements\r\n  const modal = document.getElementById(\"modalViewHistory\");\r\n  const modalContent = document.getElementById(\"modal-cv-content\");\r\n\r\n  if (!modal || !modalContent) return;\r\n\r\n  // Display CV text in modal\r\n  modalContent.textContent = item.cvTextContent;\r\n\r\n  // Store current history ID for copy button\r\n  modal.dataset.currentHistoryId = historyId;\r\n\r\n  // Show modal using Bootstrap\r\n  const bsModal = new bootstrap.Modal(modal);\r\n  bsModal.show();\r\n}\r\n\r\n/**\r\n * Handle copy history button click (direct copy without modal)\r\n * @param {string} historyId - History ID to copy\r\n * @param {HTMLElement} button - The clicked button element\r\n */\r\nasync function handleCopyHistory(historyId, button) {\r\n  const item = getHistoryById(historyId);\r\n\r\n  if (!item) {\r\n    showToast(\"Riwayat tidak ditemukan\", \"error\");\r\n    return;\r\n  }\r\n\r\n  // Show loading state\r\n  if (button) setButtonLoading(button, \"Menyalin...\");\r\n\r\n  try {\r\n    // Try Clipboard API\r\n    await navigator.clipboard.writeText(item.cvTextContent);\r\n\r\n    if (button) resetButtonLoading(button);\r\n    showToast(\"CV berhasil disalin ke clipboard!\", \"success\");\r\n  } catch (error) {\r\n    // Fallback to execCommand\r\n    const textarea = document.createElement(\"textarea\");\r\n    textarea.value = item.cvTextContent;\r\n    textarea.style.position = \"fixed\";\r\n    textarea.style.opacity = \"0\";\r\n    document.body.appendChild(textarea);\r\n    textarea.select();\r\n\r\n    try {\r\n      document.execCommand(\"copy\");\r\n      if (button) resetButtonLoading(button);\r\n      showToast(\"CV berhasil disalin ke clipboard!\", \"success\");\r\n    } catch (fallbackError) {\r\n      console.error(\"[HistoryView] All copy methods failed:\", fallbackError);\r\n      if (button) resetButtonLoading(button);\r\n      showToast(\r\n        \"Gagal menyalin. Silakan gunakan tombol View lalu copy manual.\",\r\n        \"error\"\r\n      );\r\n    }\r\n\r\n    document.body.removeChild(textarea);\r\n  }\r\n}\r\n\r\n/**\r\n * Handle delete history button click\r\n * @param {string} historyId - History ID to delete\r\n * @param {HTMLElement} button - The clicked button element\r\n */\r\nfunction handleDeleteHistory(historyId, button) {\r\n  const item = getHistoryById(historyId);\r\n\r\n  if (!item) {\r\n    showToast(\"Riwayat tidak ditemukan\", \"error\");\r\n    return;\r\n  }\r\n\r\n  // Double confirmation\r\n  const confirmMessage = `Apakah Anda yakin ingin menghapus CV \"${item.name}\"?\\n\\nTindakan ini tidak dapat dibatalkan.`;\r\n\r\n  if (!confirm(confirmMessage)) {\r\n    return;\r\n  }\r\n\r\n  // Show loading state\r\n  if (button) setButtonLoading(button, \"Menghapus...\");\r\n\r\n  // Simulate async operation with delay\r\n  setTimeout(() => {\r\n    // Delete history\r\n    const result = deleteHistory(historyId);\r\n\r\n    if (button) resetButtonLoading(button);\r\n\r\n    if (result.success) {\r\n      showToast(\"Riwayat CV berhasil dihapus\", \"success\");\r\n\r\n      // Reload history list\r\n      loadHistory();\r\n    } else {\r\n      showToast(result.message || \"Gagal menghapus riwayat\", \"error\");\r\n      console.error(\"[HistoryView] Delete failed:\", result);\r\n    }\r\n  }, 300);\r\n}\r\n\r\n/**\r\n * Handle modal copy button click\r\n */\r\nasync function handleModalCopy() {\r\n  const modal = document.getElementById(\"modalViewHistory\");\r\n  const historyId = modal?.dataset.currentHistoryId;\r\n\r\n  if (!historyId) {\r\n    showToast(\"ID riwayat tidak ditemukan\", \"error\");\r\n    return;\r\n  }\r\n\r\n  await handleCopyHistory(historyId);\r\n}\r\n\r\n/**\r\n * Attach event listeners using Event Delegation (single listener on container)\r\n * Better performance for large lists, follows Eloquent JS patterns\r\n */\r\nfunction attachHistoryListeners() {\r\n  const container = document.getElementById(\"history-list-container\");\r\n\r\n  if (!container) return;\r\n\r\n  // Single event listener on container using Event Delegation\r\n  container.addEventListener(\"click\", (e) => {\r\n    // Check if clicked element is \"View History\" button\r\n    const viewBtn = e.target.closest(\".btn-view-history\");\r\n    if (viewBtn) {\r\n      const historyId = viewBtn.getAttribute(\"data-id\");\r\n      handleViewHistory(historyId);\r\n      return;\r\n    }\r\n\r\n    // Check if clicked element is \"Copy History\" button\r\n    const copyBtn = e.target.closest(\".btn-copy-history\");\r\n    if (copyBtn) {\r\n      const historyId = copyBtn.getAttribute(\"data-id\");\r\n      handleCopyHistory(historyId, copyBtn);\r\n      return;\r\n    }\r\n\r\n    // Check if clicked element is \"Delete History\" button\r\n    const deleteBtn = e.target.closest(\".btn-delete-history\");\r\n    if (deleteBtn) {\r\n      const historyId = deleteBtn.getAttribute(\"data-id\");\r\n      handleDeleteHistory(historyId, deleteBtn);\r\n      return;\r\n    }\r\n  });\r\n\r\n  // Modal copy button (separate listener, not delegated)\r\n  const btnModalCopy = document.getElementById(\"btn-modal-copy\");\r\n  if (btnModalCopy) {\r\n    btnModalCopy.addEventListener(\"click\", handleModalCopy);\r\n  }\r\n\r\n  // Initialize Bootstrap tooltips on container\r\n  const tooltipTriggerList = [].slice.call(\r\n    container.querySelectorAll('[data-bs-toggle=\"tooltip\"]')\r\n  );\r\n  tooltipTriggerList.forEach((tooltipTriggerEl) => {\r\n    new bootstrap.Tooltip(tooltipTriggerEl);\r\n  });\r\n}\r\n\r\n/**\r\n * Initialize history view when view is activated\r\n */\r\nfunction initHistoryView() {\r\n  renderHistoryView();\r\n}\r\n\r\n// Listen for view change event\r\nwindow.addEventListener(\"viewChanged\", (e) => {\r\n  if (e.detail.viewId === \"view-history\") {\r\n    initHistoryView();\r\n  }\r\n});\r\n\r\nexport { renderHistoryView, initHistoryView };\r\n","/**\r\n * @file doaHaditsData.js\r\n * @description Static content for Islamic prayers and hadiths about marriage\r\n * @version 1.0\r\n * @date 2025-12-08\r\n * @source Product_Requirement_Document.md - Lampiran B Section 8\r\n */\r\n\r\n/**\r\n * @typedef {Object} DoaHaditsItem\r\n * @property {string} id - Unique identifier (DJ-01, DK-01, DW-01, HK-01, HP-01)\r\n * @property {string} category - Category key\r\n * @property {string} title - Title in Indonesian\r\n * @property {string} arabic - Arabic text\r\n * @property {string} translation - Indonesian translation\r\n * @property {string} source - Source reference\r\n */\r\n\r\n/**\r\n * Complete collection of doa and hadits about marriage\r\n * @type {Array<DoaHaditsItem>}\r\n */\r\nexport const doaHaditsData = [\r\n  // Category 1: Doa Mencari Jodoh (3 items)\r\n  {\r\n    id: \"DJ-01\",\r\n    category: \"doa-jodoh\",\r\n    title: \"Doa Nabi Musa AS Mencari Jodoh\",\r\n    arabic: \"       \",\r\n    translation:\r\n      \"Ya Tuhanku, sesungguhnya aku sangat memerlukan kebaikan apapun yang Engkau turunkan kepadaku.\",\r\n    source: \"QS. Al-Qashash: 24\",\r\n  },\r\n  {\r\n    id: \"DJ-02\",\r\n    category: \"doa-jodoh\",\r\n    title: \"Doa Memohon Pasangan Shalih\",\r\n    arabic:\r\n      \"          \",\r\n    translation:\r\n      \"Ya Tuhan kami, anugerahkanlah kepada kami pasangan dan keturunan yang menjadi penyejuk mata kami, dan jadikanlah kami pemimpin bagi orang-orang yang bertakwa.\",\r\n    source: \"QS. Al-Furqan: 74\",\r\n  },\r\n  {\r\n    id: \"DJ-03\",\r\n    category: \"doa-jodoh\",\r\n    title: \"Doa Istikharah\",\r\n    arabic:\r\n      \"         ...\",\r\n    translation:\r\n      \"Ya Allah, aku memohon pilihan yang terbaik kepada-Mu dengan ilmu-Mu, aku memohon kekuatan dengan kekuasaan-Mu, dan aku memohon karunia-Mu yang agung...\",\r\n    source: \"HR. Bukhari no. 1162\",\r\n  },\r\n\r\n  // Category 2: Doa Saat Khitbah (1 item)\r\n  {\r\n    id: \"DK-01\",\r\n    category: \"doa-khitbah\",\r\n    title: \"Doa Ketika Melihat Calon Pasangan\",\r\n    arabic:\r\n      \"               \",\r\n    translation:\r\n      \"Ya Allah, aku memohon kepada-Mu kebaikannya dan kebaikan yang Engkau ciptakan dalam dirinya, dan aku berlindung kepada-Mu dari keburukannya dan keburukan yang Engkau ciptakan dalam dirinya.\",\r\n    source: \"HR. Abu Dawud no. 2160\",\r\n  },\r\n\r\n  // Category 3: Doa Malam Pertama & Walimah (3 items)\r\n  {\r\n    id: \"DW-01\",\r\n    category: \"doa-walimah\",\r\n    title: \"Doa Pengantin untuk Pasangan\",\r\n    arabic:\r\n      \"        \",\r\n    translation:\r\n      \"Semoga Allah memberkahimu dan memberkahi atasmu, serta mengumpulkan kalian berdua dalam kebaikan.\",\r\n    source: \"HR. Abu Dawud no. 2130\",\r\n  },\r\n  {\r\n    id: \"DW-02\",\r\n    category: \"doa-walimah\",\r\n    title: \"Doa Malam Pertama\",\r\n    arabic:\r\n      \"               \",\r\n    translation:\r\n      \"Ya Allah, aku memohon kepada-Mu kebaikannya dan kebaikan yang Engkau ciptakan padanya, dan aku berlindung kepada-Mu dari keburukannya dan keburukan yang Engkau ciptakan padanya.\",\r\n    source: \"HR. Abu Dawud no. 2160\",\r\n  },\r\n  {\r\n    id: \"DW-03\",\r\n    category: \"doa-walimah\",\r\n    title: \"Doa Sebelum Berhubungan Suami Istri\",\r\n    arabic:\r\n      \"        \",\r\n    translation:\r\n      \"Dengan nama Allah. Ya Allah, jauhkanlah kami dari setan dan jauhkanlah setan dari apa yang Engkau rezekikan kepada kami.\",\r\n    source: \"HR. Bukhari no. 141\",\r\n  },\r\n\r\n  // Category 4: Hadits Keutamaan Menikah (3 items)\r\n  {\r\n    id: \"HK-01\",\r\n    category: \"hadits-menikah\",\r\n    title: \"Menikah Setengah Agama\",\r\n    arabic:\r\n      \"           \",\r\n    translation:\r\n      \"Jika seorang hamba menikah, maka ia telah menyempurnakan setengah agamanya. Maka bertakwalah kepada Allah pada setengah sisanya.\",\r\n    source: \"HR. Al-Baihaqi dalam Syu'abul Iman no. 5486, Al-Hakim no. 2681\",\r\n  },\r\n  {\r\n    id: \"HK-02\",\r\n    category: \"hadits-menikah\",\r\n    title: \"Anjuran Menikah bagi Pemuda\",\r\n    arabic:\r\n      \"            \",\r\n    translation:\r\n      \"Wahai para pemuda, barangsiapa di antara kalian yang mampu menikah, maka menikahlah. Karena menikah lebih menundukkan pandangan dan lebih menjaga kemaluan.\",\r\n    source: \"HR. Bukhari no. 5066\",\r\n  },\r\n  {\r\n    id: \"HK-03\",\r\n    category: \"hadits-menikah\",\r\n    title: \"Menikah adalah Sunnahku\",\r\n    arabic:\r\n      \"        \",\r\n    translation:\r\n      \"Menikah adalah sunnahku. Barangsiapa yang tidak mengamalkan sunnahku, maka ia bukan dari golonganku.\",\r\n    source: \"HR. Ibnu Majah no. 1846\",\r\n  },\r\n\r\n  // Category 5: Hadits Kriteria Memilih Pasangan (3 items)\r\n  {\r\n    id: \"HP-01\",\r\n    category: \"hadits-pasangan\",\r\n    title: \"Empat Kriteria Memilih Wanita\",\r\n    arabic:\r\n      \"           \",\r\n    translation:\r\n      \"Wanita dinikahi karena empat hal: hartanya, keturunannya, kecantikannya, dan agamanya. Pilihlah yang beragama, niscaya kamu beruntung.\",\r\n    source: \"HR. Bukhari no. 5090\",\r\n  },\r\n  {\r\n    id: \"HP-02\",\r\n    category: \"hadits-pasangan\",\r\n    title: \"Kriteria Memilih Pria\",\r\n    arabic:\r\n      \"               \",\r\n    translation:\r\n      \"Jika datang kepada kalian seorang lelaki yang agama dan akhlaknya kalian ridhai, maka nikahkanlah. Jika tidak, akan terjadi fitnah di muka bumi dan kerusakan yang besar.\",\r\n    source: \"HR. Tirmidzi no. 1084\",\r\n  },\r\n  {\r\n    id: \"HP-03\",\r\n    category: \"hadits-pasangan\",\r\n    title: \"Wanita Shalihah Sebaik-baik Perhiasan\",\r\n    arabic:\r\n      \"      \",\r\n    translation:\r\n      \"Dunia adalah perhiasan, dan sebaik-baik perhiasan dunia adalah wanita yang shalihah.\",\r\n    source: \"HR. Muslim no. 1467\",\r\n  },\r\n];\r\n\r\n/**\r\n * Get doa/hadits items by category\r\n * @param {string} category - Category key\r\n * @returns {Array<DoaHaditsItem>} Filtered items\r\n */\r\nexport function getByCategory(category) {\r\n  return doaHaditsData.filter((item) => item.category === category);\r\n}\r\n\r\n/**\r\n * Get doa/hadits item by ID\r\n * @param {string} id - Item ID\r\n * @returns {DoaHaditsItem|null} Found item or null\r\n */\r\nexport function getById(id) {\r\n  return doaHaditsData.find((item) => item.id === id) || null;\r\n}\r\n\r\n/**\r\n * Get all categories with counts\r\n * @returns {Object} Category statistics\r\n */\r\nexport function getCategoryStats() {\r\n  return {\r\n    \"doa-jodoh\": getByCategory(\"doa-jodoh\").length,\r\n    \"doa-khitbah\": getByCategory(\"doa-khitbah\").length,\r\n    \"doa-walimah\": getByCategory(\"doa-walimah\").length,\r\n    \"hadits-menikah\": getByCategory(\"hadits-menikah\").length,\r\n    \"hadits-pasangan\": getByCategory(\"hadits-pasangan\").length,\r\n  };\r\n}\r\n\r\n/**\r\n * Category metadata\r\n */\r\nexport const categoryMetadata = {\r\n  \"doa-jodoh\": {\r\n    name: \"Doa Mencari Jodoh\",\r\n    description:\r\n      \"Doa-doa yang dapat diamalkan sebelum menikah untuk memohon jodoh yang baik\",\r\n  },\r\n  \"doa-khitbah\": {\r\n    name: \"Doa Saat Khitbah\",\r\n    description: \"Doa yang dibaca saat proses khitbah atau meminang\",\r\n  },\r\n  \"doa-walimah\": {\r\n    name: \"Doa Malam Pertama & Walimah\",\r\n    description:\r\n      \"Doa-doa yang dibaca saat walimah dan malam pertama pernikahan\",\r\n  },\r\n  \"hadits-menikah\": {\r\n    name: \"Hadits Keutamaan Menikah\",\r\n    description:\r\n      \"Hadits-hadits tentang keutamaan dan anjuran menikah dalam Islam\",\r\n  },\r\n  \"hadits-pasangan\": {\r\n    name: \"Hadits Kriteria Pasangan\",\r\n    description: \"Hadits-hadits tentang kriteria memilih pasangan hidup\",\r\n  },\r\n};\r\n","/**\r\n * @file DoaHaditsCard.js\r\n * @description Reusable card component for displaying doa and hadits\r\n * @version 1.1\r\n * @date 2025-12-12\r\n * @changelog\r\n * - v1.1: Refactored to use const arrow functions and extracted constants (Clean Code compliance)\r\n * - v1.0: Initial release\r\n */\r\n\r\n// ===== CONSTANTS =====\r\nconst CARD_CLASS = \"doa-card\";\r\nconst COPY_BUTTON_CLASS = \"btn-copy-doa-card\";\r\nconst COPY_SUCCESS_DURATION = 2000;\r\nconst CARD_CATEGORY_ATTR = \"data-category\";\r\nconst CARD_ID_ATTR = \"data-id\";\r\nconst BUTTON_CONTENT_ATTR = \"data-content\";\r\n\r\n/**\r\n * Create doa/hadits card HTML\r\n * @param {Object} data - Doa/hadits data object\r\n * @param {string} data.id - Unique identifier\r\n * @param {string} data.title - Title/judul\r\n * @param {string} data.arabic - Arabic text\r\n * @param {string} data.translation - Indonesian translation\r\n * @param {string} data.source - Source reference\r\n * @param {string} [data.category] - Category\r\n * @returns {string} HTML string for the card\r\n */\r\nconst createDoaHaditsCard = (data) => {\r\n  const { id, title, arabic, translation, source, category = \"\" } = data;\r\n\r\n  // Escape HTML to prevent XSS\r\n  const safeTitle = escapeHtml(title);\r\n  const safeArabic = escapeHtml(arabic);\r\n  const safeTranslation = escapeHtml(translation);\r\n  const safeSource = escapeHtml(source);\r\n\r\n  // Prepare full content for copy\r\n  const fullContent = `${arabic}\\n\\n\"${translation}\"\\n\\nSumber: ${source}`;\r\n  const safeFullContent = escapeHtml(fullContent);\r\n\r\n  return `\r\n    <div class=\"card ${CARD_CLASS}\" ${CARD_ID_ATTR}=\"${id}\" ${CARD_CATEGORY_ATTR}=\"${category}\">\r\n      <div class=\"card-header\">\r\n        <h5 class=\"card-title mb-0\">${safeTitle}</h5>\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <p class=\"card-text arabic-text text-end fs-4\" dir=\"rtl\">\r\n          ${safeArabic}\r\n        </p>\r\n        <hr>\r\n        <p class=\"card-text\"><em>\"${safeTranslation}\"</em></p>\r\n        <small class=\"text-muted\">\r\n          <i class=\"bi bi-book\"></i> Sumber: ${safeSource}\r\n        </small>\r\n      </div>\r\n      <div class=\"card-footer\">\r\n        <button \r\n          class=\"btn btn-outline-primary btn-sm ${COPY_BUTTON_CLASS}\" \r\n          ${BUTTON_CONTENT_ATTR}=\"${safeFullContent}\"\r\n          ${CARD_ID_ATTR}=\"${id}\"\r\n        >\r\n          <i class=\"bi bi-clipboard\"></i> Copy\r\n        </button>\r\n      </div>\r\n    </div>\r\n  `;\r\n};\r\n\r\n/**\r\n * Render multiple doa/hadits cards to a container\r\n * @param {string} containerId - Container element ID\r\n * @param {Array<Object>} items - Array of doa/hadits objects\r\n * @returns {void}\r\n */\r\nconst renderDoaHaditsCards = (containerId, items) => {\r\n  const container = document.getElementById(containerId);\r\n  if (!container) {\r\n    console.error(`[DoaHaditsCard] Container #${containerId} not found`);\r\n    return;\r\n  }\r\n\r\n  if (!Array.isArray(items) || items.length === 0) {\r\n    container.innerHTML = `\r\n      <div class=\"alert alert-info\">\r\n        <i class=\"bi bi-info-circle\"></i>\r\n        Tidak ada konten untuk kategori ini.\r\n      </div>\r\n    `;\r\n    return;\r\n  }\r\n\r\n  // Generate cards HTML\r\n  const cardsHTML = items.map((item) => createDoaHaditsCard(item)).join(\"\");\r\n  container.innerHTML = cardsHTML;\r\n\r\n  // Attach copy event listeners\r\n  attachCopyListeners(containerId);\r\n};\r\n\r\n/**\r\n * Attach copy button event listeners\r\n * @param {string} containerId - Container element ID\r\n */\r\nconst attachCopyListeners = (containerId) => {\r\n  const container = document.getElementById(containerId);\r\n  if (!container) return;\r\n\r\n  const copyButtons = container.querySelectorAll(`.${COPY_BUTTON_CLASS}`);\r\n  copyButtons.forEach((button) => {\r\n    button.addEventListener(\"click\", async (e) => {\r\n      // Save button reference BEFORE async operation\r\n      const button = e.currentTarget;\r\n      const content = button.getAttribute(\"data-content\");\r\n      const id = button.getAttribute(\"data-id\");\r\n      const originalHTML = button.innerHTML;\r\n\r\n      try {\r\n        // Decode HTML entities\r\n        const decodedContent = decodeHtml(content);\r\n        await navigator.clipboard.writeText(decodedContent);\r\n\r\n        // Show success feedback\r\n        button.innerHTML = '<i class=\"bi bi-check\"></i> Tersalin!';\r\n        button.classList.add(\"btn-success\");\r\n        button.classList.remove(\"btn-outline-primary\");\r\n\r\n        setTimeout(() => {\r\n          button.innerHTML = originalHTML;\r\n          button.classList.remove(\"btn-success\");\r\n          button.classList.add(\"btn-outline-primary\");\r\n        }, COPY_SUCCESS_DURATION);\r\n      } catch (err) {\r\n        console.error(\"[DoaHaditsCard] Failed to copy:\", err);\r\n        alert(\"Gagal menyalin teks. Silakan copy manual.\");\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\n/**\r\n * Escape HTML special characters\r\n * @param {string} text - Text to escape\r\n * @returns {string} Escaped text\r\n */\r\nconst escapeHtml = (text) => {\r\n  const div = document.createElement(\"div\");\r\n  div.textContent = text;\r\n  return div.innerHTML;\r\n};\r\n\r\n/**\r\n * Decode HTML entities\r\n * @param {string} html - HTML string with entities\r\n * @returns {string} Decoded text\r\n */\r\nconst decodeHtml = (html) => {\r\n  const txt = document.createElement(\"textarea\");\r\n  txt.innerHTML = html;\r\n  return txt.value;\r\n};\r\n\r\nexport { createDoaHaditsCard, renderDoaHaditsCards, attachCopyListeners };\r\n","/**\r\n * @file doaView.js\r\n * @description Doa & Hadits Page View - Display Islamic prayers and hadiths\r\n * @version 1.0\r\n * @date 2025-12-08\r\n */\r\n\r\nimport { doaHaditsData, getByCategory } from \"../data/doaHaditsData.js\";\r\nimport { renderDoaHaditsCards } from \"../components/DoaHaditsCard.js\";\r\n\r\n/**\r\n * Render Doa & Hadits Page content\r\n */\r\nfunction renderDoaView() {\r\n  const container = document.getElementById(\"view-doa\");\r\n\r\n  container.innerHTML = `\r\n    <!-- Hero Card with Background Image -->\r\n    <div class=\"card mb-4 overflow-hidden border-0 shadow\">\r\n      <div class=\"position-relative\" style=\"height: 250px; background: linear-gradient(rgba(161, 29, 51, 0.5), rgba(100, 18, 32, 0.65)), url('./home_page_doa_cover.jpg') center/cover; background-size: cover; background-position: center;\">\r\n        <div class=\"position-absolute top-50 start-50 translate-middle text-center text-white w-100 px-3\">\r\n          <h1 class=\"display-5 fw-bold mb-3\">\r\n            <i class=\"bi bi-book\"></i> Doa & Hadits Pernikahan\r\n          </h1>\r\n          <p class=\"lead mb-0\">\r\n            Kumpulan doa dan hadits tentang pernikahan dalam Islam yang dapat \r\n            menjadi panduan spiritual Anda.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Category Tabs -->\r\n    <ul class=\"nav nav-pills mb-4\" id=\"doa-category-tabs\" role=\"tablist\">\r\n      <li class=\"nav-item\" role=\"presentation\">\r\n        <button \r\n          class=\"nav-link active\" \r\n          id=\"tab-doa-jodoh\" \r\n          data-bs-toggle=\"pill\" \r\n          data-bs-target=\"#content-doa-jodoh\" \r\n          type=\"button\" \r\n          role=\"tab\"\r\n        >\r\n          Doa Mencari Jodoh\r\n        </button>\r\n      </li>\r\n      <li class=\"nav-item\" role=\"presentation\">\r\n        <button \r\n          class=\"nav-link\" \r\n          id=\"tab-doa-khitbah\" \r\n          data-bs-toggle=\"pill\" \r\n          data-bs-target=\"#content-doa-khitbah\" \r\n          type=\"button\" \r\n          role=\"tab\"\r\n        >\r\n          Doa Saat Khitbah\r\n        </button>\r\n      </li>\r\n      <li class=\"nav-item\" role=\"presentation\">\r\n        <button \r\n          class=\"nav-link\" \r\n          id=\"tab-doa-walimah\" \r\n          data-bs-toggle=\"pill\" \r\n          data-bs-target=\"#content-doa-walimah\" \r\n          type=\"button\" \r\n          role=\"tab\"\r\n        >\r\n          Doa Walimah\r\n        </button>\r\n      </li>\r\n      <li class=\"nav-item\" role=\"presentation\">\r\n        <button \r\n          class=\"nav-link\" \r\n          id=\"tab-hadits-menikah\" \r\n          data-bs-toggle=\"pill\" \r\n          data-bs-target=\"#content-hadits-menikah\" \r\n          type=\"button\" \r\n          role=\"tab\"\r\n        >\r\n          Hadits Menikah\r\n        </button>\r\n      </li>\r\n      <li class=\"nav-item\" role=\"presentation\">\r\n        <button \r\n          class=\"nav-link\" \r\n          id=\"tab-hadits-pasangan\" \r\n          data-bs-toggle=\"pill\" \r\n          data-bs-target=\"#content-hadits-pasangan\" \r\n          type=\"button\" \r\n          role=\"tab\"\r\n        >\r\n          Hadits Kriteria Pasangan\r\n        </button>\r\n      </li>\r\n    </ul>\r\n\r\n    <!-- Tab Content -->\r\n    <div class=\"tab-content\" id=\"doa-tab-content\">\r\n      <!-- Doa Mencari Jodoh -->\r\n      <div class=\"tab-pane fade show active\" id=\"content-doa-jodoh\" role=\"tabpanel\">\r\n        <div id=\"cards-doa-jodoh\"></div>\r\n      </div>\r\n\r\n      <!-- Doa Saat Khitbah -->\r\n      <div class=\"tab-pane fade\" id=\"content-doa-khitbah\" role=\"tabpanel\">\r\n        <div id=\"cards-doa-khitbah\"></div>\r\n      </div>\r\n\r\n      <!-- Doa Walimah -->\r\n      <div class=\"tab-pane fade\" id=\"content-doa-walimah\" role=\"tabpanel\">\r\n        <div id=\"cards-doa-walimah\"></div>\r\n      </div>\r\n\r\n      <!-- Hadits Menikah -->\r\n      <div class=\"tab-pane fade\" id=\"content-hadits-menikah\" role=\"tabpanel\">\r\n        <div id=\"cards-hadits-menikah\"></div>\r\n      </div>\r\n\r\n      <!-- Hadits Kriteria Pasangan -->\r\n      <div class=\"tab-pane fade\" id=\"content-hadits-pasangan\" role=\"tabpanel\">\r\n        <div id=\"cards-hadits-pasangan\"></div>\r\n      </div>\r\n    </div>\r\n  `;\r\n\r\n  // Load and render doa/hadits content\r\n  loadDoaHaditsContent();\r\n}\r\n\r\n/**\r\n * Load and render doa/hadits content by category\r\n */\r\nfunction loadDoaHaditsContent() {\r\n  const categories = [\r\n    \"doa-jodoh\",\r\n    \"doa-khitbah\",\r\n    \"doa-walimah\",\r\n    \"hadits-menikah\",\r\n    \"hadits-pasangan\",\r\n  ];\r\n\r\n  categories.forEach((category) => {\r\n    const containerId = `cards-${category}`;\r\n    const items = getByCategory(category);\r\n    renderDoaHaditsCards(containerId, items);\r\n  });\r\n\r\n  // Re-attach copy listeners when tabs change\r\n  attachTabChangeListeners();\r\n}\r\n\r\n/**\r\n * Attach listeners to re-initialize copy buttons when tab changes\r\n */\r\nfunction attachTabChangeListeners() {\r\n  const tabs = document.querySelectorAll('[data-bs-toggle=\"pill\"]');\r\n\r\n  tabs.forEach((tab) => {\r\n    tab.addEventListener(\"shown.bs.tab\", (event) => {\r\n      const targetId = event.target.getAttribute(\"data-bs-target\");\r\n      if (targetId) {\r\n        const contentPane = document.querySelector(targetId);\r\n        if (contentPane) {\r\n          const cardsContainer = contentPane.querySelector('[id^=\"cards-\"]');\r\n          if (cardsContainer) {\r\n            // Re-attach copy listeners for this container\r\n            import(\"../components/DoaHaditsCard.js\").then((module) => {\r\n              module.attachCopyListeners(cardsContainer.id);\r\n            });\r\n          }\r\n        }\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\n/**\r\n * Initialize doa view when view is activated\r\n */\r\nfunction initDoaView() {\r\n  renderDoaView();\r\n}\r\n\r\n// Listen for view change event\r\nwindow.addEventListener(\"viewChanged\", (e) => {\r\n  if (e.detail.viewId === \"view-doa\") {\r\n    initDoaView();\r\n  }\r\n});\r\n\r\nexport { renderDoaView, initDoaView };\r\n","/**\r\n * @file settingsView.js\r\n * @description Settings Page View - App settings and information\r\n * @version 2.1\r\n * @date 2025-01-27\r\n */\r\n\r\nimport { clearAllData } from \"../services/localStorageService.js\";\r\nimport { showToast } from \"../components/ToastNotification.js\";\r\nimport {\r\n  setButtonLoading,\r\n  resetButtonLoading,\r\n} from \"../components/LoadingSpinner.js\";\r\n\r\n/**\r\n * Render Settings Page content\r\n */\r\nfunction renderSettingsView() {\r\n  const container = document.getElementById(\"view-settings\");\r\n\r\n  container.innerHTML = `\r\n    <!-- Page Header -->\r\n    <div class=\"mb-4\">\r\n      <h2>\r\n        <i class=\"bi bi-gear\"></i> Pengaturan & Tentang Aplikasi\r\n      </h2>\r\n      <p class=\"text-muted\">\r\n        Informasi tentang aplikasi, pengembang, dan pengaturan data.\r\n      </p>\r\n    </div>\r\n\r\n    <!-- Card 1: Tentang Aplikasi -->\r\n    <div class=\"card mb-3\">\r\n      <div class=\"card-header\">\r\n        <h5 class=\"mb-0\">\r\n          <i class=\"bi bi-info-circle\"></i> Tentang Aplikasi\r\n        </h5>\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <h4 class=\"card-title\">Taaruf CV Kreator</h4>\r\n        <p class=\"card-text\">\r\n          Aplikasi web untuk membuat CV Ta'aruf (perkenalan dalam rangka pernikahan Islami) \r\n          dengan mudah dan aman. Semua data disimpan lokal di browser Anda, tidak ada \r\n          transmisi data ke server.\r\n        </p>\r\n        <p class=\"card-text\">\r\n          <strong>Manfaat Aplikasi:</strong>\r\n        </p>\r\n        <ul>\r\n          <li>Memudahkan penyusunan CV Ta'aruf dengan format terstruktur</li>\r\n          <li>Menjaga privasi data pribadi Anda</li>\r\n          <li>Menyediakan template lengkap 49 kolom informasi</li>\r\n          <li>Dilengkapi doa dan hadits tentang pernikahan</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Card 2: Informasi Developer -->\r\n    <div class=\"card mb-3\">\r\n      <div class=\"card-header\">\r\n        <h5 class=\"mb-0\">\r\n          <i class=\"bi bi-code-slash\"></i> Informasi Developer\r\n        </h5>\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <p class=\"card-text\">\r\n          <strong>Dikembangkan oleh:</strong> \r\n          <a \r\n            href=\"https://github.com/GulajavaMinistudio\" \r\n            target=\"_blank\" \r\n            rel=\"noopener noreferrer\"\r\n            class=\"text-decoration-none\"\r\n          >\r\n            Gulajava Ministudio\r\n          </a>\r\n        </p>\r\n        <p class=\"card-text\">\r\n          Aplikasi ini dikembangkan sebagai proyek open-source untuk membantu \r\n          Muslim dan Muslimah dalam proses ta'aruf.\r\n        </p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Card 3: Tools & Teknologi -->\r\n    <div class=\"card mb-3\">\r\n      <div class=\"card-header\">\r\n        <h5 class=\"mb-0\">\r\n          <i class=\"bi bi-tools\"></i> Tools & Teknologi\r\n        </h5>\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <p class=\"card-text mb-3\">Aplikasi ini dibangun menggunakan:</p>\r\n        <div class=\"d-flex flex-wrap gap-2\">\r\n          <span class=\"badge bg-primary\">HTML5</span>\r\n          <span class=\"badge bg-primary\">CSS3</span>\r\n          <span class=\"badge bg-primary\">Vanilla JavaScript</span>\r\n          <span class=\"badge bg-primary\">Bootstrap 5</span>\r\n          <span class=\"badge bg-primary\">Vite</span>\r\n          <span class=\"badge bg-primary\">LocalStorage API</span>\r\n          <span class=\"badge bg-primary\">Visual Studio Code</span>\r\n          <span class=\"badge bg-primary\">GitHub Copilot AI</span>\r\n          <span class=\"badge bg-primary\">Google Antigravity</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Card 4: Versi Aplikasi -->\r\n    <div class=\"card mb-3\">\r\n      <div class=\"card-header\">\r\n        <h5 class=\"mb-0\">\r\n          <i class=\"bi bi-tag\"></i> Versi Aplikasi\r\n        </h5>\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <p class=\"card-text\">\r\n          <strong>Versi:</strong> 1.0<br>\r\n          <strong>Tanggal Rilis:</strong> Desember 2025<br>\r\n          <strong>Status:</strong> <span class=\"badge bg-success\">Stable</span>\r\n        </p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Card 5: Kebijakan Privasi -->\r\n    <div class=\"card mb-4\">\r\n      <div class=\"card-header\">\r\n        <h5 class=\"mb-0\">\r\n          <i class=\"bi bi-shield-lock\"></i> Kebijakan Privasi\r\n        </h5>\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <h6>Komitmen Privasi Kami</h6>\r\n        <p class=\"card-text\">\r\n          Kami sangat menjaga privasi pengguna. Berikut adalah komitmen kami:\r\n        </p>\r\n        <ul class=\"mb-3\">\r\n          <li><strong>Tidak Ada Pengumpulan Data:</strong> Aplikasi ini tidak mengumpulkan, \r\n              menyimpan, atau mengirim data Anda ke server manapun.</li>\r\n          <li><strong>Penyimpanan Lokal:</strong> Semua data disimpan di browser Anda \r\n              menggunakan teknologi LocalStorage.</li>\r\n          <li><strong>Kendali Penuh:</strong> Anda memiliki kendali penuh atas data Anda \r\n              dan dapat menghapusnya kapan saja.</li>\r\n          <li><strong>Tidak Ada Tracking:</strong> Tidak ada analytics, cookies tracking, \r\n              atau teknologi pelacakan lainnya.</li>\r\n        </ul>\r\n        <div class=\"alert alert-info mb-0\">\r\n          <i class=\"bi bi-lightbulb\"></i>\r\n          <strong>Catatan:</strong> Data Anda hanya tersimpan di browser ini. Jika Anda \r\n          membersihkan cache browser atau menggunakan mode incognito, data tidak akan \r\n          tersimpan permanen.\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Danger Zone -->\r\n    <div class=\"danger-zone\">\r\n      <h5>\r\n        <i class=\"bi bi-exclamation-triangle\"></i> Danger Zone\r\n      </h5>\r\n      <p class=\"text-muted mb-3\">\r\n        Tindakan di area ini bersifat permanen dan tidak dapat dibatalkan.\r\n      </p>\r\n      <button type=\"button\" class=\"btn btn-danger\" id=\"btn-reset-data\">\r\n        <i class=\"bi bi-trash\"></i> Reset Semua Data\r\n      </button>\r\n      <p class=\"text-muted mt-2 mb-0\">\r\n        <small>\r\n          Menghapus semua draft, riwayat CV, dan pengaturan. \r\n          Tindakan ini tidak dapat dibatalkan!\r\n        </small>\r\n      </p>\r\n    </div>\r\n  `;\r\n\r\n  // Attach event listeners\r\n  attachEventListeners();\r\n}\r\n\r\n/**\r\n * Attach event listeners for settings page interactions\r\n */\r\nfunction attachEventListeners() {\r\n  const btnReset = document.getElementById(\"btn-reset-data\");\r\n\r\n  // Reset data button\r\n  if (btnReset) {\r\n    btnReset.addEventListener(\"click\", () => {\r\n      const confirmed = confirm(\r\n        \" PERINGATAN!\\n\\n\" +\r\n          \"Anda akan menghapus SEMUA data termasuk:\\n\" +\r\n          \"- Semua draft CV\\n\" +\r\n          \"- Semua riwayat CV\\n\" +\r\n          \"- Pengaturan aplikasi\\n\\n\" +\r\n          \"Tindakan ini TIDAK DAPAT DIBATALKAN!\\n\\n\" +\r\n          \"Apakah Anda yakin ingin melanjutkan?\"\r\n      );\r\n\r\n      if (confirmed) {\r\n        const doubleConfirm = confirm(\r\n          \"Konfirmasi terakhir:\\n\\n\" +\r\n            \"Apakah Anda BENAR-BENAR YAKIN ingin menghapus semua data?\"\r\n        );\r\n\r\n        if (doubleConfirm) {\r\n          // Show loading state\r\n          setButtonLoading(btnReset, \"Menghapus...\");\r\n\r\n          // Simulate async operation\r\n          setTimeout(() => {\r\n            const result = clearAllData();\r\n\r\n            if (result.success) {\r\n              showToast(\r\n                \"Semua data berhasil dihapus. Halaman akan dimuat ulang...\",\r\n                \"success\"\r\n              );\r\n\r\n              // Reload page after 1.5 seconds to show toast\r\n              setTimeout(() => {\r\n                window.location.reload();\r\n              }, 1500);\r\n            } else {\r\n              resetButtonLoading(btnReset);\r\n              showToast(result.message || \"Gagal menghapus data\", \"error\");\r\n              console.error(\"[SettingsView] Clear data failed:\", result.error);\r\n            }\r\n          }, 500);\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Initialize settings view when view is activated\r\n */\r\nfunction initSettingsView() {\r\n  renderSettingsView();\r\n}\r\n\r\n// Listen for view change event\r\nwindow.addEventListener(\"viewChanged\", (e) => {\r\n  if (e.detail.viewId === \"view-settings\") {\r\n    initSettingsView();\r\n  }\r\n});\r\n\r\nexport { renderSettingsView, initSettingsView };\r\n","/**\n * Taaruf CV Kreator - Main Entry Point\n * Phase 2: UI Skeleton & Routing Implementation\n */\n\n// Import Bootstrap CSS and JS\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport * as bootstrap from \"bootstrap\";\n\n// Import custom styles\nimport \"./style.css\";\n\n// Import Router\nimport { initRouter } from \"./router/router.js\";\n\n// Import Keyboard Navigation\nimport {\n  initKeyboardNavigation,\n  enableKeyboardShortcuts,\n} from \"./utils/keyboardNavigation.js\";\n\n// Import All Views (they self-register for viewChanged events)\nimport \"./views/landingView.js\";\nimport \"./views/formView.js\";\nimport \"./views/previewView.js\";\nimport \"./views/resultView.js\";\nimport \"./views/draftView.js\";\nimport \"./views/historyView.js\";\nimport \"./views/doaView.js\";\nimport \"./views/settingsView.js\";\n\n// Make Bootstrap available globally\nwindow.bootstrap = bootstrap;\n\n/**\n * Application Initialization\n */\nfunction initApp() {\n  // Initialize Router (handles view switching and navigation)\n  initRouter();\n\n  // Initialize Keyboard Navigation & Accessibility\n  initKeyboardNavigation();\n  enableKeyboardShortcuts();\n\n  // Set current year in footer\n  const yearElement = document.getElementById(\"year-footer\");\n  if (yearElement) {\n    yearElement.textContent = new Date().getFullYear();\n  }\n\n  // Enable Bootstrap Tooltips globally\n  const tooltipTriggerList = [].slice.call(\n    document.querySelectorAll('[data-bs-toggle=\"tooltip\"]')\n  );\n  tooltipTriggerList.map(function (tooltipTriggerEl) {\n    return new bootstrap.Tooltip(tooltipTriggerEl);\n  });\n}\n\n// Initialize app when DOM is ready\nif (document.readyState === \"loading\") {\n  document.addEventListener(\"DOMContentLoaded\", initApp);\n} else {\n  // DOM is already ready\n  initApp();\n}\n"],"file":"index-C7hiGnGy.js"}